{"code":"option = {\n    title: {\n        text: '百度知道回答，echarts 如何在多列柱状图上方显示各列合计值'\n    },\n    xAxis: {\n        data: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n    },\n    yAxis: {},\n    series: [{\n        type: 'bar',\n        data: [220, 182, 191, 234, 290, 330, 310]\n    }, {\n        type: 'bar',\n        data: [230, 152, 121, 214, 220, 320, 330]\n    }]\n};\n\n// 用于隐藏 itemStyle 的配置项\nvar hidddenStyle = {\n    normal: {\n        color: 'rgba(0,0,0,0)',\n    },\n    emphasis: {\n        color: 'rgba(0,0,0,0)'\n    }\n};\n\n// 需要添加的、透明的辅助 series，用线图是避免柱图占横轴的空间\nseriesAdd = {\n    type: 'line',\n    itemStyle: hidddenStyle,\n    symbol:'circle',  // 将线图数据点设置为实心圆，因为空心会留下白点……\n    silent: true, // 使线图不触发鼠标事件\n    label: {\n        show: true,\n        color: '#000',\n        position: 'top',\n        formatter: (params) => params.name + '合计\\n' + params.data.sum\n    },\n    data: []\n};\n\n// 遍历现有的 series\nsumSeries = option.series.map(item => {\n    \n    // 嵌套遍历 series.data，value 存最大值， sum 存合计值\n    for (var i in item.data) {\n        seriesAdd.data[i] === undefined ? seriesAdd.data[i] = {} : null;\n        seriesAdd.data[i].value === undefined || seriesAdd.data[i].value < item.data[i] ?\n            seriesAdd.data[i].value = item.data[i] : null;\n        seriesAdd.data[i].sum === undefined ?\n            seriesAdd.data[i].sum = item.data[i] :\n            seriesAdd.data[i].sum += item.data[i];\n    }\n});\n\n// 配置项中插入辅助 series，重新渲染图表\noption.series.push(seriesAdd);\nmyChart.setOption(option);"}