{"code":"var population = [\n    { source: '原油', target: '能源消费', value: 12.3 },\n    { source: '原油', target: '能源损失', value: 32.2 },\n    { source: '原油', target: '库存', value: 6.4 },\n\n    { source: '原煤', target: '能源消费', value: 32.3 },\n    { source: '原煤', target: '能源损失', value: 16.2 },\n    { source: '原煤', target: '库存', value: 6.4 },\n\n    { source: '煤制品', target: '能源消费', value: 12.3 },\n    { source: '煤制品', target: '能源损失', value: 8.2 },\n    { source: '煤制品', target: '库存', value: 1.4 },\n\n    { source: '一次电力', target: '能源消费', value: 22.3 },\n    { source: '一次电力', target: '能源损失', value: 6.2 },\n    { source: '一次电力', target: '库存', value: 6.4 },\n\n    { source: '天然气', target: '能源消费', value: 27.3 },\n    { source: '天然气', target: '能源损失', value: 32.2 },\n    { source: '天然气', target: '库存', value: 1.1 },\n];\n\nvar city = {\n    原油: '#3dc5e7',\n    原煤: '#8bc77b',\n    煤制品: '#feda66',\n    一次电力: '#6d62e4',\n    天然气: '#5AAEF4',\n\n    能源消费: '#fb7f10',\n    能源损失: '#9580ff',\n    库存: '#2aa12d',\n};\nlet position = {\n    原油: 'right',\n    原煤: 'right',\n    煤制品: 'right',\n    一次电力: 'right',\n    天然气: 'right',\n\n    能源消费: 'left',\n    能源损失: 'left',\n    库存: 'left',\n};\nvar citylist = [];\n//遍历city\nfor (var key in city) {\n    citylist.push(\n        {\n            name: key,\n            itemStyle: { normal: { color: city[key] } },\n            label: {\n                position: position[key],\n            },\n        } //构造节点对象，包括name和itemStyle\n    );\n}\nconsole.log(citylist);\nvar data = [];\nfor (var i = 0; i < population.length; i++) {\n    var color = new echarts.graphic.LinearGradient(0, 0, 1, 0, [\n        {\n            offset: 0,\n            color: city[population[i].source], //获取起始节点的颜色属性\n        },\n        {\n            offset: 1,\n            color: city[population[i].target], //获取结尾节点的颜色属性\n        },\n    ]);\n    data.push({\n        source: population[i].source,\n        target: population[i].target,\n        value: population[i].value,\n        label: {\n            textStyle: {\n                fontSize: 16,\n                fontWeight: 400,\n                color: '#666666',\n            },\n        },\n        lineStyle: {\n            //添加样式配置\n            normal: {\n                color: color,\n            },\n        },\n    });\n}\nvar option = {\n    tooltip: {\n        trigger: 'item',\n        triggerOn: 'mousemove',\n    },\n    //4.0版本\n    series: [\n        {\n            type: 'sankey',\n            top: 50,\n            left: 50,\n            right: 50,\n            nodeGap: 14,\n            data: citylist,\n            links: data,\n            focusNodeAdjacency: 'allEdges',\n            itemStyle: {\n                borderWidth: 0,\n                borderColor: '#fff',\n                //opacity: 1,\n            },\n            lineStyle: {\n                color: 'source',\n                curveness: 0.5,\n            },\n            //  label: {\n            //     normal: {\n            //         fontSize: '14',\n            //         color: '#212b43',\n            //     },\n            // },\n        },\n    ],\n};\n"}