{"code":"option = {\r\n    tooltip: {\r\n        trigger: 'axis',\r\n        axisPointer: { // 坐标轴指示器，坐标轴触发有效\r\n            type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'\r\n        },\r\n        formatter: (param, ticket, callback) => {\r\n            var str = ''\r\n            for (const item of param) {\r\n                item.seriesName && (str += item.marker + ' ' + item.seriesName + '：' + item.value + '<br>')\r\n            }\r\n\r\n            return str\r\n        }\r\n    },\r\n    legend: {\r\n        data: ['高危', '中低'],\r\n        right: '20px'\r\n    },\r\n    grid: {\r\n        left: '3%',\r\n        right: '4%',\r\n        bottom: '3%',\r\n        width: '100%',\r\n        containLabel: true\r\n    },\r\n    xAxis: {\r\n        data: ['业务系统1', '业务系统1', '业务系统1', '业务系统1', '业务系统1', '业务系统1', '业务系统1']\r\n    },\r\n    yAxis: {\r\n        type: 'value'\r\n\r\n    },\r\n    series: [{\r\n            name: '高危',\r\n            type: 'bar',\r\n            color: '#F56C6C',\r\n            barWidth: 30,\r\n            stack: '总量',\r\n\r\n            data: [50, 60, 59, 50, 50, 50, 50]\r\n        },\r\n        {\r\n            name: '中低',\r\n            type: 'bar',\r\n            stack: '总量',\r\n            color: '#F5AF45',\r\n            barWidth: 30,\r\n\r\n            data: [70, 70, 70, 70, 70, 70, 70]\r\n        },\r\n\r\n        {\r\n            name: '',\r\n            type: 'bar',\r\n            data: [0, 0, 0, 0, 0, 0, 0, ],\r\n            stack: '总量',\r\n            barWidth: 30,\r\n            label: {\r\n                show: true,\r\n                position: 'top',\r\n                color: 'black'\r\n            }\r\n        }\r\n\r\n    ]\r\n};\r\nvar series = option.series\r\n\r\nfunction getSum(params) {\r\n\r\n    var datavalue = 0\r\n    for (var i = 0; i < series.length; i++) {\r\n        datavalue += series[i].data[params.dataIndex]\r\n    }\r\n    return datavalue\r\n}\r\n\r\nseries[series.length - 1].label.formatter = getSum\r\nmyChart.setOption(option)\r\nmyChart.on('legendselectchanged', (obj) => {\r\n    function getSum(params) {\r\n        var datavalue = 0\r\n        for (var i = 0; i < series.length; i++) {\r\n            if (obj.selected[series[i].name]) {\r\n                datavalue += series[i].data[params.dataIndex]\r\n            }\r\n        }\r\n        return datavalue\r\n    }\r\n    series[series.length - 1].label.formatter = getSum\r\n    myChart.setOption(option)\r\n})"}