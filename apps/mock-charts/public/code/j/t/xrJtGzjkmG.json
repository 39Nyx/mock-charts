{"code":"var obj={\r\n    \"data\": {\r\n        \"linksList\": [\r\n            {\r\n                \"source\": \"2018\",\r\n                \"target\": \"报表名称2\",\r\n            }\r\n        ],\r\n        \"nodesList\": [\r\n            {\r\n                \"category\": \"1\",\r\n                \"name\": \"报表名称2\",\r\n                \"value\": \"10\"\r\n            },\r\n            {\r\n                \"category\": \"0\",\r\n                \"name\": \"2018\",\r\n                \"value\": \"10\"\r\n            },\r\n            {\r\n                \"category\": \"1\",\r\n                \"name\": \"报表四\",\r\n                \"value\": \"10\"\r\n            },\r\n            {\r\n                \"category\": \"1\",\r\n                \"name\": \"报表名称1\",\r\n                \"value\": \"10\"\r\n            }\r\n        ]\r\n    },\r\n    \"resultCode\": 0\r\n}\r\nconsole.log(obj)\r\n\r\nvar categories = [];\r\nvar nodes=[],links=[];\r\nobj.data.nodesList.forEach((data)=>{\r\n    nodes.push({\r\n        category:data.category,\r\n        name:data.name,\r\n        value:data.value\r\n    })\r\n    if(categories.indexOf(data.category)==-1){\r\n        categories.push(data.category)\r\n    }\r\n})\r\nobj.data.linksList.forEach((data)=>{\r\n    links.push({\r\n        source:data.source,\r\n        target:data.target\r\n    })\r\n})\r\ncategories=categories.map((data)=>{\r\n    return {name:data}\r\n})\r\n\r\nconsole.log(categories,nodes,links)\r\noption = {\r\n        title: {\r\n            text: 'Les Miserables',\r\n            subtext: 'Default layout',\r\n            top: 'bottom',\r\n            left: 'right'\r\n        },\r\n        tooltip: {},\r\n        legend: [{\r\n            // selectedMode: 'single',\r\n            data: categories.map(function (a) {\r\n                return a.name;\r\n            })\r\n        }],\r\n        animation: false,\r\n        series : [\r\n            {\r\n                name: 'Les Miserables',\r\n                type: 'graph',\r\n                layout: 'force',\r\n                data: nodes,\r\n                links: links,\r\n                categories: categories,\r\n                roam: true,\r\n                label: {\r\n                    normal: {\r\n                        position: 'right'\r\n                    }\r\n                },\r\n                force: {\r\n                    repulsion: 100\r\n                }\r\n            }\r\n        ]\r\n    };\r\n"}