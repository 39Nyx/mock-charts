{"code":"app.title = '堆叠条形图';\n\noption = {\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: { \n            type: 'shadow' \n        }\n    },\n    legend: {\n        data: ['直接访问', '邮件营销', '联盟广告', '视频广告', '搜索引擎']\n    },\n    grid: {\n        left: '3%',\n        right: '4%',\n        bottom: '3%',\n        containLabel: true\n    },\n    xAxis: {\n        type: 'value'\n    },\n    yAxis: {\n        type: 'category',\n        data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日']\n    },\n    series: [{\n            name: '直接访问',\n            type: 'bar',\n            stack: '总量',\n            label: {\n                normal: {\n                    show: true,\n                    position: 'insideRight'\n                }\n            },\n            z: 10,\n            data: [320, 302, 301, 334, 390, 330, 320]\n        },\n        {\n            name: '邮件营销',\n            type: 'bar',\n            stack: '总量',\n            label: {\n                normal: {\n                    show: true,\n                    position: 'insideRight'\n                }\n            },\n            z: 10,\n            data: [120, 132, 101, 134, 90, 230, 210]\n        },\n        {\n            name: '联盟广告',\n            type: 'bar',\n            stack: '总量',\n            label: {\n                normal: {\n                    show: true,\n                    position: 'insideRight'\n                }\n            },\n            z: 10,\n            data: [220, 182, 191, 234, 290, 330, 310]\n        },\n        {\n            name: '视频广告',\n            type: 'bar',\n            stack: '总量',\n            label: {\n                normal: {\n                    show: true,\n                    position: 'insideRight'\n                }\n            },\n            z: 10,\n            data: [150, 212, 201, 154, 190, 330, 410]\n        },\n        {\n            name: '搜索引擎',\n            type: 'bar',\n            stack: '总量',\n            z: 10,\n            label: {\n                normal: {\n                    show: true,\n                    position: 'insideRight'\n                }\n            },\n            data: [820, 832, 901, 934, 1290, 1330, 1320]\n        }\n    ]\n};\n// 求出每天的和\nfunction sum(num) {\n    let E = 0;\n    option.series.forEach(item => {\n        E += item.data[num]\n    });\n    return E;\n};\noption.series.push({\n    name: '总量',\n    type: 'bar',\n    stack: '搜索引擎',\n    barGap: '-100%', // 将总计与其他数据重合\n    label: {\n        normal: {\n            show: true,\n             position: ['101%', '40%'], // 总计数据的位置,\n            textStyle: {\n                color: '#000' //总计数据的颜色\n            },\n        },\n    },\n    itemStyle: {\n        color:'#cccccc', // 颜色自己设\n    },\n    data: [sum(0), sum(1), sum(2), sum(3), sum(4), sum(5), sum(6)]\n})\nmyChart.setOption(option);"}