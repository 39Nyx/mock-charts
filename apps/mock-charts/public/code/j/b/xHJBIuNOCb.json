{"code":"function getDateTimeStamp(dateStr){\r\n\t\treturn Date.parse(dateStr.replace(/-/gi,\"/\"));\r\n\t}\r\n\r\nvar nodeArray = [\r\n\t\t\t{\r\n\t\t\t\ttitle: \"开始\",\r\n\t\t\t\tdescription: \"开始1\",\r\n\t\t\t\tassignDate: \"2017-10-22\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"提交\",\r\n\t\t\t\tdescription: \"提交2\",\r\n\t\t\t\tassignDate: \"2017-10-27\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"评审\",\r\n\t\t\t\tdescription: \"评审3\",\r\n\t\t\t\tassignDate: \"2017-11-02\"\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttitle: \"结束\",\r\n\t\t\t\tdescription: \"结束4\",\r\n\t\t\t\tassignDate: \"2017-12-30\"\r\n\t\t\t}\r\n\t\t];\r\n\t\t\r\nnodeArray.sort(function(a, b){\r\n\t\t\treturn getDateTimeStamp(a.assignDate) - getDateTimeStamp(b.assignDate);\r\n        });\r\n\r\nvar nArrayMaxIndex = nodeArray.length - 1;\r\n    xMin = \tgetDateTimeStamp(nodeArray[0].assignDate),\t\r\n    xMax = \tgetDateTimeStamp(nodeArray[nArrayMaxIndex].assignDate),\r\n    d = new Date(),\r\n    today = getDateTimeStamp(d.getFullYear()+\"-\"+(d.getMonth()+1)+\"-\"+d.getDate());\r\n    markPointOpt = [];\r\n\r\nnodeArray.forEach(function(v,i){\r\n    var sv = getDateTimeStamp(v.assignDate),\r\n        //ic = sv > today ? \"#fff\" : \"#7b9d6f\",\r\n        ic = sv > today || sv < today ? \"#fff\" : \"#7b9d6f\",\r\n        bc = sv > today ? \"#dfdfdf\" : \"#7b9d6f\",\r\n        p = i > 0 && i < nArrayMaxIndex ? \"top\" : \"bottom\";\r\n    markPointOpt.push({\r\n        name: v.assignDate,\r\n        coord: [sv, 0, v.title],\r\n        value: sv,\r\n        symbol: \"circle\",\r\n        symbolSize: 12,\r\n        itemStyle:{\r\n            normal:{\r\n                color: ic,\r\n                borderColor: bc,\r\n                borderWidth: 2\r\n            },\r\n            emphasis:{\r\n                color: ic,\r\n                borderColor: bc,\r\n                borderWidth: 2\r\n            }\r\n        },\r\n        label:{\r\n            normal:{\r\n                position: p,\r\n                formatter: function(params){\r\n                    if(p == \"bottom\"){\r\n                        return ['{b|'+params.name+'}', '{a|'+params.data.coord[2]+'}'].join('\\n'); \r\n                    }else{\r\n                        return ['{b|'+params.data.coord[2]+'}','{a|'+params.name+'}'].join('\\n');\r\n                    }\r\n                },\r\n                rich: {\r\n                    a: {\r\n                        align: \"center\",\r\n                        padding: [0, 0, 5],\r\n                        color: \"#383838\",\r\n                    },\r\n                    b: {\r\n                        align: \"center\",\r\n                        color: \"#383838\",\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    })\r\n})\r\n\r\nvar markLineOpt = {\r\n    lineStyle: {\r\n        normal: {\r\n            color: \"#7b9d6f\",\r\n            width: 2,\r\n            type: 'solid'\r\n        }\r\n    },\r\n    silent: true,\r\n    data: [[{\r\n        coord: [xMin, 0],\r\n        symbol: 'none'\r\n    }, {\r\n        coord: [today, 0],\r\n        symbol: 'none'\r\n    }]]\r\n};\r\n\r\nvar option = {\r\n    tooltip: {\r\n        show: false\r\n    },\r\n    grid:{\r\n        height: '5%'\r\n    },\r\n    xAxis: {\r\n        axisLine:{\r\n            lineStyle:{\r\n                color:\"#dfdfdf\",\r\n                width: 2\r\n            }\r\n        },\r\n        axisTick:{\r\n            show: false\r\n        },\r\n        axisLabel:{\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            show: false\r\n        },\r\n        min: xMin, \r\n        max: xMax\r\n    },\r\n    yAxis: {\r\n        show: false,\r\n    },\r\n    series: [\r\n        {\r\n            name: 'I',\r\n            type: 'scatter',\r\n            data: [],\r\n            markLine: markLineOpt,\r\n            markPoint: {\r\n                data: markPointOpt\r\n            }\r\n        }\r\n    ]\r\n};"}