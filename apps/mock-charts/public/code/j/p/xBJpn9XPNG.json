{"code":"function mecatorToLngLat(mecator_lnglat) {\r\n    var lnglat = [];\r\n    if (Array.isArray(mecator_lnglat[0])) {\r\n        for (var i = 0; i < mecator_lnglat.length; i++) {\r\n            var _lnglat = proj4('EPSG:3857', 'EPSG:4326', mecator_lnglat[i]);\r\n            lnglat.push(_lnglat)\r\n        }\r\n    } else {\r\n        lnglat = proj4('EPSG:3857', 'EPSG:4326', mecator_lnglat);\r\n    }\r\n    return lnglat;\r\n}\r\n\r\nvar dataurl = '/asset/get/s/data-1515825121695-rkqkOQvEz.js'\r\nmyChart.showLoading();\r\n$.getJSON(dataurl, function(rs) {\r\n    myChart.hideLoading();\r\n\r\n    var lineData = [];\r\n    var maxLength = 0;\r\n\r\n    for (var i = 0; i < rs.length; i++) {\r\n        var item = rs[i][1];\r\n        if (item.length > maxLength)\r\n            maxLength = item.length;\r\n        lineData.push(mecatorToLngLat(item));\r\n    }\r\n\r\n    option = {\r\n        maptalks3D: {\r\n            center: [116.32736206054689, 39.75861229610178],\r\n            zoom: 11,\r\n            urlTemplate: 'http://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png',\r\n            altitudeScale: 2,\r\n            // style: 'mapbox://styles/mapbox/dark-v9',\r\n            postEffect: {\r\n                enable: true,\r\n                FXAA: {\r\n                    enable: true\r\n                }\r\n            },\r\n            light: {\r\n                main: {\r\n                    intensity: 1,\r\n                    shadow: true,\r\n                    shadowQuality: 'high'\r\n                },\r\n                ambient: {\r\n                    intensity: 0.\r\n                },\r\n                ambientCubemap: {\r\n                    texture: '/asset/get/s/data-1491838644249-ry33I7YTe.hdr',\r\n                    exposure: 1,\r\n                    diffuseIntensity: 0.5,\r\n                    specularIntensity: 2\r\n                }\r\n            }\r\n        },\r\n        series: [{\r\n            type: 'lines3D',\r\n\r\n            coordinateSystem: 'maptalks3D',\r\n\r\n            effect: {\r\n                show: true,\r\n                constantSpeed: 40,\r\n                trailWidth: 2,\r\n                trailLength: 0.4,\r\n                trailOpacity: 1,\r\n                spotIntensity: 10\r\n            },\r\n\r\n            blendMode: 'lighter',\r\n\r\n            polyline: true,\r\n\r\n            lineStyle: {\r\n                width: 0.1,\r\n                color: 'rgb(10, 60, 170)',\r\n                opacity: 0.\r\n            },\r\n\r\n            data: lineData\r\n        }]\r\n    }\r\n    myChart.setOption(option);\r\n})"}