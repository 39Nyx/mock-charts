{"code":"var uploadedDataURL = \"/asset/get/s/data-1550116430897-dcjHih3pA.json\";\n\n\n\n$.getJSON(uploadedDataURL, function(geoJson) {\n    myChart.hideLoading();\n    echarts.registerMap('NANNING', geoJson); //只需要注册省的json数据，（注册哪里显示哪里）\n\n    var geoCoordMap = {\n        '南宁市': [108.479,23.1152],\n        \"上林县\":[108.603937, 23.431769],\n        \"江南区\":[108.310478, 22.799593],\n        \"宾阳县\":[108.816735,23.216884],\n        \"横县\":[109.270987,22.68743],\n        \"武鸣区\":[108.280717,23.157163],\n        \"良庆区\":[108.322102,22.75909],\n        \"马山县\":[108.172903,23.711758],\n        \"邕宁区\":[108.484251,22.756598],\n        \"西乡塘区\":[108.306903,22.832779],\n        \"青秀区\":[108.346113,22.816614],\n        \"隆安县\":[107.688661,23.174763],\n        \"兴宁区\":[108.320189,22.819511],\n    };\n    \n    var BJData = [\n        [{name:''}, {name:'南宁市',value:80}],\n        [{name:'南宁市'}, {name:'上林县',value:80}],\n        [{name:'南宁市'}, {name:'江南区',value:80}],\n        [{name:'南宁市'}, {name:'宾阳县',value:80}],\n        [{name:'南宁市'}, {name:'横县',value:80}],\n        [{name:'南宁市'}, {name:'马山县',value:80}],\n        [{name:'南宁市'}, {name:'隆安县',value:80}],\n    ];\n    \n    var planePath = 'path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z';\n\n    var convertData = function (data) {\n        var res = [];\n        for (var i = 0; i < data.length; i++) {\n            var dataItem = data[i];\n            var fromCoord = geoCoordMap[dataItem[0].name];\n            var toCoord = geoCoordMap[dataItem[1].name];\n            if (fromCoord && toCoord) {\n                res.push({\n                    fromName: dataItem[0].name,\n                    toName: dataItem[1].name,\n                    coords: [fromCoord, toCoord]\n                });\n            }\n        }\n        return res;\n    };\n\n    var color = ['#a6c84c', '#ffa022', '#46bee9'];\n    var series = [];\n    [['南宁市', BJData]].forEach(function (item, i) {\n        series.push({\n            // name: item[0],\n            type: 'lines',\n            zlevel: 1,\n            effect: {\n                show: true,\n                period: 6,\n                trailLength: 0.7,\n                color: '#fff',\n                symbolSize: 3\n            },\n            lineStyle: {\n                normal: {\n                    color: color[i],\n                    width: 0,\n                    curveness: 0.2\n                }\n            },\n            data: convertData(item[1])\n        },\n        // {\n        //     // name: item[0],\n        //     type: 'lines',\n        //     zlevel: 2,\n        //     symbol: ['none', 'arrow'],\n        //     symbolSize: 10,\n        //     effect: {\n        //         show: true,\n        //         period: 6,\n        //         trailLength: 0,\n        //         symbol: planePath,\n        //         symbolSize: 15\n        //     },\n        //     lineStyle: {\n        //         normal: {\n        //             color: color[i],\n        //             width: 1,\n        //             opacity: 0.6,\n        //             curveness: 0.2\n        //         }\n        //     },\n        //     data: convertData(item[1])\n        // },\n        {\n            // name: item[0],\n            type: 'effectScatter',\n            coordinateSystem: 'geo',\n            zlevel: 2,\n            rippleEffect: {\n                brushType: 'stroke'\n            },\n            label: {\n                normal: {\n                    show: true,\n                    position: 'right',\n                    formatter: '{b}'\n                }\n            },\n            symbolSize: function (val) {\n                return val[2] / 8;\n            },\n            itemStyle: {\n                normal: {\n                    color: color[i]\n                }\n            },\n            data: item[1].map(function (dataItem) {\n                return {\n                    name: dataItem[1].name,\n                    value: geoCoordMap[dataItem[1].name].concat([dataItem[1].value])\n                };\n            })\n        });\n    });\n    \n    option = {\n        backgroundColor: '#404a59',\n        title : {\n            text: '南宁市',\n            subtext: '鲜生销售路线',\n            left: 'center',\n            textStyle : {\n                color: '#fff'\n            }\n        },\n        tooltip : {\n            trigger: 'item'\n        },\n        legend: {\n            orient: 'vertical',\n            top: 'bottom',\n            left: 'right',\n            textStyle: {\n                color: '#fff'\n            },\n            selectedMode: 'single'\n        },\n        geo: {\n            map: 'NANNING',\n            label: {\n                emphasis: {\n                    show: false\n                }\n            },\n            roam: true,\n            itemStyle: {\n                normal: {\n                    areaColor: '#323c48',\n                    borderColor: '#404a59'\n                },\n                emphasis: {\n                    areaColor: '#2a333d'\n                }\n            }\n        },\n        series: series\n    };  \n\n    myChart.setOption(option);\n})\n\n"}