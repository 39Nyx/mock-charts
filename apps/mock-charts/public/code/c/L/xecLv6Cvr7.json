{"code":"datasetSource = [\n    ['product', '2015', '2016', '2017', '2018'],\n    ['Matcha Latte', 43.3, 85.8, 93.7, 54.2],\n    ['Milk Tea', 83.1, 73.4, 55.1, 65.3],\n    ['Cheese Cocoa', 86.4, 65.2, 82.5, 87.1],\n    ['Walnut Brownie', 72.4, 53.9, 39.1, 33.6]\n];\n\nfunction arrFilter(source, hasColumnName, filterCondition) {\n    var iBegin = hasColumnName ? 1 : 0;\n    var res = hasColumnName ? [source[0]] : [];\n    if (typeof(filterCondition) === 'function') {\n        for (var i = iBegin; i < source.length; i++) {\n            if (filterCondition(source[i])) {\n                res.push(source[i]);\n            }\n        }\n    } else if (typeof(filterCondition) === 'string') {\n        for (var j = iBegin; j < source.length; j++) {\n            var item = source[j];\n            if (eval(filterCondition)) {\n                res.push(source[j]);\n            }\n        }\n    }\n    return res;\n}\n\noption = {\n    legend: [{\n        selectedMode: 'multipe',\n        data: (function() {\n            var res = [].concat(datasetSource[0]);\n            res.shift();\n            return res;\n        })(),\n    }, {\n        y:20,\n        data: ['Matcha Latte/Milk Tea', 'Cheese Cocoa/Walnut Brownie']\n    }],\n    tooltip: {},\n    dataset: {\n        source: datasetSource\n    },\n    xAxis: {\n        type: 'category'\n    },\n    yAxis: {},\n    // Declare several bar series, each will be mapped\n    // to a column of dataset.source by default.\n    series: (function() {\n        var res = [];\n        for (var i = 1; i < datasetSource[0].length; i++) {\n            res.push({\n                type: 'bar'\n            });\n        }\n        res = res.concat([{\n                type: 'line',\n                name: 'Matcha Latte/Milk Tea',\n                data: []\n            },\n            {\n                type: 'line',\n                name: 'Cheese Cocoa/Walnut Brownie',\n                data: []\n            }\n        ]);\n        return res;\n    })()\n};\n\nmyChart.on('legendselectchanged', function(params) {\n    var datasetSourceNew;\n    //alert(JSON.stringify(params.selected));\n    if (params.selected['Cheese Cocoa/Walnut Brownie'] === true && params.selected['Matcha Latte/Milk Tea'] === true) {\n        datsetSourceNew = [].concat(datasetSource);\n    } else if (params.selected['Matcha Latte/Milk Tea'] === false && params.selected['Cheese Cocoa/Walnut Brownie'] === false) {\n        datsetSourceNew = [].concat([datasetSource[0]]);\n    } else if (params.selected['Matcha Latte/Milk Tea'] === true && params.selected['Cheese Cocoa/Walnut Brownie'] === false) {\n        datsetSourceNew = arrFilter(datasetSource, true, 'item[0] === \"Matcha Latte\" || item[0] === \"Milk Tea\"');\n    } else if (params.selected['Cheese Cocoa/Walnut Brownie'] === true && params.selected['Matcha Latte/Milk Tea'] === false) {\n        datsetSourceNew = arrFilter(datasetSource, true, 'item[0] === \"Cheese Cocoa\" || item[0] === \"Walnut Brownie\"');\n    }\n    myChart.setOption({\n        dataset: {\n            source: datsetSourceNew\n        }\n    });\n});"}