{"code":"// 目标节点（流向节点）\nvar keyNode = [\n    {\n        name: '华东供电公司',\n        gps: [114.854911, 33.901464],\n    },\n    {\n        name: '华南电公司',\n        gps: [115.854911, 26.901464],\n    },\n];\n// 原始节点\nvar dataMap = [\n    {\n        name: '上海',\n        value: 95,\n        gps: [121.4648, 31.2891],\n    },\n    {\n        name: '韶关',\n        value: 75,\n        gps: [113.7964, 24.7028],\n    },\n];\n\n// 原始节点\nvar dataMapDatas = keyNode.map(({ name: dName }, i) => ({\n    name: dName,\n    type: 'scatter',\n    coordinateSystem: 'geo',\n    zlevel: 2,\n    rippleEffect: {\n        brushType: 'stroke',\n    },\n    label: {\n        normal: {\n            show: true,\n            position: 'right',\n            formatter: '{b}',\n        },\n    },\n    itemStyle: {\n        normal: {},\n    },\n    data: dataMap.map(({ name, gps, value }, i) => ({\n        name,\n        value: [...gps, value],\n    })),\n}));\n// 目标节点\nvar dataKeyNode = keyNode.map(({ name, gps: value }, i) => ({ name, value, visualMap: false }));\n\n// 流向线条\nvar dataMapLines = keyNode.map(({ name: dName, gps: dGps }, i) => ({\n    name: dName,\n    type: 'lines',\n    zlevel: 3,\n    symbol: ['none', 'circle'],\n    effect: {\n        show: true,\n        period: 3,\n        trailLength: 0.01,\n        symbolSize: 4,\n    },\n    lineStyle: {\n        normal: {\n            opacity: 1,\n            curveness: 0.4,\n            color: '#609fd4',\n        },\n    },\n    data: dataMap.map(({ name, gps, value }, i) => ({\n        fromName: name,\n        toName: dName,\n        coords: [gps, dGps],\n        value: value,\n\n        name,\n        value: [...gps, value],\n    })),\n}));\n\noption = {\n    tooltip: {\n        trigger: 'item',\n    },\n    visualMap: {\n        min: 0,\n        max: 100,\n        calculable: true,\n        color: ['#00ff78', '#ff971b', '#acff43', '#ff73b7', '#ffff46', '#27bbfe'],\n        show: false,\n    },\n    geo: {\n        map: 'china',\n        zoom: 0.98,\n        zlevel: 2,\n        label: {\n            emphasis: {\n                show: false,\n            },\n        },\n        roam: false,\n        itemStyle: {\n            normal: {\n                areaColor: '#214278',\n                borderColor: '#195BB9',\n            },\n            emphasis: {\n                color: '#112246',\n            },\n        },\n    },\n    series: [\n        // 原始节点\n        ...dataMapDatas,\n        // 目标节点\n        {\n            type: 'effectScatter',\n            coordinateSystem: 'geo',\n            zlevel: 4,\n            symbolSize: 30,\n            label: {\n                normal: {\n                    show: true,\n                    position: 'right',\n                    formatter: '{b}',\n                    color: 'white',\n                },\n            },\n            itemStyle: {\n                normal: {\n                    color: 'white',\n                },\n            },\n            rippleEffect: {\n                scale: 4,\n                brushType: 'stroke',\n            },\n            data: dataKeyNode,\n        },\n        // 线条流向\n        ...dataMapLines,\n    ],\n};\n"}