{"code":"var data = [{\r\n        \"city\": \"地区一\",\r\n        \"so2\": 12,\r\n        \"o3\": 21,\r\n        \"num\": 33\r\n    },\r\n    {\r\n        \"city\": \"地区二\",\r\n        \"so2\": 10,\r\n        \"o3\": 25,\r\n        \"num\": 35\r\n    },\r\n    {\r\n        \"city\": \"地区三\",\r\n        \"so2\": 20,\r\n        \"o3\": 25,\r\n        \"num\": 45\r\n    },\r\n    {\r\n        \"city\": \"地区四\",\r\n        \"so2\": 30,\r\n        \"o3\": 25,\r\n        \"num\": 55\r\n    }\r\n];\r\nvar aNum = [],\r\n    aSO2 = [],\r\n    aO3 = [],\r\n    aIndicator = [];\r\nvar i, nLen = data.length,\r\n    oItem;\r\nfor (i = 0; i < nLen; i++) {\r\n    oItem = data[i];\r\n    aNum.push(oItem.num);\r\n    aSO2.push(oItem.so2);\r\n    aO3.push(oItem.o3);\r\n    aIndicator.push(oItem.city);\r\n}\r\n// 修改图例角标\r\nfunction replaceWords(str) {\r\n    return str.replace(\"SO2\", \"SO{sub|2}\")\r\n        .replace(\"O3\", \"O{sub|3}\");\r\n}\r\noption = {\r\n    tooltip: {\r\n        trigger: 'axis',\r\n        axisPointer: {\r\n            type: 'shadow'\r\n        },\r\n        formatter: function(params) {\r\n            return data[params[0].dataIndex].city + '<br/>' +\r\n                '<span style=\"display:inline-block;margin-right:5px;border-radius:50%;width:9px;height:9px;background:#FFD237;\"></span>' +\r\n                'SO2:' + data[params[0].dataIndex].so2 + '<br/>' +\r\n                '<span style=\"display:inline-block;margin-right:5px;border-radius:50%;width:9px;height:9px;background:#F39927;\"></span>' +\r\n                'O3:' + data[params[0].dataIndex].o3\r\n        }\r\n    },\r\n    legend: {\r\n        show: true,\r\n        right: 20,\r\n        data: [{\r\n                name: \"SO2\",\r\n                icon: 'rect'\r\n            },\r\n            {\r\n                name: \"O3\",\r\n                icon: 'rect'\r\n            },\r\n        ],\r\n        // 使用自定义方法处理图例\r\n        formatter: function(name) {\r\n            return replaceWords(name);\r\n        },\r\n        textStyle: {\r\n            lineHeight: 12,\r\n            verticalAlign: \"middle\",\r\n            fontSize: 12,\r\n            rich: {\r\n                // 数字下标\r\n                sub: {\r\n                    verticalAlign: \"bottom\",\r\n                    fontSize: 8\r\n                },\r\n            }\r\n        }\r\n    },\r\n    grid: {\r\n        top: '10%',\r\n        left: '10%',\r\n        right: '10%',\r\n        bottom: '10%',\r\n        containLabel: true\r\n    },\r\n    xAxis: {\r\n        type: 'value',\r\n        axisLine: {\r\n            show: true,\r\n            lineStyle: {\r\n                color: '#686868'\r\n            }\r\n        },\r\n        axisLabel: {\r\n            show: true,\r\n            color: '#686868',\r\n            fontSize: 16\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            show: true,\r\n            lineStyle: {\r\n                color: '#D5D5D6'\r\n            }\r\n        }\r\n    },\r\n    yAxis: {\r\n        type: 'category',\r\n        data: aIndicator,\r\n        inverse: true, //反向坐标轴\r\n        axisLine: {\r\n            show: false\r\n        },\r\n        axisLabel: {\r\n            show: true,\r\n            color: '#686868',\r\n            fontSize: 16\r\n        },\r\n        axisTick: {\r\n            show: false\r\n        },\r\n        splitLine: {\r\n            show: false\r\n        }\r\n    },\r\n    series: [{\r\n            name: 'SO2',\r\n            type: 'bar',\r\n            barWidth: 20,\r\n            stack: '因子',\r\n            data: aSO2,\r\n            itemStyle: {\r\n                color: '#FFD237',\r\n                shadowColor: 'rgba(0, 0, 0, 0.16)',\r\n                shadowOffsetX: 0,\r\n                shadowOffsetY: 3,\r\n                shadowBlur: 6\r\n            }\r\n        },\r\n        {\r\n            name: 'O3',\r\n            type: 'bar',\r\n            barWidth: 20,\r\n            stack: '因子',\r\n            data: aO3,\r\n            itemStyle: {\r\n                color: '#F39927',\r\n                shadowColor: 'rgba(0, 0, 0, 0.16)',\r\n                shadowOffsetX: 0,\r\n                shadowOffsetY: 3,\r\n                shadowBlur: 6\r\n            }\r\n        },\r\n        {\r\n            name: '总计',\r\n            type: 'bar',\r\n            barWidth: 20,\r\n            barGap: '-100%', // 移动使两根柱子重叠\r\n            label: {\r\n                show: true,\r\n                offset: [10, 0],\r\n                position: 'right',\r\n                textStyle: {\r\n                    color: '#686868',\r\n                    fontSize: 16\r\n                }\r\n            },\r\n            itemStyle: {\r\n                normal: {\r\n                    color: 'transparent' // 设置背景颜色为透明\r\n                }\r\n            },\r\n            data: aNum\r\n        }\r\n    ]\r\n}"}