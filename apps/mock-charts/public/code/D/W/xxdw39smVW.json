{"code":"var upColor = '#00da3c';\nvar downColor = '#ec0000';\n\n\nfunction splitData(rawData) {\n    var categoryData = [];\n    var values = [];\n    var volumes = [];\n    for (var i = 0; i < rawData.length; i++) {\n        categoryData.push(rawData[i].splice(0, 1)[0]);\n        values.push(rawData[i]);\n        volumes.push([i, rawData[i][4], rawData[i][0] > rawData[i][1] ? 1 : -1]);\n    }\n\n    return {\n        categoryData: categoryData,\n        values: values,\n        volumes: volumes\n    };\n}\n\nfunction calculateMA(dayCount, data) {\n    var result = [];\n    for (var i = 0, len = data.values.length; i < len; i++) {\n        if (i < dayCount) {\n            result.push('-');\n            continue;\n        }\n        var sum = 0;\n        for (var j = 0; j < dayCount; j++) {\n            sum += data.values[i - j][1];\n        }\n        result.push(+(sum / dayCount).toFixed(3));\n    }\n    return result;\n}\n\n$.get('data/asset/data/stock-DJI.json', function (rawData) {\n\n    var data = splitData(rawData);\nconsole.log(data)\n    myChart.setOption(option = {\n        tooltip: {\n            trigger: 'axis',\n            axisPointer: {\n                type: 'cross'\n            },\n            backgroundColor: 'rgba(245, 245, 245, 0.8)',\n            borderWidth: 1,\n            borderColor: '#ccc',\n            padding: 10,\n            textStyle: {\n                color: '#000'\n            },\n            position: function (pos, params, el, elRect, size) {\n                var obj = {top: 10};\n                obj[['left', 'right'][+(pos[0] < size.viewSize[0] / 2)]] = 30;\n                return obj;\n            }\n            // extraCssText: 'width: 170px'\n        },\n        axisPointer: {\n            link: {xAxisIndex: 'all'},\n            label: {\n                backgroundColor: '#777'\n            }\n        },\n        visualMap: {\n            show: false,\n            seriesIndex: 3,\n            dimension: 2,\n            pieces: [{\n                value: 1,\n                color: downColor\n            }, {\n                value: -1,\n                color: upColor\n            }]\n        },\n        grid: [\n            {\n                left: '10%',\n                right: '8%',\n                height: '50%'\n            },\n            {\n                left: '10%',\n                right: '8%',\n                top: '63%',\n                height: '16%'\n            }\n        ],\n        xAxis: [\n            {\n                type: 'category',\n                data: data.categoryData,\n                scale: true,\n                boundaryGap : false,\n                axisLine: {onZero: false},\n                splitLine: {show: false},\n                splitNumber: 20,\n                min: 'dataMin',\n                max: 'dataMax',\n                axisPointer: {\n                    z: 100,\n                    label:{\n                        show:false\n                    }\n                }\n            },\n            {\n                type: 'category',\n                gridIndex: 1,\n                data: data.categoryData,\n                scale: true,\n                boundaryGap : false,\n                axisLine: {onZero: false},\n                axisTick: {show: false},\n                splitLine: {show: false},\n                axisLabel: {show: false},\n                splitNumber: 20,\n                axisPointer: {\n                    z: 100,\n                    label:{\n                        show:false\n                    }\n                }\n            }\n        ],\n        yAxis: [\n            {\n                scale: true,\n                splitArea: {\n                    show: true,\n                },\n                axisTick: {\n                    show: false,\n                },\n                axisLabel: {\n                    inside: true,\n                    formatter: '{value}\\n'\n                },\n            },\n            {\n                scale: true,\n                gridIndex: 1,\n                splitNumber: 2,\n                axisLabel: {show: false},\n                axisLine: {show: false},\n                axisTick: {show: false},\n                splitLine: {show: false},\n                axisPointer: {\n                    label:{\n                        show:false\n                    }\n                }\n            }\n        ],\n        series: [\n            {\n                name: 'Dow-Jones',\n                type: 'candlestick',\n                data: data.values,\n                itemStyle: {\n                    normal: {\n                        color: upColor,\n                        color0: downColor,\n                        borderColor: null,\n                        borderColor0: null\n                    }\n                },\n            },\n            {\n                name: 'MA5',\n                type: 'line',\n                data: calculateMA(5, data),\n                smooth: true,\n                lineStyle: {\n                    normal: {opacity: 0.5}\n                }\n            },\n            {\n                name: 'MA10',\n                type: 'line',\n                data: calculateMA(10, data),\n                smooth: true,\n                lineStyle: {\n                    normal: {opacity: 0.5}\n                }\n            },\n            {\n                name: 'Volume',\n                type: 'bar',\n                xAxisIndex: 1,\n                yAxisIndex: 1,\n                data: data.volumes\n            }\n        ]\n    });\n});"}