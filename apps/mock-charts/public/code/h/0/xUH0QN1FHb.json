{"code":"var yearCount = 4;\r\nvar categoryCount = 6;\r\n\r\nvar xAxisData = [];\r\nvar customData = [];\r\nvar legendData = [];\r\nvar dataList = [];\r\n\r\nlegendData.push('趋势');\r\nvar encodeY = [];\r\nfor (var i = 0; i < yearCount; i++) {\r\n    legendData.push((1 + i) + '季度');\r\n    dataList.push([]);\r\n    encodeY.push(1 + i);\r\n}\r\n\r\nfor (var i = 0; i < categoryCount; i++) {\r\n    var val = Math.random() * 1000;\r\n    xAxisData.push((2015 + i) + '年');\r\n    var customVal = [i];\r\n    customData.push(customVal);\r\n\r\n    for (var j = 0; j < dataList.length; j++) {\r\n        var value = j === 0\r\n            ? echarts.number.round(val, 2)\r\n            : echarts.number.round(Math.max(0, dataList[j - 1][i] + (Math.random() - 0.5) * 200), 2);\r\n        dataList[j].push(value);\r\n        customVal.push(value);\r\n    }\r\n}\r\n\r\nfunction renderItem(params, api) {\r\n    var xValue = api.value(0);\r\n    var currentSeriesIndices = api.currentSeriesIndices();\r\n    var barLayout = api.barLayout({\r\n        barGap: '30%', barCategoryGap: '20%', count: currentSeriesIndices.length - 1\r\n    });\r\n\r\n    var points = [];\r\n    for (var i = 0; i < currentSeriesIndices.length; i++) {\r\n        var seriesIndex = currentSeriesIndices[i];\r\n        if (seriesIndex !== params.seriesIndex) {\r\n            var point = api.coord([xValue, api.value(seriesIndex)]);\r\n            point[0] += barLayout[i - 1].offsetCenter;\r\n            point[1] -= 20;\r\n            points.push(point);\r\n        }\r\n    }\r\n    var style = api.style({\r\n        stroke: api.visual('color'),\r\n        fill: null\r\n    });\r\n\r\n    return {\r\n        type: 'polyline',\r\n        shape: {\r\n            points: points\r\n        },\r\n        style: style\r\n    };\r\n}\r\n\r\noption = {\r\n    tooltip: {\r\n        trigger: 'axis'\r\n    },\r\n    legend: {\r\n        data: legendData\r\n    },\r\n    dataZoom: [{\r\n        type: 'slider',\r\n        start: 50,\r\n        end: 70\r\n    }, {\r\n        type: 'inside',\r\n        start: 50,\r\n        end: 70\r\n    }],\r\n    xAxis: {\r\n        data: xAxisData\r\n    },\r\n    yAxis: {},\r\n    series: [{\r\n        type: 'custom',\r\n        \r\n        renderItem: renderItem,\r\n        itemStyle: {\r\n            borderWidth: 0\r\n        },\r\n        encode: {\r\n            x: 0,\r\n            y: encodeY\r\n        },\r\n        data: customData,\r\n        z: 100\r\n    }].concat(echarts.util.map(dataList, function (data, index) {\r\n        return {\r\n            type: 'bar',\r\n            animation: false,\r\n            name: legendData[index + 1],\r\n            itemStyle: {\r\n                opacity: 0.5\r\n            },\r\n            data: data\r\n        };\r\n    }))\r\n};"}