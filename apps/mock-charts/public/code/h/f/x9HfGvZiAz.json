{"code":"var uploadedDataURL = \"/asset/get/s/data-1564048628229-PTlowb7zO.json\";\r\nlet options = [];\r\nlet data;\r\n\r\nfunction add(arr) {\r\n    return arr.reduce((pre, next, a, b) => pre + next, 0);\r\n}\r\n\r\n$.ajaxSettings.async = false;\r\n\r\n$.getJSON(uploadedDataURL, (res) => {\r\n    data = res.data.walk_pressure_all;\r\n});\r\n\r\nlet {\r\n    left,\r\n    right\r\n} = data;\r\n\r\nbaseOption = {\r\n    'timeline': {\r\n        'axisType': 'category',\r\n        'autoPlay': true,\r\n        'playInterval': 500,\r\n        'data': null\r\n    },\r\n    'title': {\r\n        'text': '模拟数据',\r\n        'subtext': '力矩数据自动播放demo'\r\n    },\r\n    'tooltip': {\r\n\r\n    },\r\n    'calculable': true,\r\n    'grid': {\r\n        'tooltip': {\r\n            'trigger': 'axis',\r\n            'axisPointer': {\r\n                'type': 'shadow',\r\n                'label': {\r\n                    'show': true\r\n                }\r\n            }\r\n        }\r\n    },\r\n    'xAxis': [{\r\n        'type': 'value',\r\n        'name': '(单位：N*M)'\r\n    }],\r\n    'yAxis': [{\r\n        'type': 'category',\r\n        'data': ['力矩1', '力矩2', '力矩3'],\r\n        'splitLine': {\r\n            'show': true\r\n        }\r\n    }],\r\n    'series': [{\r\n            'name': '左',\r\n            'type': 'bar'\r\n        },\r\n        {\r\n            'name': '右',\r\n            'type': 'bar'\r\n        }\r\n    ]\r\n};\r\n\r\n// 创造一个以数组索引的时间轴\r\nlet len = Math.min(left.length, right.length);\r\nbaseOption.timeline.data = [...new Array(len).keys()].map(n => ++n);\r\n\r\nfor (let i = 0; i < len; i++) {\r\n    let _sumLeft = add(left[i]);\r\n    let _sumRight = add(right[i]);\r\n    options.push({\r\n        'series': [{\r\n                'data': [Math.round(_sumLeft * (Math.random()) * 10) / 10, Math.round(_sumLeft * (Math.random()) * 10) / 10, Math.round(_sumLeft * (Math.random()) * 10) / 10]\r\n            },\r\n\r\n            {\r\n                'data': [Math.round(_sumRight * (Math.random()) * 10) / 10, Math.round(_sumRight * (Math.random()) * 10) / 10, Math.round(_sumRight * (Math.random()) * 10) / 10]\r\n            }\r\n        ]\r\n    });\r\n}\r\n\r\noption = Object.assign({}, {\r\n    baseOption\r\n}, {\r\n    options\r\n});"}