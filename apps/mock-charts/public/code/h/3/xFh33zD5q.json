{"code":"let datas = [{\n        'name': '菜菜',\n      \n        'amount': 274600,\n        'orderCount': 1670,\n    },\n    {\n        'name': '佛生',\n    \n        'amount': 147477,\n        'orderCount': 436,\n    },\n    {\n        'name': '我',\n     \n        'amount': 15997,\n        'orderCount': 72,\n    },\n    {\n        'name': 'Jiayin',\n      \n        'amount': 65796,\n        'orderCount': 544,\n    },\n    {\n        'name': '明坤',\n       \n        'amount': 310364,\n        'orderCount': 979,\n    },\n    {\n        'name': '首席',\n       \n        'amount': 8305,\n        'orderCount': 85,\n    },\n    {\n        'name': '小楠子+',\n      \n        'amount': 210284,\n        'orderCount': 2224,\n    },\n    {\n        'name': '康康',\n       \n        'amount': 41789,\n        'orderCount': 237,\n    },\n    {\n        'name': '书记',\n     \n        'amount': 36961,\n        'orderCount': 452,\n    },\n    {\n        'name': '书记夫人',\n      \n        'amount': 68088,\n        'orderCount': 647,\n    },\n    {\n        'name': 'vv',\n      \n        'amount': 72896,\n        'orderCount': 1743,\n    },\n    {\n        'name': 'qq',\n        \n        'amount': 52276,\n        'orderCount': 627,\n    },\n];\n\nlet min = 1;\nlet max = 300000;\nlet packedDatas = packDatas(datas);\n\noption = {\n    backgroundColor: '#efefef',\n    title: {\n        text: '机构成果',\n        left: 'center',\n        top: 0,\n    },\n    tooltip: {\n        padding: 10,\n        backgroundColor: '#222',\n        borderColor: '#777',\n        borderWidth: 1,\n        formatter: function(obj) {\n            var value = obj.value;\n            return '<div style=\"border-bottom: 1px solid rgba(255,255,255,.3); font-size: 18px;padding-bottom: 7px;margin-bottom: 7px\">' +\n                value[2] +\n                '</div>' +\n                '发文量：' + value[0] + '<br>' +\n                '被引量：' + value[1] + '<br>' +\n                '篇均被引：' + value[3].toFixed(2) + '<br>';\n        }\n    },\n    xAxis: {\n        splitLine: {\n            show: false,\n        },\n        scale: true,\n        type: 'value',\n        name: '发文量',\n    },\n    yAxis: {\n        splitLine: {\n            show: false,\n        },\n        scale: true,\n        type: 'value',\n        name: '被引量',\n    },\n\n    visualMap: [{\n        show: false,\n        min: min,\n        max: max,\n        //取数据的哪一列映射到视觉系统\n        dimension: 1,\n        inRange: {\n            color: [\n                '#f4a7a8',\n                '#ee2021',\n            ],\n        }\n    }, ],\n\n    series: [{\n        symbolSize: function(data) {\n            //控制圆的大小，根据最大的圆进行手动调整，是*3还是*5\n            return data[1] / (data[0] * 3);\n        },\n        label: {\n            show: true,\n            position: 'top',\n            formatter: function(param) {\n                return param.data[2];\n            },\n        },\n        itemStyle: {\n            normal: {\n                shadowBlur: 10,\n                shadowColor: 'rgba(25, 100, 150, 0.5)',\n                shadowOffsetY: 5,\n            },\n        },\n        markLine: {\n            itemStyle: {\n                normal: {\n                    lineStyle: {\n                        type: 'solid',\n                        color: '#000'\n                    },\n                    label: {\n                        show: true,\n                        position: 'left'\n                    }\n                }\n            },\n            large: true,\n            effect: {\n                show: true,\n                loop: true,\n                period: 0,\n                scaleSize: 2,\n                color: null,\n                shadowColor: null,\n                shadowBlur: null\n            },\n        },\n        data: packedDatas,\n        type: 'scatter',\n    }, ]\n};\n\nfunction packDatas(datas) {\n\n    let packedDatas = datas.map((data) => {\n        let name = data['name'];\n      \n      \n        let dispathCount = data['orderCount'];\n        let refs = data['amount'];\n        let avt = refs / dispathCount;\n      \n \n\n        return [dispathCount, refs, name, avt ];\n    });\n\n    return packedDatas;\n}"}