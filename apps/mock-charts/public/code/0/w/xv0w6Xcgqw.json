{"code":"var data = {\r\n   title: ['合计', '20-01', '20-02', '20-03', '20-04', '20-05', '20-06', '20-07', '20-08', '20-09'],\r\n   plan_production: [500, 300, 490, 333, 346, 777, 888, 864, 789, 765],\r\n   actual_production: [300, 400, 500, 300, 400, 500, 300, 400, 500, 500],\r\n   attainment_rate: [60, 80, 90, 60, 70, 80, 90, 60, 70, 90],\r\n   productivity: [30, 45, 88, 100, 110, 70, 80, 90, 100, 100]\r\n};\r\n \r\nfor (var pr in data) {\r\n   data[pr] = data[pr].slice(1, -1);\r\n}\r\n \r\nfunction getTableLine(num) {\r\n   var list = [];\r\n   var bottom = 122;\r\n   var height = 20;\r\n   for (var i = 0; i < num; i++) {\r\n       list.push({\r\n           type: 'line',\r\n           bottom: bottom - i * height,\r\n           right: 80,\r\n           style: {\r\n               fill: '#333'\r\n           },\r\n           shape: {\r\n               x1: 0,\r\n               y1: 0,\r\n               x2: 3200,\r\n               y2: 0\r\n           }\r\n \r\n       });\r\n   }\r\n   return list;\r\n}\r\nvar lineList = getTableLine(5);\r\n \r\n \r\noption = {\r\n   title: [{\r\n       text: ' \\n目标数量\\n实际产出\\n达成率\\n生产效率',\r\n       bottom: 72,\r\n       left: 10,\r\n       textStyle: {\r\n           lineHeight: 20,\r\n           fontSize: 13,\r\n           fontWeight: 'normal',\r\n           formatter: function(value) {\r\n               return '{table|' + value + '}';\r\n           },\r\n           rich: {\r\n               table: {\r\n                   align: 'center'\r\n               }\r\n           }\r\n       }\r\n   }],\r\n   tooltip: {\r\n       trigger: 'axis',\r\n       axisPointer: {\r\n           type: 'cross',\r\n           label: {\r\n               backgroundColor: '#283b56'\r\n           }\r\n       }\r\n   },\r\n   legend: {\r\n       data: ['目标数量', '实际产出', '达成率', '生产效率']\r\n   },\r\n   grid: {\r\n       bottom: 150,\r\n       left: 80,\r\n       right: 80\r\n   },\r\n   /*toolbox: {\r\n       show: true,\r\n       feature: {\r\n           saveAsImage: {}\r\n       }\r\n   },*/\r\n  dataZoom: {\r\n       show: true,\r\n       start: 0,\r\n       end: 50,\r\n       maxSpan: 80\r\n       // zoomLock: true\r\n   },\r\n   xAxis: [{\r\n       type: 'category',\r\n       boundaryGap: true,\r\n       data: data.title,\r\n       axisTick: {\r\n           length: 108\r\n       },\r\n       axisLabel: {\r\n           formatter: function(value, index) {\r\n               var indexNum = 0;\r\n              for(var i = 0; i < data.title.length; i++){\r\n                  if(value == data.title[i]){\r\n                      indexNum = i;\r\n                  }\r\n              }\r\n              return '{table|' + value +\r\n                  '}\\n{table|' + data.plan_production[indexNum] +\r\n                  '}\\n{table|' + data.actual_production[indexNum] +\r\n                  '}\\n{table|' + data.attainment_rate[indexNum] +\r\n                  '%}\\n{table|' + data.productivity[indexNum] + '%}';\r\n           },\r\n           rich: {\r\n               table: {\r\n                   lineHeight: 20,\r\n                   align: 'center'\r\n               }\r\n           }\r\n       }\r\n   }],\r\n   yAxis: [{\r\n       type: 'value',\r\n       scale: true,\r\n       minInterval: 1,\r\n       name: '数量',\r\n       splitLine: {\r\n           show: false\r\n       },\r\n       min: function(v) {\r\n           return Math.max((v.min - 10), 0);\r\n       }\r\n   }, {\r\n       type: 'value',\r\n       scale: true,\r\n       name: '百分比',\r\n       splitLine: {\r\n           show: false\r\n       },\r\n       axisLabel: {\r\n           formatter: '{value} %'\r\n       }\r\n   }],\r\n   series: [{\r\n       name: '目标数量',\r\n       type: 'bar',\r\n       label: {\r\n           show: true,\r\n           position: 'top'\r\n       },\r\n       yAxisIndex: 0,\r\n       data: data.plan_production\r\n   }, {\r\n       name: '实际产出',\r\n       type: 'bar',\r\n       label: {\r\n           show: true,\r\n           position: 'top'\r\n       },\r\n       yAxisIndex: 0,\r\n       data: data.actual_production\r\n   }, {\r\n       name: '达成率',\r\n       type: 'line',\r\n       label: {\r\n           show: true,\r\n           position: 'top',\r\n           formatter: '{c} %'\r\n       },\r\n       yAxisIndex: 1,\r\n       data: data.attainment_rate\r\n   }, {\r\n       name: '生产效率',\r\n       type: 'line',\r\n       label: {\r\n           show: true,\r\n           position: 'top',\r\n           formatter: '{c} %'\r\n       },\r\n       yAxisIndex: 1,\r\n       data: data.productivity\r\n   }],\r\n   graphic: lineList\r\n};"}