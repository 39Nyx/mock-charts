{"code":"var oneData = ['材料A1', '材料A2', '材料B1', '材料B2', '材料C1', '材料C2'];\nvar secendData = ['部件A', '部件B', '部件C'];\nvar lastData = ['成品1', '成品2'];\nvar sourceData = [\n  '材料A1',\n  '材料A2',\n  '材料B1',\n  '材料B2',\n  '材料C1',\n  '材料C2',\n  '材料A1',\n  '部件A',\n  '部件A',\n  '部件B',\n  '部件B',\n  '部件C',\n  '材料C2',\n];\nvar targetData = [\n  '部件A',\n  '部件A',\n  '部件B',\n  '部件B',\n  '部件C',\n  null,\n  '部件B',\n  '成品1',\n  '成品2',\n  '成品1',\n  '成品2',\n  '成品2',\n  '成品2',\n];\nvar description = [\n  '加工A1',\n  '加工A2',\n  '加工B1',\n  '加工B2',\n  '加工C1',\n  '加工C2',\n  '合成A1',\n  '组装',\n  '组装',\n  '组装',\n  '组装',\n  '组装',\n  '镶嵌',\n];\nvar legendData = ['材料', '部件', '产品'];\nvar links = [];\nvar data1 = [],\n  data2 = [],\n  data3 = [];\nvar layout = 'none';\n//第一层数据循环\nfor (var i = 0; i < oneData.length; i++) {\n  data1.push({\n    name: oneData[i],\n    symbolSize: [30, 20],\n    x: 0,\n    y: i * (100 / oneData.length),\n    //value: [0, i * (100 / oneData.length)],\n    category: 0,\n    linkTargetName: '部件A',\n  });\n}\n//第二层数据循环\nfor (var i = 0; i < secendData.length; i++) {\n  data2.push({\n    name: secendData[i],\n    symbolSize: [30, 20],\n    x: 30,\n    y: i * (100 / secendData.length),\n    //value: [30, i * (100 / secendData.length)],\n    category: 1,\n  });\n}\n//第二层数据循环\nfor (var i = 0; i < lastData.length; i++) {\n  data3.push({\n    name: lastData[i],\n    symbolSize: [30, 20],\n    x: 60,\n    y: i * (100 / lastData.length),\n    value: [60, i * (100 / lastData.length)],\n    category: 2,\n  });\n}\n//.....多层数据绑定出现时，采用双重循环绑定数据\n\n//连接线数据建立\nfor (var i = 0; i < sourceData.length; i++) {\n  links.push({\n    source: sourceData[i],\n    label: {\n      show: true,\n      formatter: '{c}',\n    },\n    value: description[i] === null ? '' : description[i],\n    target: targetData[i] === null ? '' : targetData[i],\n  });\n}\n\nvar datalist = data1.concat(data2, data3);\noption = {\n  title: {\n    text: '层级结构图',\n    subtext: 'Default layout',\n    top: 'bottom',\n    left: 'right',\n  },\n  tooltip: {},\n  legend: [\n    {\n      data: legendData,\n    },\n  ],\n  animationDuration: 1500,\n  animationEasingUpdate: 'quinticInOut',\n  series: [\n    {\n      name: '层级结构图',\n      type: 'graph',\n      layout: layout, //布局方式：force引力布局\n      draggable: true, //可拖动\n      focusNodeAdjacency: true,\n      roam: true,\n      edgeSymbol: ['circle', 'arrow'],\n      edgeSymbolSize: [0, 30],\n      scaleLimit: {\n            //所属组件的z分层，z值小的图形会被z值大的图形覆盖\n            min: 0.5, //最小的缩放值\n            max: 9 //最大的缩放值\n        },\n      label: {\n        normal: {\n          position: 'bottom',\n          show: true,\n          textStyle: {\n            fontSize: 12,\n          },\n        },\n      },\n      lineStyle: {\n        color: 'source',\n        curveness: 0.3,\n      },\n      data: datalist,\n      links: links,\n      categories: [\n        {\n          name: '材料',\n        },\n        {\n          name: '部件',\n        },\n        {\n          name: '产品',\n        },\n      ],\n    },\n  ],\n};\n"}