{"code":"function randomData() {\n    return Math.round(Math.random()*1000);\n}\n\nvar data = [\n    {\n        data: [\n                {name: '北京',value: randomData() },\n                {name: '天津',value: randomData() },\n                {name: '上海',value: randomData() },\n                {name: '重庆',value: randomData() },\n                {name: '河北',value: randomData() },\n                {name: '河南',value: randomData() },\n                {name: '云南',value: randomData() },\n                {name: '辽宁',value: randomData() },\n                {name: '黑龙江',value: randomData() },\n                {name: '湖南',value: randomData() },\n                {name: '安徽',value: randomData() },\n                {name: '山东',value: randomData() },\n                {name: '新疆',value: randomData() },\n                {name: '江苏',value: randomData() },\n                {name: '浙江',value: randomData() },\n                {name: '江西',value: randomData() },\n                {name: '湖北',value: randomData() },\n                {name: '广西',value: randomData() },\n                {name: '甘肃',value: randomData() },\n                {name: '山西',value: randomData() },\n                {name: '内蒙古',value: randomData() },\n                {name: '陕西',value: randomData() },\n                {name: '吉林',value: randomData() },\n                {name: '福建',value: randomData() },\n                {name: '贵州',value: randomData() },\n                {name: '广东',value: randomData() },\n                {name: '青海',value: randomData() },\n                {name: '西藏',value: randomData() },\n                {name: '四川',value: randomData() },\n                {name: '宁夏',value: randomData() },\n                {name: '海南',value: randomData() },\n                {name: '台湾',value: randomData() },\n                {name: '香港',value: randomData() },\n                {name: '澳门',value: randomData() }\n            ],\n        title: '华为手机'\n    },   \n    {\n        data: [\n                {name: '北京',value: randomData() },\n                {name: '天津',value: randomData() },\n                {name: '上海',value: randomData() },\n                {name: '重庆',value: randomData() },\n                {name: '河北',value: randomData() },\n                {name: '河南',value: randomData() },\n                {name: '云南',value: randomData() },\n                {name: '辽宁',value: randomData() },\n                {name: '黑龙江',value: randomData() },\n                {name: '湖南',value: randomData() },\n                {name: '安徽',value: randomData() },\n                {name: '山东',value: randomData() },\n                {name: '新疆',value: randomData() },\n                {name: '江苏',value: randomData() },\n                {name: '浙江',value: randomData() },\n                {name: '江西',value: randomData() },\n                {name: '湖北',value: randomData() },\n                {name: '广西',value: randomData() },\n                {name: '甘肃',value: randomData() },\n                {name: '山西',value: randomData() },\n                {name: '内蒙古',value: randomData() },\n                {name: '陕西',value: randomData() },\n                {name: '吉林',value: randomData() },\n                {name: '福建',value: randomData() },\n                {name: '贵州',value: randomData() },\n                {name: '广东',value: randomData() },\n                {name: '青海',value: randomData() },\n                {name: '西藏',value: randomData() },\n                {name: '四川',value: randomData() },\n                {name: '宁夏',value: randomData() },\n                {name: '海南',value: randomData() },\n                {name: '台湾',value: randomData() },\n                {name: '香港',value: randomData() },\n                {name: '澳门',value: randomData() }\n            ],\n        title: '小米手机'\n    },\n    {\n        data: [\n                {name: '北京',value: randomData() },\n                {name: '天津',value: randomData() },\n                {name: '上海',value: randomData() },\n                {name: '重庆',value: randomData() },\n                {name: '河北',value: randomData() },\n                {name: '河南',value: randomData() },\n                {name: '云南',value: randomData() },\n                {name: '辽宁',value: randomData() },\n                {name: '黑龙江',value: randomData() },\n                {name: '湖南',value: randomData() },\n                {name: '安徽',value: randomData() },\n                {name: '山东',value: randomData() },\n                {name: '新疆',value: randomData() },\n                {name: '江苏',value: randomData() },\n                {name: '浙江',value: randomData() },\n                {name: '江西',value: randomData() },\n                {name: '湖北',value: randomData() },\n                {name: '广西',value: randomData() },\n                {name: '甘肃',value: randomData() },\n                {name: '山西',value: randomData() },\n                {name: '内蒙古',value: randomData() },\n                {name: '陕西',value: randomData() },\n                {name: '吉林',value: randomData() },\n                {name: '福建',value: randomData() },\n                {name: '贵州',value: randomData() },\n                {name: '广东',value: randomData() },\n                {name: '青海',value: randomData() },\n                {name: '西藏',value: randomData() },\n                {name: '四川',value: randomData() },\n                {name: '宁夏',value: randomData() },\n                {name: '海南',value: randomData() },\n                {name: '台湾',value: randomData() },\n                {name: '香港',value: randomData() },\n                {name: '澳门',value: randomData() }\n            ],\n        title: '苹果手机'\n    }    \n];\nvar nameArr = ['华为', '小米', '苹果'];\nvar option = getOption(data[0], nameArr);\n//响应legend点击事件\nmyChart.on('legendselectchanged', function(param) {\n   let name = param.name;\n   let selected = {};\n   let selIdx = 0;\n   for(var i = 0; i < nameArr.length; i++) {\n       if(name == nameArr[i]) {\n           selected[nameArr[i]] = true;\n           selIdx = i;\n       } else {\n           selected[nameArr[i]] = false;\n       }\n   }\n   option = getOption(data[selIdx], nameArr);\n   option.legend.selected = selected;\n   myChart.setOption(option, true);\n});\n\n// 定时触发点击legend事件\nlet idx = 0;\nlet timer = setInterval(function() {\n    myChart.dispatchAction(\n        { type: 'legendToggleSelect', \n          name: nameArr[++idx % nameArr.length] }\n    )\n}, 2000);\n\n// 鼠标移动到地图部分停止自动切换\n$('#chart-panel').on(\"mouseover\", function() {\n   clearInterval(timer);\n});\n\n\nfunction getOption(itemData, nameArr) {\n    //alert(JSON.stringify(itemData));\n    option = {\n        title: {\n            text: itemData.title + '销量',\n            subtext: '纯属虚构',\n            left: 'left'\n        },\n        tooltip: {\n            trigger: 'item'\n        },\n        color: ['#ff0000', '#ff0000', '#ff0000'],\n        legend: {\n           // orient: 'vertical',\n            left: 'center',\n            selectedMode: 'single',\n            selected: {},\n            data: nameArr\n        },\n        visualMap: {\n            min: 0,\n            max: 2500,\n            left: 'left',\n            top: 'bottom',\n            text: ['高','低'],           // 文本，默认为数值文本\n            calculable: true\n        },\n        toolbox: {\n            show: true,\n            orient: 'vertical',\n            left: 'right',\n            top: 'center',\n            feature: {\n                dataView: {readOnly: false},\n                restore: {},\n                saveAsImage: {}\n            }\n        },\n        series: [\n            {\n                name: '销量',\n                type: 'map',\n                mapType: 'china',\n                showLegendSymbol: false,\n                roam: false,\n                label: {\n                    normal: {\n                        show: true\n                    },\n                    emphasis: {\n                        show: true\n                    }\n                },\n                data: itemData.data\n            },\n            {\n                name: nameArr[0],\n                type: 'map',\n                mapType: 'china',\n                label: {\n                    normal: {\n                        show: true\n                    },\n                    emphasis: {\n                        show: true\n                    }\n                }\n            },\n            {\n                name: nameArr[1],\n                type: 'map',\n                mapType: 'china',\n                label: {\n                    normal: {\n                        show: true\n                    },\n                    emphasis: {\n                        show: true\n                    }\n                }\n            },\n            {\n                name: nameArr[2],\n                type: 'map',\n                mapType: 'china',\n                label: {\n                    normal: {\n                        show: true\n                    },\n                    emphasis: {\n                        show: true\n                    }\n                }\n            }        \n        ]\n    };\n    return option;\n}"}