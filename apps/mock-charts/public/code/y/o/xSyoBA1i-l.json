{"code":"var uploadedDataURL = \"/asset/get/s/data-1479372708751-SJpo1lsbl.txt\";\n\nfunction convertData(sourceData) {\n    return [].concat.apply([], $.map(sourceData, function(stop, index) {\n        return {\n            name: stop.stopName,\n            value: [stop.jingdu, stop.weidu, Math.random() * 100, Math.random() * 100]\n        };\n    }));\n}\n\nvar option = {\n    bmap: {\n        roam: true,\n        mapStyle: {\n            'styleJson': [{\n                'featureType': 'water',\n                'elementType': 'all',\n                'stylers': {\n                    'color': '#031628'\n                }\n            }, {\n                'featureType': 'land',\n                'elementType': 'geometry',\n                'stylers': {\n                    'color': '#000102'\n                }\n            }, {\n                'featureType': 'highway',\n                'elementType': 'all',\n                'stylers': {\n                    'visibility': 'off'\n                }\n            }, {\n                'featureType': 'arterial',\n                'elementType': 'geometry.fill',\n                'stylers': {\n                    'color': '#000000'\n                }\n            }, {\n                'featureType': 'arterial',\n                'elementType': 'geometry.stroke',\n                'stylers': {\n                    'color': '#0b3d51'\n                }\n            }, {\n                'featureType': 'local',\n                'elementType': 'geometry',\n                'stylers': {\n                    'color': '#000000'\n                }\n            }, {\n                'featureType': 'railway',\n                'elementType': 'geometry.fill',\n                'stylers': {\n                    'color': '#000000'\n                }\n            }, {\n                'featureType': 'railway',\n                'elementType': 'geometry.stroke',\n                'stylers': {\n                    'color': '#08304b'\n                }\n            }, {\n                'featureType': 'subway',\n                'elementType': 'geometry',\n                'stylers': {\n                    'lightness': -70\n                }\n            }, {\n                'featureType': 'building',\n                'elementType': 'geometry.fill',\n                'stylers': {\n                    'color': '#000000'\n                }\n            }, {\n                'featureType': 'all',\n                'elementType': 'labels.text.fill',\n                'stylers': {\n                    'color': '#857f7f'\n                }\n            }, {\n                'featureType': 'all',\n                'elementType': 'labels.text.stroke',\n                'stylers': {\n                    'color': '#000000'\n                }\n            }, {\n                'featureType': 'building',\n                'elementType': 'geometry',\n                'stylers': {\n                    'color': '#022338'\n                }\n            }, {\n                'featureType': 'green',\n                'elementType': 'geometry',\n                'stylers': {\n                    'color': '#062032'\n                }\n            }, {\n                'featureType': 'boundary',\n                'elementType': 'all',\n                'stylers': {\n                    'color': '#465b6c'\n                }\n            }, {\n                'featureType': 'manmade',\n                'elementType': 'all',\n                'stylers': {\n                    'color': '#022338'\n                }\n            }, {\n                'featureType': 'label',\n                'elementType': 'all',\n                'stylers': {\n                    'visibility': 'off'\n                }\n            }]\n        }\n    },\n    tooltip: {\n        trigger: 'item'\n    },\n    legend: {\n        selectedMode: 'single',\n        orient: 'vertical',\n        y: 'bottom',\n        x: 'right',\n        data: ['热门出行站点', '热门换乘站点'],\n        textStyle: {\n            color: '#fff'\n        }\n    },\n    /*visualMap: [{\n        left: 'right',\n        top: '10%',\n        dimension: 2,\n        min: 0,\n        max: 100,\n        itemWidth: 30,\n        itemHeight: 120,\n        calculable: true,\n        precision: 0.1,\n        inRange: {\n            symbolSize: [3, 10]\n        },\n        outOfRange: {\n            symbolSize: [3, 10],\n            color: ['rgba(255,255,255,.2)']\n        }\n    }],*/\n    series: [{\n        name: '热门出行站点',\n        type: 'scatter',\n        coordinateSystem: 'bmap',\n        symbolSize: function(val) {\n            return val[2] / 10;\n        },\n        label: {\n            normal: {\n                formatter: '{b}',\n                position: 'right',\n                show: false\n            },\n            emphasis: {\n                show: true\n            }\n        },\n        itemStyle: {\n            normal: {\n                color: '#a6c84c'\n            }\n        }\n    }, {\n        name: '热门出行站点',\n        type: 'effectScatter',\n        coordinateSystem: 'bmap',\n        symbolSize: function(val) {\n            return val[2] / 5;\n        },\n        showEffectOn: 'render',\n        rippleEffect: {\n            brushType: 'stroke'\n        },\n        hoverAnimation: true,\n        label: {\n            normal: {\n                formatter: '{b}',\n                position: 'right',\n                show: true\n            }\n        },\n        itemStyle: {\n            normal: {\n                color: '#9FC33D',\n                shadowBlur: 10,\n                shadowColor: '#333'\n            }\n        },\n        zlevel: 1\n    }, {\n        name: '热门换乘站点',\n        type: 'scatter',\n        coordinateSystem: 'bmap',\n        symbolSize: function(val) {\n            return val[3] / 10;\n        },\n        label: {\n            normal: {\n                formatter: '{b}',\n                position: 'right',\n                show: false\n            },\n            emphasis: {\n                show: true\n            }\n        },\n        itemStyle: {\n            normal: {\n                color: '#ffa022'\n            }\n        }\n    }, {\n        name: '热门换乘站点',\n        type: 'effectScatter',\n        coordinateSystem: 'bmap',\n        symbolSize: function(val) {\n            return val[3] / 5;\n        },\n        showEffectOn: 'render',\n        rippleEffect: {\n            brushType: 'stroke'\n        },\n        hoverAnimation: true,\n        label: {\n            normal: {\n                formatter: '{b}',\n                position: 'right',\n                show: true\n            }\n        },\n        itemStyle: {\n            normal: {\n                color: '#FF960D',\n                shadowBlur: 10,\n                shadowColor: '#333'\n            }\n        },\n        zlevel: 1\n    }]\n};\n\n$.getJSON(uploadedDataURL, function(rawData) {\n    var data = convertData(rawData);\n    option.series[0].data = data;\n    option.series[1].data = data.sort(function(a, b) {\n        return b.value[2] - a.value[2];\n    }).slice(0, 10);\n    option.series[2].data = data;\n    option.series[3].data = data.sort(function(a, b) {\n        return b.value[3] - a.value[3];\n    }).slice(0, 10);\n    myChart.setOption(option);\n    // console.log(option);\n    //获取echart中使用的bmap实例\n    var map = myChart.getModel().getComponent('bmap').getBMap();\n    map.disableDoubleClickZoom();\n    map.centerAndZoom(\"佛山\", 13);\n\n});"}