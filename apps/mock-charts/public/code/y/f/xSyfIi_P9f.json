{"code":"var sourceData = [{\n    name: '马山县',\n    sales: 1454,\n    services: 1564\n}, {\n    name: '上林县',\n    sales: 1911,\n    services:  1910\n}, {\n    name: '隆安县',\n    sales: 1486,\n    services:  1496\n}, {\n    name: '宾阳县',\n    sales: 1655  ,\n    services:1651\n}, {\n    name: '横县',\n    sales: 1841,\n    services: 1851\n}, {\n    name: '武鸣区',\n    sales: 1700,\n    services: 1714\n}, {\n    name: '兴宁区',\n    sales: 1752,\n    services: 1742\n}, {\n    name: '青秀区',\n    sales: 1961,\n    services: 1965\n}, {\n    name: '西乡塘区 ',\n    sales: 1580,\n    services: 1601\n}, {\n    name: '江南区',\n    sales: 1544,\n    services: 1541\n}, {\n    name: '良庆区',\n    sales: 1622,\n    services: 1652\n}, {\n    name: '邕宁区',\n    sales:1400,\n    services: 1422\n}]\n\nvar seriesData = sourceData.map(function(item, index, array) {\n    return {\n        name: item['name'],\n        value: [item['sales'], item['services']]\n    }\n})\n\nvar computeServicesAvgLine = function() {\n    let sum = 0\n    sourceData.forEach(function(item) {\n        sum += item['services']\n    })\n    return sum / sourceData.length\n}\n\nvar computeSalesAvgLine = function() {\n    let sum = 0\n    sourceData.forEach(function(item) {\n        sum += item['sales']\n    })\n    return sum / sourceData.length\n}\nvar avg = {\n    servicesAvgLine: computeServicesAvgLine(),\n    salesAvgLine: computeSalesAvgLine()\n}\n\noption = {\n    title: {\n        text: '申请事项受理与办结分析'\n    },\n    backgroundColor:'#fff',\n    grid:{\n        bottom:'40%',\n        left:'6%',\n        right:'50%'\n    },\n    tooltip: {\n        trigger: 'item',\n        axisPointer: {\n            show: true,\n            type: 'cross',\n            lineStyle: {\n                type: 'dashed',\n                width: 1\n            },\n        },\n        formatter: function(obj) {\n            if (obj.componentType == \"series\") {\n                return '<div style=\"border-bottom: 1px solid rgba(255,255,255,.3); font-size: 18px;padding-bottom: 7px;margin-bottom: 7px\">' +\n                    obj.name +\n                    '</div>' +\n                    '<span>' +\n                    '受理数' +\n                    '</span>' +\n                    ' : ' + obj.data.value[1] + '' +\n                    '<br/>' +\n                    '<span>' +\n                    '办结数' +\n                    '</span>' +\n                    ' : ' + obj.data.value[0] + ''\n            }\n        }\n    },\n    label: {\n        normal: {\n            show: true,\n            position: 'bottom',\n            formatter: function(params) {\n                return params.name\n            }\n        },\n        emphasis: {\n            show: true,\n            position: 'bottom',\n        }\n    },\n    yAxis: {\n        name: '受理数',\n        min:1300,\n        type: 'value',\n        scale: true,\n        axisLabel: {\n            formatter: '{value} '\n        },\n        splitLine: {\n            show: false\n        },\n        axisLine: {\n            lineStyle: {\n                color: '#000'\n            }\n        }\n    },\n    xAxis: {\n        name: '办结数',\n        type: 'value',\n        scale: true,\n        min:1300,\n        axisLabel: {\n            formatter: '{value} '\n        },\n        splitLine: {\n            show: false\n        },\n        axisLine: {\n            lineStyle: {\n                color: '#000'\n            }\n        }\n    },\n   \n    series: [{\n        type: 'scatter',\n        data: seriesData,\n        symbolSize: 10,\n        color:'#2ca3fd',\n        label: {\n            normal: {\n                show: true,\n                formatter: function (sourceData) {\n                    return sourceData.name;\n                },\n                position: 'top'\n            }\n        },\n        markLine: {\n            label: {\n                normal: {\n                    \n                }\n            },\n            lineStyle: {\n                normal: {\n                    color: \"#CD3333\",\n                    type: 'solid',\n                    width: 1,\n                },\n                emphasis: {\n                    color: \"#d9def7\"\n                }\n            },\n            data: [{\n                xAxis: avg.salesAvgLine,\n                name: '受理数平均线',\n                itemStyle: {\n                    normal: {\n                        color: \"#b84a58\",\n                    }\n                }\n            }, {\n                yAxis: avg.servicesAvgLine,\n                name: '办结数平均线',\n                itemStyle: {\n                    normal: {\n                        color: \"#b84a58\",\n                    }\n                }\n            }]\n        }\n    }]\n};"}