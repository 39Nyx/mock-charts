{"code":"var data = {\r\n    score: 516.5,\r\n    baseInfo: \"河南/文科\",\r\n    school: [1, 14, 15]\r\n};\r\nvar schoolData = data.school;\r\n\r\n// 数值动画 CountUp\r\nvar countUpOptions = {\r\n    useEasing: true,\r\n    useGrouping: true,\r\n    separator: ',',\r\n    decimal: '.'\r\n};\r\n// new CountUp(\"J_score\", 0, data.score, 0, 2.5, countUpOptions).start(function(a, s, f) {\r\n//     $(\"#J_score\").html(data.score);\r\n// });\r\n// new CountUp(\"J_level0\", 0, schoolData[0], 0, 2.5, countUpOptions).start();\r\n// new CountUp(\"J_level1\", 0, schoolData[1], 0, 2.5, countUpOptions).start();\r\n// new CountUp(\"J_level2\", 0, schoolData[2], 0, 2.5, countUpOptions).start();\r\n\r\n$(\".J_chartClass\").html(data.baseInfo);\r\n\r\n// 累加器\r\nfunction getSum(arr) {\r\n    var sum = 0;\r\n    arr.forEach(function(item, index) {\r\n        sum += parseFloat(item);\r\n    });\r\n    return sum;\r\n}\r\n\r\n//计算图表数据\r\nfunction getPieSchoolArr(arr) {\r\n    var array = [];\r\n    var sumNum = getSum(schoolData);\r\n    arr.forEach(function(item, index) {\r\n        array.push(parseFloat(item) / sumNum * 75);\r\n    });\r\n    return array;\r\n}\r\n\r\nvar pieSchoolArr = getPieSchoolArr(schoolData);\r\nvar startAngle = 315; //起始角度\r\nvar option = {\r\n    series: [{\r\n        \"name\": 'noha111',\r\n        \"type\": 'pie',\r\n        \"radius\": ['69%', '85%'],\r\n        \"avoidLabelOverlap\": false,\r\n        \"startAngle\": startAngle,\r\n        \"color\": [\"#9f8fc1\"],\r\n        \"hoverAnimation\": false,\r\n        \"legendHoverLink\": false,\r\n        \"label\": {\r\n            \"normal\": {\r\n                \"show\": false,\r\n                \"position\": 'center'\r\n            },\r\n            \"emphasis\": {\r\n                \"show\": false\r\n            }\r\n        },\r\n        \"labelLine\": {\r\n            \"normal\": {\r\n                \"show\": false\r\n            }\r\n        },\r\n        \"data\": [{\r\n            \"value\": 25,\r\n            itemStyle: {\r\n                normal: {\r\n                    color: \"transparent\"\r\n                }\r\n            }\r\n\r\n        }, {\r\n            \"value\": pieSchoolArr[0],\r\n            itemStyle: {\r\n                normal: {\r\n                    color: \"#fc8249\"\r\n                }\r\n            }\r\n        }, {\r\n            \"value\": pieSchoolArr[1],\r\n            itemStyle: {\r\n                normal: {\r\n                    color: \"#a4e83f\"\r\n                }\r\n            }\r\n        }, {\r\n            \"value\": pieSchoolArr[2],\r\n            \"name\": '4',\r\n            itemStyle: {\r\n                normal: {\r\n                    color: \"#ffff50\"\r\n                }\r\n            }\r\n        }]\r\n    }, {\r\n        \"name\": 'noha',\r\n        \"type\": 'pie',\r\n        \"radius\": ['63%', '65%'],\r\n        \"avoidLabelOverlap\": false,\r\n        \"startAngle\": startAngle,\r\n        \"color\": [\"#9f8fc1\"],\r\n        \"hoverAnimation\": false,\r\n        \"legendHoverLink\": false,\r\n        \"label\": {\r\n            \"normal\": {\r\n                \"show\": false,\r\n                \"position\": 'center'\r\n            },\r\n            \"emphasis\": {\r\n                \"show\": false\r\n            }\r\n        },\r\n        \"labelLine\": {\r\n            \"normal\": {\r\n                \"show\": false\r\n            }\r\n        },\r\n        \"data\": [{\r\n            \"value\": 25,\r\n            \"name\": '1',\r\n            itemStyle: {\r\n                normal: {\r\n                    color: \"transparent\"\r\n                }\r\n            }\r\n        }, {\r\n            \"value\": 75,\r\n            \"name\": '2',\r\n            itemStyle: {\r\n                normal: {\r\n                    color: \"#4ac493\"\r\n                }\r\n            }\r\n        }]\r\n    }]\r\n};\r\n\r\napp.timeTicket = setInterval(function() {\r\n    var ran = Math.random();\r\n    var value1 = parseInt(ran * 75),\r\n        value2 = 75 - value1;\r\n    option.series[0].data[1].value = value1 / 2;\r\n    option.series[0].data[2].value = value1 / 2;\r\n    option.series[0].data[3].value = value2;\r\n    myChart.setOption(option, true);\r\n}, 1000);"}