{"code":"var oldData = [{\n        \"RPT_DATE\": \"2020-05-01\",\n        \"HIERARCHY\": \"异地\",\n        \"POWERON_RATE\": 45.34,\n        \"INTACT_RATE\": 45.34\n    },{\n        \"RPT_DATE\": \"2020-05-01\",\n        \"HIERARCHY\": \"全行\",\n        \"POWERON_RATE\": 56.56,\n        \"INTACT_RATE\": 23.34\n    },{\n        \"RPT_DATE\": \"2020-05-01\",\n        \"HIERARCHY\": \"上海地区\",\n        \"POWERON_RATE\": 98.34,\n        \"INTACT_RATE\": 76.34\n    },{\n        \"RPT_DATE\": \"2020-05-01\",\n        \"HIERARCHY\": \"上海地区离行式\",\n        \"POWERON_RATE\": 78.34,\n        \"INTACT_RATE\": 75.34\n    },{\n        \"RPT_DATE\": \"2020-05-02\",\n        \"HIERARCHY\": \"异地\",\n        \"POWERON_RATE\": 35.34,\n        \"INTACT_RATE\": 98.34\n    },{\n        \"RPT_DATE\": \"2020-05-02\",\n        \"HIERARCHY\": \"全行\",\n        \"POWERON_RATE\": 34.34,\n        \"INTACT_RATE\": 35.34\n    },{\n        \"RPT_DATE\": \"2020-05-02\",\n        \"HIERARCHY\": \"上海地区\",\n        \"POWERON_RATE\": 45.34,\n        \"INTACT_RATE\": 36.34\n    },{\n        \"RPT_DATE\": \"2020-05-02\",\n        \"HIERARCHY\": \"上海地区离行式\",\n        \"POWERON_RATE\": 78.34,\n        \"INTACT_RATE\": 87.34\n    },{\n        \"RPT_DATE\": \"2020-05-03\",\n        \"HIERARCHY\": \"异地\",\n        \"POWERON_RATE\": 56.34,\n        \"INTACT_RATE\": 98.34\n    },{\n        \"RPT_DATE\": \"2020-05-03\",\n        \"HIERARCHY\": \"全行\",\n        \"POWERON_RATE\": 34.34,\n        \"INTACT_RATE\": 23.34\n    },{\n        \"RPT_DATE\": \"2020-05-03\",\n        \"HIERARCHY\": \"上海地区\",\n        \"POWERON_RATE\": 45.34,\n        \"INTACT_RATE\": 67.34\n    },{\n        \"RPT_DATE\": \"2020-05-03\",\n        \"HIERARCHY\": \"上海地区离行式\",\n        \"POWERON_RATE\": 54.34,\n        \"INTACT_RATE\": 34.34\n    },{\n        \"RPT_DATE\": \"2020-05-04\",\n        \"HIERARCHY\": \"异地\",\n        \"POWERON_RATE\": 54.34,\n        \"INTACT_RATE\": 98.34\n    },{\n        \"RPT_DATE\": \"2020-05-04\",\n        \"HIERARCHY\": \"全行\",\n        \"POWERON_RATE\": 33.4,\n        \"INTACT_RATE\": 23.34\n    },{\n        \"RPT_DATE\": \"2020-05-04\",\n        \"HIERARCHY\": \"上海地区\",\n        \"POWERON_RATE\": 45.34,\n        \"INTACT_RATE\": 67.34\n    },{\n        \"RPT_DATE\": \"2020-05-04\",\n        \"HIERARCHY\": \"上海地区离行式\",\n        \"POWERON_RATE\": 78.34,\n        \"INTACT_RATE\": 34.34\n    },{\n        \"RPT_DATE\": \"2020-05-05\",\n        \"HIERARCHY\": \"异地\",\n        \"POWERON_RATE\": 89.34,\n        \"INTACT_RATE\": 33.34\n    },{\n        \"RPT_DATE\": \"2020-05-05\",\n        \"HIERARCHY\": \"全行\",\n        \"POWERON_RATE\": 34.34,\n        \"INTACT_RATE\": 98.34\n    },{\n        \"RPT_DATE\": \"2020-05-05\",\n        \"HIERARCHY\": \"上海地区\",\n        \"POWERON_RATE\": 55.34,\n        \"INTACT_RATE\": 4.34\n    },{\n        \"RPT_DATE\": \"2020-05-05\",\n        \"HIERARCHY\": \"上海地区离行式\",\n        \"POWERON_RATE\": 78.34,\n        \"INTACT_RATE\": 34.34\n    },{\n        \"RPT_DATE\": \"2020-05-06\",\n        \"HIERARCHY\": \"异地\",\n        \"POWERON_RATE\": 89.34,\n        \"INTACT_RATE\": 98.34\n    },{\n        \"RPT_DATE\": \"2020-05-06\",\n        \"HIERARCHY\": \"全行\",\n        \"POWERON_RATE\": 93.34,\n        \"INTACT_RATE\": 23.34\n    },{\n        \"RPT_DATE\": \"2020-05-06\",\n        \"HIERARCHY\": \"上海地区\",\n        \"POWERON_RATE\": 45.34,\n        \"INTACT_RATE\": 67.34\n    },{\n        \"RPT_DATE\": \"2020-05-06\",\n        \"HIERARCHY\": \"上海地区离行式\",\n        \"POWERON_RATE\": 78.34,\n        \"INTACT_RATE\": 99.34\n    },{\n        \"RPT_DATE\": \"2020-05-07\",\n        \"HIERARCHY\": \"异地\",\n        \"POWERON_RATE\": 89.34,\n        \"INTACT_RATE\": 45.34\n    },{\n        \"RPT_DATE\": \"2020-05-07\",\n        \"HIERARCHY\": \"全行\",\n        \"POWERON_RATE\": 98.34,\n        \"INTACT_RATE\": 87.34\n    },{\n        \"RPT_DATE\": \"2020-05-07\",\n        \"HIERARCHY\": \"上海地区\",\n        \"POWERON_RATE\": 45.34,\n        \"INTACT_RATE\": 32.34\n    },{\n        \"RPT_DATE\": \"2020-05-07\",\n        \"HIERARCHY\": \"上海地区离行式\",\n        \"POWERON_RATE\": 45.34,\n        \"INTACT_RATE\": 65.34\n    }\n];\n\n\n\n\n\nlet dateArr = [],\n    hierarchyArr = [],\n    dataset = {};\n\noldData.forEach((item) => {\n    if (dateArr.indexOf(item.RPT_DATE) < 0) {\n        dateArr.push(item.RPT_DATE);\n    }\n    if (hierarchyArr.indexOf(item.HIERARCHY) < 0) {\n        hierarchyArr.push(item.HIERARCHY);\n    }\n});\n\n\n\ndataset = hierarchyArr.map((HIERARCHY) => {\n    return {\n        name: HIERARCHY,\n        type: 'line',\n        stack: '',\n        data: []\n    };\n});\n\n\nfor (var i = 0; i < dataset.length; i++) {\n    for (var j = 0; j < oldData.length; j++) {\n        for (var k = 0; k < dateArr.length; k++) {\n            if (dataset[i].name == oldData[j].HIERARCHY &&\n                dateArr[k] == oldData[j].RPT_DATE) {\n                dataset[i].data[k] = oldData[j].INTACT_RATE;\n            }\n        }\n    }\n}\noption = {\n    title: {\n        text: '机具完好率情况表',\n        subtext: '单位：百分比',\n        left: 'center'\n    },\n    legend: {\n        bottom: 0,\n        data: hierarchyArr\n    },\n    xAxis: {\n        type: 'category',\n        boundaryGap: false,\n        data: dateArr\n    },\n    yAxis: {\n        type: 'value'\n    },\n    series: dataset\n};\n\n\n/*\nlet hierarchyArr = ['邮件营销', '联盟广告', '视频广告', '直接访问', '搜索引擎'];\nlet dateArr = ['周一', '周二', '周三', '周四', '周五', '周六', '周日'];\nlet dataset = [\n        {\n            name: '邮件营销',\n            type: 'line',\n            stack: '总量',\n            data: [120, 132, 101, 134, 90, 230, 210]\n        },\n        {\n            name: '联盟广告',\n            type: 'line',\n            stack: '总量',\n            data: [220, 182, 191, 234, 290, 330, 310]\n        },\n        {\n            name: '视频广告',\n            type: 'line',\n            stack: '总量',\n            data: [150, 232, 201, 154, 190, 330, 410]\n        },\n        {\n            name: '直接访问',\n            type: 'line',\n            stack: '总量',\n            data: [320, 332, 301, 334, 390, 330, 320]\n        },\n        {\n            name: '搜索引擎',\n            type: 'line',\n            stack: '总量',\n            data: [820, 932, 901, 934, 1290, 1330, 1320]\n        }\n    ];\n*/"}