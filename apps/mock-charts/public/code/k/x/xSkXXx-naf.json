{"code":"var uploadedDataURL = \"/asset/get/s/data-1525541560139-HJepqDoaM.json\";\n\nmyChart.showLoading();\n\n$.getJSON(uploadedDataURL, function (data) {\n    myChart.hideLoading();\n\n    var itemStyle = {\n        normal: {\n            opacity: 0.8,\n            shadowBlur: 10,\n            shadowOffsetX: 0,\n            shadowOffsetY: 0,\n            shadowColor: 'rgba(0, 0, 0, 0.5)'\n        }\n    };\n\n    var sizeFunction = function (x) {\n        var y = (x / 100000) + 0.1;\n        return y * 30;\n    };\n    // Schema:\n    var schema = [\n        {name: 'Income', index: 0, text: '居住人口占比入', unit: '%'},\n        {name: 'LifeExpectancy', index: 1, text: '环比增幅', unit: '%'},\n        {name: 'Population', index: 2, text: '居住人口', unit: '人'},\n        {name: 'Country', index: 3, text: '街乡', unit: ''}\n    ];\n\n    option = {\n        baseOption: {\n            timeline: {\n                axisType: 'category',\n                orient: 'vertical',\n                autoPlay: true,\n                inverse: true,\n                playInterval: 1500,\n                left: null,\n                right: 20,\n                top: 20,\n                bottom: 20,\n                width: 55,\n                height: null,\n                label: {\n                    normal: {\n                        textStyle: {\n                            color: '#999'\n                        }\n                    },\n                    emphasis: {\n                        textStyle: {\n                            color: '#fff'\n                        }\n                    }\n                },\n                symbol: 'none',\n                lineStyle: {\n                    color: '#555'\n                },\n                checkpointStyle: {\n                    color: '#bbb',\n                    borderColor: '#777',\n                    borderWidth: 2\n                },\n                controlStyle: {\n                    showNextBtn: false,\n                    showPrevBtn: false,\n                    normal: {\n                        color: '#666',\n                        borderColor: '#666'\n                    },\n                    emphasis: {\n                        color: '#aaa',\n                        borderColor: '#aaa'\n                    }\n                },\n                data: []\n            },\n            backgroundColor: '#333',\n            title: {\n                'text': data.timeline[0],\n                textAlign: 'center',\n                right: '5%',\n                bottom: '15%',\n                textStyle: {\n                    fontSize: 20,\n                    color: 'rgba(255, 255, 255, 0.7)'\n                }\n            },\n            tooltip: {\n                padding: 5,\n                backgroundColor: '#222',\n                borderColor: '#777',\n                borderWidth: 1,\n                formatter: function (obj) {\n                    var value = obj.value;\n                    return schema[3].text + '：' + value[3] + '<br>'\n                            + schema[1].text + '：' + value[1] + schema[1].unit + '<br>'\n                            + schema[0].text + '：' + value[0] + schema[0].unit + '<br>'\n                            + schema[2].text + '：' + value[2] + '<br>';\n                }\n            },\n            grid: {\n                left: '12%',\n                right: '110'\n            },\n            xAxis: {\n                type: 'value',\n                name: '居住人口占比',\n                max: 9,\n                min: 0,\n                nameGap: 25,\n                nameLocation: 'middle',\n                nameTextStyle: {\n                    fontSize: 18\n                },\n                splitLine: {\n                    show: false\n                },\n                axisTick: {\n                    lineStyle: {\n                        color: '#ccc'\n                    }\n                },\n                axisLine: {\n                    lineStyle: {\n                        color: '#ccc'\n                    }\n                },\n                axisLabel: {\n                    formatter: '{value} %',\n                    textStyle: {\n                        color: '#ccc'\n                    }\n                }\n            },\n            yAxis: {\n                type: 'value',\n                name: '环比增幅',\n                max: 80,\n                min: -80,\n                nameTextStyle: {\n                    color: '#ccc',\n                    fontSize: 18\n                },\n                axisLine: {\n                    lineStyle: {\n                        color: '#ccc'\n                    }\n                },\n                axisTick: {\n                    lineStyle: {\n                        color: '#ccc'\n                    }\n                },\n                splitLine: {\n                    show: false\n                },\n                axisLabel: {\n                    formatter: '{value} %',\n                    textStyle: {\n                        color: '#ccc'\n                    }\n                }\n            },\n            visualMap: [\n                {\n                    type: 'piecewise',\n                    show: false,\n                    dimension: 3,\n                    categories: data.counties,\n                    calculable: true,\n                    precision: 0.1,\n                    textGap: 30,\n                    textStyle: {\n                        color: '#ccc'\n                    },\n                    inRange: {\n                        color: data.colors\n                    },\n                    outOfRange: {\n                        color: '#555'\n                    }\n                }\n            ],\n            series: [\n                {\n                    type: 'scatter',\n                    label: {\n                        show: true,\n                        formatter: \"{@[3]}\",\n                        fontSize: 12\n                    },\n                    itemStyle: itemStyle,\n                    data: data.series[0],\n                    symbolSize: function(val) {\n                        return sizeFunction(val[2]);\n                    }\n                }\n            ],\n            animationDurationUpdate: 1000,\n            animationEasingUpdate: 'quinticInOut'\n        },\n        options: []\n    };\n\n    for (var n = 0; n < data.timeline.length; n++) {\n        option.baseOption.timeline.data.push(data.timeline[n]);\n        option.options.push({\n            title: {\n                show: true,\n                'text': data.timeline[n] + ''\n            },\n            series: {\n                name: data.timeline[n],\n                type: 'scatter',\n                itemStyle: itemStyle,\n                data: data.series[n],\n                \n                symbolSize: function(val) {\n                    return sizeFunction(val[2]);\n                }\n            }\n        });\n    }\n\n    myChart.setOption(option);\n\n});"}