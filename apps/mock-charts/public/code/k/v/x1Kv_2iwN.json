{"code":"var chartData = {\r\n    name: 'theDemo',\r\n    lower: [],\r\n    upper: [],\r\n    timestamp: [],\r\n    value: [],\r\n\r\n};\r\nfor (var i = 0; i < 1000; i++) {\r\n    chartData.value[i] = Math.ceil(Math.random() * 10);\r\n    chartData.lower[i] = chartData.value[i] - 1\r\n    chartData.upper[i] = chartData.value[i] + 2\r\n    chartData.timestamp[i] = i + 1\r\n}\r\nvar markData = []\r\nvar option = {\r\n    title: {\r\n        show: true,\r\n        text: chartData.name,\r\n        textStyle: {\r\n            fontSize: 14\r\n        },\r\n        top: 10\r\n    },\r\n    grid: {\r\n        left: 40,\r\n        right: 40\r\n    },\r\n    xAxis: {\r\n        type: \"category\",\r\n        boundaryGap: false,\r\n        data: chartData.timestamp\r\n    },\r\n    brush: {\r\n        toolbox: [\"lineX\", \"clear\"],\r\n        transformable: false,\r\n        seriesIndex: \"all\",\r\n        throttleType: \"debounce\",\r\n        xAxisIndex: 0,\r\n        throttleDelay: 1000,\r\n        brushMode: \"multiple\",\r\n        // brushStyle: {\r\n        //     color: \"transparent\",\r\n        //     borderWidth: 0\r\n        // }\r\n    },\r\n    tooltip: {\r\n        show: false,\r\n    },\r\n    yAxis: [{\r\n        type: \"value\"\r\n    }],\r\n\r\n    series: [{\r\n            name: \"line\",\r\n            type: \"line\",\r\n            data: chartData.value,\r\n            symbol: \"none\",\r\n            lineStyle: {\r\n                color: \"#00a2ff\",\r\n                width: 1\r\n            },\r\n            showSymbol: false,\r\n            sampling: \"average\",\r\n            showAllSymbol: false,\r\n            markArea: {\r\n                data: markData\r\n            }\r\n        },\r\n        {\r\n            name: \"line\",\r\n            type: \"line\",\r\n            data: chartData.anomaly,\r\n            symbol: \"none\",\r\n            lineStyle: {\r\n                color: \"red\",\r\n                width: 1\r\n            },\r\n            showSymbol: false,\r\n            sampling: \"average\",\r\n            showAllSymbol: false\r\n        },\r\n        {\r\n            name: \"lineBtm\",\r\n            type: \"line\",\r\n            stack: \"lb\", // 两根线这个字段值设置就会叠加\r\n            data: chartData.lower,\r\n            symbol: \"none\",\r\n            lineStyle: {\r\n                color: \"transparent\"\r\n            },\r\n            showSymbol: false,\r\n            sampling: \"average\",\r\n            showAllSymbol: false\r\n        },\r\n        {\r\n            name: \"lineTop\",\r\n            type: \"line\",\r\n            areaStyle: {\r\n                color: \"#bedbff\"\r\n            }, // 设置此属性就会填充颜色\r\n            stack: \"lb\",\r\n            data: chartData.upper,\r\n            symbol: \"none\",\r\n            lineStyle: {\r\n                color: \"transparent\"\r\n            },\r\n            showSymbol: false,\r\n            sampling: \"average\",\r\n            showAllSymbol: false\r\n        }\r\n    ]\r\n};\r\nmyChart.setOption(option)\r\nmyChart.off(\"brush\");\r\nmyChart.on(\"brushSelected\", params => {\r\n\r\n    if (params.batch[0].areas.length > 0) {\r\n        var xSelect = params.batch[0].areas[0].coordRange;\r\n        markData.push([{\r\n                xAxis: chartData.timestamp[xSelect[0]],\r\n                itemStyle: {\r\n                    color: \"rgba(255,70,70,0.3)\"\r\n                }\r\n            },\r\n            {\r\n                xAxis: chartData.timestamp[xSelect[1]]\r\n            }\r\n        ]);\r\n        console.log(xSelect) //选中区域起点和终点\r\n        myChart.setOption(option);\r\n    }\r\n\r\n})"}