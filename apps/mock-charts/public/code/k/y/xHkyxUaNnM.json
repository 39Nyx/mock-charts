{"code":"var uploadedDataURL = \"/asset/get/s/data-1534124434928-H1s9ZDCHm.png\";\n$.getJSON('/asset/get/s/data-1524056463493-H1PcbpN2z.json', function(buildingsGeoJSON) {\n    console.log(buildingsGeoJSON);\n    var builds = buildingsGeoJSON.map(function(feature) {\n        return {\n            \"type\": \"Feature\",\n            \"properties\": {\n                \"name\": Math.random().toString(),\n                \"height\": feature.height || 100\n            },\n            \"geometry\": {\n                \"type\": \"Polygon\",\n                \"coordinates\": [feature.polygon]\n            }\n        }\n    })\n    var map = {\n        \"features\": builds\n    }\n    console.log(map)\n    echarts.registerMap('buildings', map);\n    var regionsData = builds.map(function(feature) {\n        return {\n            name: feature.properties.name,\n            value: Math.random() * 1,\n            height: feature.properties.height\n        };\n    });\n    console.log(regionsData)\n    myChart.setOption({\n        //   visualMap: {\n        //     show: true,\n        //     min: 0.4,\n        //     max: 200,\n        //     inRange: {\n        //         color: ['blue', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']\n        //     }\n        // },\n        maptalks3D: {\n            center: [-74.01164278497646, 40.70769573605318],\n            zoom: 16,\n            pitch: 55,\n            bearing: -10,\n            urlTemplate: 'http://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png',\n            postEffect: {\n                enable: true,\n                FXAA: {\n                    enable: true\n                }\n            },\n            light: {\n                main: {\n                    intensity: 1,\n                    shadow: false,\n                    shadowQuality: 'high'\n                },\n                ambient: {\n                    intensity: 0.\n                },\n                ambientCubemap: {\n                    texture: '/asset/get/s/data-1491838644249-ry33I7YTe.hdr',\n                    exposure: 1,\n                    diffuseIntensity: 0.5,\n                    specularIntensity: 2\n                }\n            }\n        },\n        series: [{\n            type: 'map3D',\n            coordinateSystem: 'maptalks3D',\n            map: 'buildings',\n            data: regionsData,\n            shading: 'realistic',\n            instancing: true,\n            silent: true,\n            itemStyle: {\n                color: '#FFFFFF',\n                borderWidth: 1\n            },\n            realisticMaterial: {\n                metalness: 1,\n                roughness: 0.4,\n                // textureTiling: 35,\n                // detailTexture: uploadedDataURL\n            }\n        }]\n    });\n});\n\nwindow.addEventListener('resize', function() {\n    myChart.resize();\n});"}