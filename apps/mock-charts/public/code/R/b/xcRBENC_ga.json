{"code":"var data = [\n    ['2020-09-20 22:50', '2020-09-20 23:55', 100, '浅睡'],\n    ['2020-09-20 23:55', '2020-09-21 01:55', 80, '深睡'],\n    ['2020-09-21 01:55', '2020-09-21 02:00', 100, '清醒'],\n    ['2020-09-21 02:00', '2020-09-21 06:55', 100, '浅睡'],\n];\nvar colorList = {\n    '浅睡': '#976ced',\n    '深睡': '#6055d8',\n    '清醒': '#ecd4ae',\n};\n\ndata = echarts.util.map(data, function(item, index) {\n    return {\n        value: item,\n        itemStyle: {\n            color: colorList[item[3]]\n        }\n    };\n});\n\nfunction renderItem(params, api) {\n    var yValue = api.value(2);\n    var start = api.coord([api.value(0), yValue]);\n    var size = api.size([api.value(1) - api.value(0), yValue]);\n    var style = api.style();\n\n    return {\n        type: 'rect',\n        shape: {\n            x: start[0],\n            y: start[1],\n            width: size[0],\n            height: size[1]\n        },\n        style: style\n    };\n}\n\noption = {\n    title: {\n        left: 'center',\n        bottom: '5%',\n        subtext: \"{x|} 深睡 {y|} 浅睡 {z|} 清醒 \",\n        subtextStyle: {\n            fontSize: 14,\n            color: \"#333\",\n            rich: {\n                x: {\n                    width:5,height:5,\n                    borderRadius:2.5,\n                    backgroundColor:\"#6055d8\"\n                },y: {\n                    width:5,height:5,\n                    borderRadius:2.5,\n                    backgroundColor:\"#976ced\"\n                },z: {\n                    width:5,height:5,\n                    borderRadius:2.5,\n                    backgroundColor:\"#ecd4ae\"\n                },\n            }\n        }\n    },\n    tooltip: {},\n    legend: {\n        show: true,\n        data: ['深睡，浅睡，清醒'],\n        formatter: function(name) {\n            console.log(name)\n            return 'Legend ' + name;\n        }\n    },\n    xAxis: {\n        type: 'time',\n        scale: true,\n        min: '2020-09-20 22:50',\n        max: '2020-09-21 06:55',\n        axisLabel: {\n            show: true,\n            interval: 1,\n            formatter: function(value, index) {\n                // 格式化成月/日，只在第一个刻度显示年份\n                var date = new Date(value);\n                var texts = [date.getHours() < 10 ? '0' + date.getHours() : date.getHours(), date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes()];\n                if (texts.join(':') == data[0].value[0].substring(data[0].value[0].length - 5) || texts.join(':') == data[data.length - 1].value[1].substring(data[data.length - 1].value[1].length - 5)) {\n                    return texts.join(':')\n                } else {\n                    return ''\n                }\n            }\n\n        },\n        axisTick: {\n            show: false\n        },\n        axisLine: {\n            show: false\n        },\n        splitLine: {\n            show: false\n        }\n    },\n    yAxis: {\n        axisLabel: {\n            show: false\n        },\n        axisTick: {\n            show: false\n        },\n        axisLine: {\n            show: false\n        },\n        splitLine: {\n            show: false\n        }\n\n    },\n    series: [{\n        type: 'custom',\n        renderItem: renderItem,\n        label: {\n            show: false,\n            position: 'top'\n        },\n        dimensions: ['from', 'to', 'profit'],\n        encode: {\n            x: [0, 1],\n            y: 2,\n            tooltip: [0, 1, 2],\n            itemName: 3\n        },\n        data: data\n    }]\n};"}