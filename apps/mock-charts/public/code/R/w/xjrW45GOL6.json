{"code":" var data = [\r\n        {\r\n            name: '一级告警',\r\n            value: 200\r\n        },{\r\n            name: '二级告警',\r\n            value: 44\r\n        },{\r\n            name: '三级告警',\r\n            value: 35\r\n        }];\r\n        const namArr = data.map(item => item.name);\r\n        let totalCount = 0;\r\n        data.forEach(item => {\r\n            totalCount += item.value;\r\n        }); \r\n        const titleArr= [], seriesArr=[], colors=[['#ff3d46', '#1e5486'],['#fdff00', '#1e5486'],['#009dff', '#1e5486']];\r\n        data.forEach(function(item, index){\r\n            titleArr.push(\r\n                {\r\n                    text:item.name,\r\n                    // left: index === 0 ? '30%' : (30 * index + 10) + '%',\r\n                    top: '65%',\r\n                    textAlign: 'center',\r\n                    textStyle: {\r\n                        fontWeight: 'normal',\r\n                        fontSize: '16',\r\n                        color: colors[index][0],\r\n                        textAlign: 'center',\r\n                    },\r\n                }        \r\n            );\r\n            seriesArr.push(\r\n                {\r\n                    name: item.name,\r\n                    type: 'pie',\r\n                    clockWise: false,\r\n                    radius: [28, 35],\r\n                    itemStyle:  {\r\n                        normal: {\r\n                            color: colors[index][0],\r\n                            shadowColor: colors[index][0],\r\n                            shadowBlur: 0,\r\n                            label: {\r\n                                show: false\r\n                            },\r\n                            labelLine: {\r\n                                show: false\r\n                            },\r\n                        }\r\n                    },\r\n                    hoverAnimation: true,\r\n                    center: window.innerWidth > 1400 ? (index === 0 ? ['25%','50%'] :[( 25 + 12 * index ) + '%','50%']) : (index === 0 ? ['35%','50%'] :[( 35 + 15 * index ) + '%','50%']),\r\n                    data: [{\r\n                        value: item.value,\r\n                        label: {\r\n                            normal: {\r\n                                formatter: function(params){\r\n                                    return params.value ;\r\n                                },\r\n                                position: 'center',\r\n                                show: true,\r\n                                textStyle: {\r\n                                    fontSize: '16',\r\n                                    fontWeight: 'bold',\r\n                                    color: colors[index][0]\r\n                                }\r\n                            }\r\n                        },\r\n                    }, {\r\n                        value: totalCount - item.value,\r\n                        name: 'invisible',\r\n                        itemStyle: {\r\n                            normal: {\r\n                                color: colors[index][1]\r\n                            },\r\n                            emphasis: {\r\n                                color: colors[index][1]\r\n                            }\r\n                        }\r\n                    }]\r\n                }    \r\n            )\r\n        });\r\n option = {\r\n            // title:titleArr,\r\n            backgroundColor:'#666666',\r\n            legend: {\r\n                // type: 'scroll',\r\n                orient: 'vertical',\r\n                left: '2%',\r\n                top: 'center',\r\n                itemGap: 10,\r\n                selectedMode: false,\r\n                icon: 'pin',\r\n                data: namArr,\r\n                textStyle: {\r\n                    color: '#ffffff',\r\n                    rich: {\r\n                        uname: {\r\n                            padding:[0,12 ,0, 0]\r\n                        },\r\n                        unum: {\r\n                            color: '#4ed139',\r\n                            marginLeft:12,\r\n                        }\r\n                    }\r\n                },\r\n                formatter(name) {\r\n                    console.log(`data is:=====>`,data);\r\n                    const resultArr = data.filter( item => item.name === name);\r\n                    let totalValue = 0;\r\n                    data.forEach(item => {\r\n                        totalValue += item.value\r\n                    });\r\n                    const per = ((resultArr[0]?.value / totalValue) * 100).toFixed(2);\r\n                    return `{uname|${name}}{unum|${per}%}`\r\n                }\r\n            },\r\n            series: seriesArr\r\n        };"}