{"code":"var data = [\n    {value:240, name:'rose1'},\n    {value:5, name:'rose2'},\n    {value:15, name:'rose3'},\n    {value:25, name:'rose4'},\n    {value:20, name:'rose5'},\n    {value:35, name:'rose6'},\n    {value:30, name:'rose7'},\n    {value:40, name:'rose8'}\n            ];\n            \nfunction sum(data) {\n    var s = 0;\n    for (var i=data.length-1; i>=0; i--) {\n        s += data[i].value;\n    }\n    return s;\n}\nvar all = sum(data);\nvar newData = [];\nfor (i = 0; i < data.length; i++) {\n\tnewData[i] = {\n\t\tvalue:data[i].value<=1?data[i].value:Math.log(data[i].value),\n\t\tname:data[i].name,\n\t\toriginalValue : data[i].value,\n\t\toriginalPercent : data[i].value / all * 100\n\t};\n}\n\noption = {\n    title : {\n        text: '南丁格尔玫瑰图',\n        subtext: '纯属虚构',\n        x:'center'\n    },\n    tooltip : {\n        trigger: 'item',\n\t\tformatter: function(param) {\n        \tvar value = param.value;\n        \tvar percent = param.percent;\n        \tfor (var i = 0;i<newData.length;i++){\n    \t\t   if (newData[i].name==param.name){\n    \t\t        value = newData[i].originalValue;\n    \t\t        percent = newData[i].originalPercent;\n    \t\t    \tbreak;\n    \t\t   }\n    \t\t}\n\t\t\treturn param.name + ':' + '<br>' +value+ '<br>' +Math.round(percent) + '%';\n\t\t}\n    },\n    legend: {\n        x : 'center',\n        y : 'bottom',\n        data:['rose1','rose2','rose3','rose4','rose5','rose6','rose7','rose8']\n    },\n    calculable : true,\n    series : [\n        {\n            name:'面积模式',\n            type:'pie',\n            radius : [30, 110],\n            center : ['50%', '50%'],\n            roseType : 'area',\n            data:newData\n        }\n    ]\n};\n"}