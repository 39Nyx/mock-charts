{"code":"let list = [\n    {\n        value: 7,\n        name: '噪音预警',\n    },\n    {\n        value: 6,\n        name: 'PM预警',\n    },\n    {\n        value: 8,\n        name: '天气预警',\n    },\n    {\n        value: 5,\n        name: '风速预警',\n    },\n    {\n        value: 4,\n        name: '湿度预警',\n    },\n    {\n        value: 2,\n        name: '温度预警',\n    },\n];\nlet xData = [];\nlet total = 0;\nlist.forEach(function(item){\n    xData.push(item.name);\n    total = item.value + total;\n})\nlet color1 = ['#5470C6', '#92CC76', '#FAC858', '#EF6666', '#73C0DE', '#3BA272'];\nlet color2 = ['#9B60B4', '#FC8350', '#3BA271', '#73C0DE', '#ED6765', '#FAC858'];\noption = {\n    color: color1,\n    tooltip: {\n        trigger: 'item',\n        formatter: '{b} : {c} ({d}%)',\n    },\n    legend: {\n        type: 'scroll',\n        orient: 'vartical',\n        top: 'center',\n        right: '15',\n        icon:\"circle\",\n        itemWidth: 8,\n        itemHeight: 8,\n        itemGap: 20,\n        data:xData,\n        formatter: function(name) {\n            console.log('name--',name)\n            var res = ''\n            let pre = 0;\n            for (var i = 0; i < list.length; i++) {\n                if(list[i].name== name){\n                    pre =((list[i].value/total)).toFixed(2)*100+'%';\n                    console.log('pre--',pre)\n                    res+= '{a|'+ name + '}' +'{pre|'+pre+'}'+ '{b|' + list[i].value + '}'\n                }\n            }\n            return res\n        },\n        textStyle: {\n            color:'#000',\n            rich: {\n                a: {\n                    fontSize: 14,\n                    color:'#666',\n                    width:85\n                },\n                 pre: {\n                    fontSize: 14,\n                    color:'#666',\n                    width:45\n                },\n                b: {\n                    fontSize: 14,\n                    color:'#666',\n                }\n            }\n        },\n    },\n    polar: {},\n    angleAxis: {\n        interval: 1,\n        type: 'category',\n        data: [],\n        z: 10,\n        axisLine: {\n            show: false,\n            lineStyle: {\n                color: '#0B4A6B',\n                width: 1,\n                type: 'solid',\n            },\n        },\n        axisLabel: {\n            interval: 0,\n            show: true,\n            color: '#0B4A6B',\n            margin: 8,\n            fontSize: 16,\n        },\n    },\n    radiusAxis: {\n        show: false,\n    },\n    calculable: true,\n    series: [\n        {\n            stack: 'a',\n            type: 'pie',\n            radius: ['10%', '70%'],\n            roseType: 'area',\n            zlevel: 10,\n            label: {\n                normal: {\n                    show: true,\n                    formatter: '{b}',\n                    borderRadius:20,\n                    textStyle: {\n                        fontSize: 12,\n                        color:\"#666\"\n                    },\n                    position: 'outside',\n                },\n                emphasis: {\n                    show: true,\n                },\n            },\n            itemStyle:{\n                borderRadius:10\n            },\n            labelLine: {\n                normal: {\n                    show: true,\n                    length: 15,\n                    length2: 20,\n                },\n                emphasis: {\n                    show: false,\n                },\n            },\n            data: list,\n        },\n    ],\n};\n"}