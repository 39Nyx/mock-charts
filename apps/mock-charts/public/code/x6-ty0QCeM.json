{"code":"function getVirtulData(year) {\n  year = year || '2017';\n  let date = +echarts.number.parseDate(year + '-01-01');\n  let end = +echarts.number.parseDate(+year + 1 + '-01-01');\n  let dayTime = 3600 * 24 * 1000;\n  let data = [];\n  for (let time = date; time < end; time += dayTime) {\n    data.push([\n      echarts.format.formatTime('yyyy-MM-dd', time),\n      Math.floor(Math.random() * 1000)\n    ]);\n  }\n  console.log(data[data.length - 1]);\n  return data;\n}\nconst graphData = [\n  ['2017-02-01', 260],\n  ['2017-02-04', 200],\n  ['2017-02-09', 279],\n  ['2017-02-13', 847],\n  ['2017-02-18', 241],\n  ['2017-02-23', 411],\n  ['2017-02-27', 985]\n];\nconst links = graphData.map(function (item, idx) {\n  return {\n    source: idx,\n    target: idx + 1\n  };\n});\nlinks.pop();\noption = {\n  tooltip: {\n    position: 'top'\n  },\n  visualMap: [\n    {\n      min: 0,\n      max: 1000,\n      calculable: true,\n      seriesIndex: [2, 3, 4],\n      orient: 'horizontal',\n      left: '55%',\n      bottom: 20\n    },\n    {\n      min: 0,\n      max: 1000,\n      inRange: {\n        color: ['grey'],\n        opacity: [0, 0.3]\n      },\n      controller: {\n        inRange: {\n          opacity: [0.3, 0.6]\n        },\n        outOfRange: {\n          color: '#ccc'\n        }\n      },\n      seriesIndex: [1],\n      orient: 'horizontal',\n      left: '10%',\n      bottom: 20\n    }\n  ],\n  calendar: [\n    {\n      orient: 'vertical',\n      yearLabel: {\n        margin: 40\n      },\n      monthLabel: {\n        nameMap: 'cn',\n        margin: 20\n      },\n      dayLabel: {\n        firstDay: 1,\n        nameMap: 'cn'\n      },\n      cellSize: 40,\n      range: '2017-02'\n    },\n    {\n      orient: 'vertical',\n      yearLabel: {\n        margin: 40\n      },\n      monthLabel: {\n        margin: 20\n      },\n      cellSize: 40,\n      left: 460,\n      range: '2017-01'\n    },\n    {\n      orient: 'vertical',\n      yearLabel: {\n        margin: 40\n      },\n      monthLabel: {\n        margin: 20\n      },\n      cellSize: 40,\n      top: 350,\n      range: '2017-03'\n    },\n    {\n      orient: 'vertical',\n      yearLabel: {\n        margin: 40\n      },\n      dayLabel: {\n        firstDay: 1,\n        nameMap: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\n      },\n      monthLabel: {\n        nameMap: 'cn',\n        margin: 20\n      },\n      cellSize: 40,\n      top: 350,\n      left: 460,\n      range: '2017-04'\n    }\n  ],\n  series: [\n    {\n      type: 'graph',\n      edgeSymbol: ['none', 'arrow'],\n      coordinateSystem: 'calendar',\n      links: links,\n      symbolSize: 10,\n      calendarIndex: 0,\n      data: graphData\n    },\n    {\n      type: 'heatmap',\n      coordinateSystem: 'calendar',\n      data: getVirtulData('2017')\n    },\n    {\n      type: 'effectScatter',\n      coordinateSystem: 'calendar',\n      calendarIndex: 1,\n      symbolSize: function (val) {\n        return val[1] / 40;\n      },\n      data: getVirtulData('2017')\n    },\n    {\n      type: 'scatter',\n      coordinateSystem: 'calendar',\n      calendarIndex: 2,\n      symbolSize: function (val) {\n        return val[1] / 60;\n      },\n      data: getVirtulData('2017')\n    },\n    {\n      type: 'heatmap',\n      coordinateSystem: 'calendar',\n      calendarIndex: 3,\n      data: getVirtulData('2017')\n    }\n  ]\n};"}