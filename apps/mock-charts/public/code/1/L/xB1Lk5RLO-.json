{"code":"/**\n * \n * 测试自动遍历源数据以整合成可以\n * 自动渲染的polyline的数据数组\n * \n */\n\nvar coors1 = [\n    [100, 220],\n    [200, 182],\n    [300, 191],\n    [400, 234],\n    [500, 290],\n    [600, 330],\n    [700, 310]\n];\n\nvar coors2 = [\n    [100, 420],\n    [200, 382],\n    [300, 391],\n    [400, 434],\n    [500, 490],\n    [600, 530],\n    [700, 510]\n];\n\nvar coors3 = [\n    [100, 620],\n    [200, 582],\n    [300, 591],\n    [400, 634],\n    [500, 690],\n    [600, 730],\n    [700, 710]\n];\nvar c1 = [];\nvar c2 = [];\nvar c3 = [];\nvar newSet = [c1, c2, c3];\n\nvar coors = [coors1, coors2, coors3];\n\nfunction filter(newSet, coors) {\n    for (var i = 0; i < newSet.length; i++) {\n        for (var j = 0; j < coors[i].length - 1; j++) {\n            newSet[i][j] = [coors[i][j][0], coors[i][j][1], coors[i][j + 1][0], coors[i][j + 1][1]];\n        }\n    }\n}\nfilter(newSet, coors);\nconsole.log(newSet);\nvar optionSeries = [];\nvar legendData = [];\nvar renderLoop = function(sourceData, pointData, i) {\n\n        var renderLineItem = function(params, api) {\n\n            var point1 = api.coord([api.value(0), api.value(1)]);\n            var point2 = api.coord([api.value(2), api.value(3)]);\n            //console.log(point);\n            return {\n                type: 'line',\n                shape: {\n                    x1: point1[0],\n                    x2: point2[0],\n                    y1: point1[1],\n                    y2: point2[1]\n                },\n                style: api.style({\n                    fill: null,\n                    stroke: api.visual('color'),\n                    lineWidth: 2\n                })\n            };\n\n        }\n        var num = i + 1;\n        legendData.push({\n            name: 'Line' + num\n        }, {\n            name: 'EffectScatter' + num\n        });\n        optionSeries.push({\n            type: 'custom',\n            name: 'Polyline' + num,\n            renderItem: renderLineItem,\n            encode: {\n                x: 0,\n                y: 1\n            },\n            data: sourceData[i],\n            animationDelay: function(idx) {\n                return idx * 100;\n            }\n        }, {\n            type: 'effectScatter',\n            name: 'EffectScatter' + num,\n            symbol: 'circle',\n            symbolSize: 10,\n            data: pointData[i],\n            animationDelay: function(idx) {\n                return idx * 100;\n            }\n        });\n    }\n    //遍历元数据，自动生成polyline\nfor (var i = 0; i < newSet.length; i++) {\n    renderLoop(newSet, coors, i);\n}\n\noption = {\n    title: {\n        text: 'Line Chart with scatters'\n    },\n    legend: {\n        data: legendData,\n        left: 0,\n        top: 50\n    },\n    grid: {\n        top: 100\n    },\n    xAxis: {\n        min: 0,\n        max: 1000\n    },\n    yAxis: {\n        min: 0,\n        max: 1000\n    },\n    tooltip: {\n\n    },\n    series: optionSeries\n};"}