{"code":"function mecatorToLngLat(mecator_lnglat) {\r\n    var lnglat = [];\r\n    if (Array.isArray(mecator_lnglat[0])) {\r\n        for (var i = 0; i < mecator_lnglat.length; i++) {\r\n            var _lnglat = proj4('EPSG:3857', 'EPSG:4326', mecator_lnglat[i]);\r\n            lnglat.push(_lnglat)\r\n        }\r\n    } else {\r\n        lnglat = proj4('EPSG:3857', 'EPSG:4326', mecator_lnglat);\r\n    }\r\n    return lnglat;\r\n}\r\nvar taxiRoutes = [];\r\nvar dataurl = '/asset/get/s/data-1516182603477-B1XI252Ef.json'\r\nmyChart.showLoading();\r\n$.getJSON(dataurl, function(regionsData) {\r\n    myChart.hideLoading();\r\n    var data = regionsData.data;\r\n    var hStep = 300 / (data.length - 1);\r\n    var i = 0;\r\n    for (var x in data) {\r\n        var pointString = data[x];\r\n        var pointArr = pointString.split(';');\r\n        var lnglats = [];\r\n        for (var j in pointArr) {\r\n            lnglats.push(pointArr[j].split(','))\r\n        }\r\n        taxiRoutes.push({\r\n            coords: lnglats,\r\n            lineStyle: {\r\n                color: echarts.color.modifyHSL('#5A94DF', Math.round(hStep * x))\r\n            }\r\n        })\r\n    }\r\n    option = {\r\n        maptalks3D: {\r\n            center: [127.41212033876286, 36.35230174302066],\r\n            zoom: 8,\r\n            baseLayer: {\r\n                'urlTemplate': 'http://a.tiles.mapbox.com/v3/spatialdev.map-c9z2cyef/{z}/{x}/{y}.png',\r\n                'subdomains': ['a', 'b', 'c', 'd']\r\n            },\r\n            pitch: 50,\r\n            // bearing: -10,\r\n            altitudeScale: 2,\r\n            urlTemplate: 'http://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png',\r\n            postEffect: {\r\n                enable: true,\r\n                FXAA: {\r\n                    enable: true\r\n                }\r\n            },\r\n            light: {\r\n                main: {\r\n                    intensity: 1,\r\n                    shadow: true,\r\n                    shadowQuality: 'high'\r\n                },\r\n                ambient: {\r\n                    intensity: 0.\r\n                },\r\n                ambientCubemap: {\r\n                    texture: '/asset/get/s/data-1491838644249-ry33I7YTe.hdr',\r\n                    exposure: 1,\r\n                    diffuseIntensity: 0.5,\r\n                    specularIntensity: 2\r\n                }\r\n            }\r\n        },\r\n        series: [{\r\n            type: 'lines3D',\r\n            coordinateSystem: 'maptalks3D',\r\n            effect: {\r\n                show: true,\r\n                constantSpeed: 1,\r\n                trailWidth: 2,\r\n                trailLength: 0.4,\r\n                trailOpacity: 1,\r\n                spotIntensity: 10\r\n            },\r\n            blendMode: 'lighter',\r\n            polyline: true,\r\n            lineStyle: {\r\n                width: 0.1,\r\n                color: 'rgb(100, 100, 0)',\r\n                opacity: 0.\r\n            },\r\n            data: taxiRoutes\r\n        }]\r\n    }\r\n    myChart.setOption(option);\r\n})"}