{"code":"var img = new Image();\nvar canvas = document.createElement('canvas');\nvar ctx = canvas.getContext('2d');\n\nimg.onload = function() {\n    var width = canvas.width = Math.floor(img.width / 6);\n    var height = canvas.height = Math.floor(img.height / 6);\n    ctx.drawImage(img, 0, 0, width, height);\n    var imgData = ctx.getImageData(0, 0, width, height);\n\n    // StackBlur.imageDataRGBA(imgData, 5);\n\n    var data = [];\n    for (var i = 0; i < imgData.data.length / 4; i++) {\n        var r = imgData.data[i * 4];\n        var g = imgData.data[i * 4 + 1];\n        var b = imgData.data[i * 4 + 2];\n        var a = imgData.data[i * 4 + 3];\n        if (a < 250) {\n            continue;\n        }\n\n        var lum = (0.2125 * r + 0.7154 * g + 0.0721 * b);\n        var barHeight = (lum - 125) / 4 + 50;\n        lum /= 255;\n        data.push({\n            value: [i % width, height - Math.floor(i / width), barHeight],\n            itemStyle: {\n                color: [r / 255, g / 255, b / 255, 1.0]\n            }\n        });\n    }\n\n\n    myChart.setOption(option = {\n        tooltip: {},\n        xAxis3D: {\n            type: 'value'\n        },\n        yAxis3D: {\n            type: 'value'\n        },\n        zAxis3D: {\n            type: 'value',\n            min: 0,\n            max: 100\n        },\n        grid3D: {\n            show: false,\n            viewControl: {\n                alpha: 70,\n                beta: 0,\n                distance: 100,\n                // panMouseButton: 'left',\n                // rotateMouseButton: 'right'\n            },\n            postEffect: {\n                enable: true,\n                bloom: {\n                    intensity: 0.05\n                },\n                depthOfField: {\n                    enable: true,\n                    blurRadius: 4,\n                    fstop: 10,\n                    focalDistance: 100\n                },\n                SSAO: {\n                    enable: true,\n                    radius: 3,\n                    intensity: 1.5\n                }\n            },\n            boxHeight: 20,\n            environment: '#000',\n            light: {\n                main: {\n                    shadow: true,\n                    intensity: 2\n                },\n                ambientCubemap: {\n                    texture: '/asset/get/s/data-1491896094618-H1DmP-5px.hdr',\n                    exposure: 2,\n                    diffuseIntensity: 1\n                }\n            }\n        },\n        series: [{\n            type: 'bar3D',\n            shading: 'lambert',\n            barSize: 0.8,\n            silent: true,\n            data: data\n        }]\n    });\n    \n    // $('#chart-panel').css({\n    //     'background-image': 'url(/asset/get/s/data-1497445317133-S1ap7hAf-.jpg)'\n    // })\n}\n\nimg.src = '/asset/get/s/data-1497444072981-Hkbek2CGZ.png';"}