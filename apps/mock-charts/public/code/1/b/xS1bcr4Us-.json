{"code":"app.title = '定时刷新环形图';\r\nmyChart.showLoading();\r\nvar option = {\r\n    color: ['#FC0790', '#065AF8', '#6BE508', '#6D06D1', '#F93C05', '#CB0C11'],\r\n    tooltip: {\r\n        trigger: 'item',\r\n        formatter: \"{a} <br/>{b}: {c} ({d}%)\"\r\n    },\r\n    legend: {\r\n        orient: 'vertical',\r\n        x: 'left',\r\n        data: ['直接访问', '邮件营销', '联盟广告', '视频广告', '搜索引擎']\r\n    },\r\n    series: [{\r\n        name: '访问来源',\r\n        type: 'pie',\r\n        radius: ['0%', '70%'],\r\n        avoidLabelOverlap: false,\r\n        label: {\r\n            normal: {\r\n                show: true,\r\n                position: 'top'\r\n            },\r\n            emphasis: {\r\n                position: 'top',\r\n                show: true,\r\n                textStyle: {\r\n                    fontSize: '30',\r\n                    fontWeight: 'bold'\r\n                }\r\n            }\r\n        },\r\n        labelLine: {\r\n            normal: {\r\n                show: false\r\n            }\r\n        },\r\n        data: [{\r\n            value: 100,\r\n            name: '直接访问'\r\n        }, {\r\n            value: 100,\r\n            name: '邮件营销'\r\n        }, {\r\n            value: 100,\r\n            name: '联盟广告'\r\n        }, {\r\n            value: 100,\r\n            name: '视频广告'\r\n        }, {\r\n            value: 100,\r\n            name: '搜索引擎'\r\n        }]\r\n    }]\r\n};\r\n\r\nfunction refreshData(data) {\r\n    myChart.hideLoading();\r\n    option.series[0].data = data;\r\n    myChart.setOption(option);\r\n};\r\nsetInterval(function() {\r\n    var legnedLength = option.legend.data.length;\r\n    var legneds = new Array();\r\n    var num = 0;\r\n    var obj;\r\n    for (var i = 0; i < legnedLength; i++) {\r\n        num = Math.ceil(Math.random() * 1000);\r\n        obj = new Object();\r\n        obj.value = num;\r\n        obj.name = option.legend.data[i];\r\n        legneds.push(obj);\r\n    }\r\n    refreshData(legneds);\r\n}, 2000);"}