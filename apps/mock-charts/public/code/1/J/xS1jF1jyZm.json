{"code":"// ===================数据================\nlet data = new Array(50).fill(1).map((d) => {\n    return {\n        name: ~~(Math.random() * 400),\n        value: ~~(Math.random() * 40),\n        value3: ~~(Math.random() * 40),\n        value2: ~~(Math.random() * 40)\n    }\n})\n\n// =================右边要放的字段名及颜色===========\nlet items = [{\n    key: 'value', color: \"#419840\"\n}, {\n     key: 'value2', color: \"#7db9ae\"\n}, {\n     key: 'value3', color: \"#74a029\"\n}] \n    \ndata.forEach((d) => {\n    let sum = 0\n    items.forEach((i) => {\n        sum += (d[i.key] || 0)\n    })\n    d.sum = sum\n})\n\n// =========================排序================\ndata.sort((a, b) => a.sum - b.sum)\n\n// \nlet yData = data.map((d) => d.name)\n\nlet itemSeries = items.map((d, i) => {\n    let values = data.map((p) => p[d.key])\n    return {\n        type: 'bar',\n        name: d.key,\n        data: values,\n        stack: 'all',\n        xAxisIndex: 1,\n        yAxisIndex: 1,\n        label: {\n                normal: {\n                    show: true,\n                    position: 'insideLeft'\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: d.color\n                }\n            }\n    }\n})\n\noption = {\n    backgroundColor: '#000', // 背景\n    tooltip : {\n        trigger: 'axis',\n        axisPointer : {  \n            type : 'shadow'\n        }\n    },\n    legend: {\n        data: items.map((d) => d.key),\n            textStyle: {\n            color: '#fff'\n       }\n    },\n    grid: [{\n        left: '3%',\n        right: '55%',\n        bottom: '3%',\n        containLabel: true\n    }, {\n        left: '45%',\n        right: '4%',\n        bottom: '3%',\n        containLabel: true\n    }],\n    xAxis:  [{\n        type: 'value',\n        inverse: true,\n        splitLine: {\n            show: false\n        }\n    }, {\n        type: 'value',\n        gridIndex: 1,\n        splitLine: {\n            show: false\n        }\n    }],\n    yAxis: [{\n        type: 'category',\n        data: yData,\n        axisLine: {\n            show: false\n        },\n        axisLabel: {\n        show: false\n        },\n        axisTick: {\n            show: false\n        }\n    }, {\n        type: 'category',\n        data: yData,\n        gridIndex: 1,\n        axisLine: {\n            show: false\n        },\n        axisTick: {\n            show: false\n        }\n    }],\n    series: [\n        ...itemSeries, \n        {\n            name: '总计',\n            type: 'bar',\n            data: data.map((d) => d.sum),\n            xAxisIndex: 1,\n            yAxisIndex: 1,\n            stack: 'all',\n            label: {\n                normal: {\n                    show: true,\n                    position: 'insideLeft',\n                    color: '#fff'\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: 'rgba(0,0,0,0)'\n                }\n            }\n        },\n        // ===================左边===================\n        {\n            type: 'bar',\n            data: data.map((d) => d.sum),\n            label: {\n                normal: {\n                    show: true,\n                    position: 'left',\n                    color: '#fff'\n                }\n            },\n            itemStyle: {\n                normal: {\n                    color: '#7DB9AE'\n                }\n            }\n        }\n    ]\n}"}