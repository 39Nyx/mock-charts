{"code":"var uploadedDataURL = \"/asset/get/s/data-1631672691480-Cv0mNjvUJ.json\";\n\n\nvar data = [\n    {\n        name: '高中及以下',\n        value: 234,\n        color: '#F8806C',\n    },\n    {\n        name: '硕士研究生',\n        value: 222,\n        color: '#D689FF',\n    },\n    {\n        name: '专科',\n        value: 120,\n        color: '#FFC64E',\n    },\n    {\n        name: '博士研究生',\n        value: 789,\n        color: '#3AED9E',\n    },\n    {\n        name: '本科',\n        value: 456,\n        color: '#3DADFE',\n    },\n];\n\nvar nameList = data.map((item) => item.name);\nvar color = data.map((item) => item.color);\nvar newData = [];\n// 根据总值设置间隔值大小\nvar sum = data.reduce((cur, pre) =>pre.value + cur, 0);\n\n// 给每个数据后添加特定的透明的数据形成间隔\ndata.forEach((item) => {\n    newData.push(item, {\n        name: '',\n        value: sum / 80,\n        labelLine: {\n            show: false,\n            lineStyle: {\n                color: 'transparent',\n            },\n        },\n        itemStyle: {\n            color: 'transparent',\n        },\n    });\n});\nvar option = {\n    grid: {\n        top: '5%',\n        left: '2%',\n        right: '5%',\n        bottom: '5%',\n        containLabel: true,\n    },\n    graphic: {\n        elements: [\n            {\n                type: 'image',\n                z: 1,\n                style: {\n                    image: uploadedDataURL.img,\n                    width: 230,\n                    height: 230,\n                },\n                left: '-10%',\n                top: 'center',\n            },\n        ],\n    },\n    legend: [\n        {\n            icon: `path://M962 962H62V62h900v900zM162 862h700V162H162v700z`,\n            data: nameList.slice(0, 3),\n            orient: 'vertical',\n            left: '60%',\n            top: '40%',\n            itemWidth: 14,\n            itemHeight: 14,\n            textStyle: {\n                rich: {\n                    a: {\n                        fontSize: 12,\n                        color: '#000',\n                        width: 60,\n                    },\n                    b: {\n                        fontSize: 14,\n                        color: '#000',\n                        align: 'right',\n                    },\n                },\n            },\n            itemGap: 20,\n            formatter: (name) => {\n                if (data.length) {\n                    const item = data.filter((item) => item.name === name)[0];\n                    return `{a|${name}}{b|${item.value}}`;\n                }\n            },\n        },\n        {\n            icon: `path://M962 962H62V62h900v900zM162 862h700V162H162v700z`,\n            data: nameList.slice(3, 5),\n            orient: 'vertical',\n            left: '70%',\n            top: '40%',\n            itemWidth: 14,\n            itemHeight: 14,\n            textStyle: {\n                rich: {\n                    a: {\n                        fontSize: 12,\n                        color: '#000',\n                        width: 60,\n                    },\n                    b: {\n                        fontSize: 14,\n                        color: '#000',\n                        align: 'right',\n                    },\n                },\n            },\n            itemGap: 20,\n            formatter: (name) => {\n                if (data.length) {\n                    const item = data.filter((item) => item.name === name)[0];\n                    return `{a|${name}}{b|${item.value}}`;\n                }\n            },\n        },\n    ],\n    color,\n    tooltip: {\n        trigger: 'item',\n    },\n    series: [\n        {\n            type: 'pie',\n            radius: ['50%', '60%'],\n            center: ['30.5%', '50%'],\n            data,\n            hoverOffset: 5,\n            labelLine: {\n                show: false,\n            },\n            label: {\n                show: false,\n            },\n        },\n    ],\n};\nvar imgLen = 600;\n$.getJSON(uploadedDataURL, function(targetImg) {\n  option = {\n    grid: {\n        top: '5%',\n        left: '2%',\n        right: '5%',\n        bottom: '5%',\n        containLabel: true,\n    },\n    graphic: {\n        elements: [\n            {\n                type: 'image',\n                z: 1,\n                style: {\n                    image: targetImg.img,\n                    width: imgLen,\n                    height: imgLen,\n                },\n                left: '3.6%',\n                top: 'center',\n            },\n        ],\n    },\n    legend: [\n        {\n            icon: `path://M962 962H62V62h900v900zM162 862h700V162H162v700z`,\n            data: nameList.slice(0, 3),\n            orient: 'vertical',\n            left: '50%',\n            top: '40%',\n            itemWidth: 14,\n            itemHeight: 14,\n            textStyle: {\n                rich: {\n                    a: {\n                        fontSize: 12,\n                        color: '#000',\n                        width: 70,\n                    },\n                    b: {\n                        fontSize: 14,\n                        color: '#000',\n                        align: 'right',\n                    },\n                },\n            },\n            itemGap: 20,\n            formatter: (name) => {\n                if (data.length) {\n                    const item = data.filter((item) => item.name === name)[0];\n                    return `{a|${name}}{b|${item.value}}`;\n                }\n            },\n        },\n        {\n            icon: `path://M962 962H62V62h900v900zM162 862h700V162H162v700z`,\n            data: nameList.slice(3, 5),\n            orient: 'vertical',\n            left: '65%',\n            top: '40%',\n            itemWidth: 14,\n            itemHeight: 14,\n            textStyle: {\n                rich: {\n                    a: {\n                        fontSize: 12,\n                        color: '#000',\n                        width: 70,\n                    },\n                    b: {\n                        fontSize: 14,\n                        color: '#000',\n                        align: 'right',\n                    },\n                },\n            },\n            itemGap: 20,\n            formatter: (name) => {\n                if (data.length) {\n                    const item = data.filter((item) => item.name === name)[0];\n                    return `{a|${name}}{b|${item.value}}`;\n                }\n            },\n        },\n    ],\n    color,\n    tooltip: {\n        trigger: 'item',\n    },\n    series: [\n        {\n            type: 'pie',\n            radius: ['25%', '30%'],\n            center: ['30.5%', '50%'],\n            data,\n            hoverOffset: 5,\n            labelLine: {\n                show: false,\n            },\n            label: {\n                show: false,\n            },\n        },\n    ],\n};\n  myChart.setOption(option)\n})\n\n"}