{"code":"var uploadedDataURL = '/asset/get/s/data-1625545136350-oWFk_ystL.json';\n\nvar baseTexture = null;\nvar option = null;\nvar geoJson = null;\n// 请求world.json文件\nfunction getGeoJsonData() {\n    $.getJSON(uploadedDataURL, function (jsonObj) {\n        geoJson = jsonObj;\n        getBaseTexture();\n    });\n}\n\n// 生成球面纹理\nfunction getBaseTexture() {\n    echarts.registerMap('world', geoJson);\n    let canvas = document.createElement('canvas');\n    baseTexture = echarts.init(canvas, null, {\n        width: 4096,\n        height: 2048,\n    });\n    baseTexture.setOption({\n        backgroundColor: '#031c48',\n        geo: {\n            type: 'map',\n            map: 'world',\n            left: 0,\n            top: 0,\n            right: 0,\n            bottom: 0,\n            boundingCoords: [\n                [-180, 90],\n                [180, -90],\n            ],\n            roam: false,\n            itemStyle: {\n                normal: {\n                    areaColor: '#2455ad',\n                    borderColor: '#000c2d',\n                },\n                emphasis: {\n                    areaColor: '#357cf8',\n                },\n            },\n            label: {\n                normal: {\n                    fontSize: 20,\n                    show: true,\n                    textStyle: {\n                        color: '#fff',\n                    },\n                },\n                emphasis: {\n                    fontSize: 30,\n                    show: true,\n                    textStyle: {\n                        color: 'yellow',\n                    },\n                },\n            },\n        },\n    });\n    drawEarth();\n}\n\n// 绘制球体\nfunction drawEarth() {\n    option = {\n        backgroundColor: '#013954',\n        tooltip: {\n            trigger: 'item',\n        },\n        globe: {\n            baseTexture: baseTexture, // 基础纹理\n            globeRadius: 150, // 球面半径\n            environment: '#000',\n            shading: 'color',\n            light: {\n                // 光照阴影\n                main: {\n                    color: '#fff', // 光照颜色\n                    intensity: 1, // 光照强度\n                    alpha: 40,\n                    beta: -30,\n                },\n                ambient: {\n                    color: '#fff',\n                    intensity: 1,\n                },\n            },\n            viewControl: {\n                alpha: 30,\n                beta: 160,\n                autoRotate: true, // 开启自动旋转\n                autoRotateAfterStill: 10,\n                distance: 240,\n            },\n        },\n        series: [\n            {\n                name: '世界贸易情况',\n                type: 'lines3D',\n                coordinateSystem: 'globe',\n                effect: {\n                    show: true,\n                },\n                blendMode: 'lighter',\n                lineStyle: {\n                    width: 2,\n                },\n                data: [],\n                silent: false,\n            },\n        ],\n    };\n    // 随机数据 i控制线数量\n    for (let i = 0; i < 100; i++) {\n        option.series[0].data = option.series[0].data.concat(rodamData());\n    }\n    myChart.clear();\n    myChart.setOption(option, true);\n}\n\nfunction rodamData() {\n    let name = '随机数据' + Math.random().toFixed(5) * 100000;\n    // 模拟数据，构造飞线的起始经纬度\n    let longitude = 116.2;\n    let latitude = 39.56;\n    let longitude2 = Math.random() * 360 - 180;\n    let latitude2 = Math.random() * 180 - 90;\n    return {\n        coords: [\n            [longitude, latitude],\n            [longitude2, latitude2],\n        ],\n        value: (Math.random() * 3000).toFixed(2),\n    };\n}\n\ngetGeoJsonData();"}