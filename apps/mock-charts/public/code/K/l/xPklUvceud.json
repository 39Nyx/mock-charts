{"code":"// http://datav.aliyun.com/tools/atlas 阿里云地图选择器 下载需要的数据包\n// 左上角 导入数据 插入到代码\nvar uploadedDataURL = \"/asset/get/s/data-1576821068997-HGlupX6J.json\"\n\n// 标记点\nvar geoCoordMap = {\n     '从化区': [113.587386,23.545283],\n    '花都区': [113.22033,23.40358],\n    '增城区': [113.829579,23.290497],\n    '白云区': [\t113.27307,23.15787],\n    '萝岗区': [113.447353,23.182565],\n    '天河区': [113.36112,23.12467],\n    '越秀区': [113.26683,23.12897],\n    '荔湾区': [113.2442,23.12592],\n    '海珠区': [113.26197,23.10379],\n    '黄浦区': [\t113.45895,23.10642],\n    '番禺区': [113.38397,22.93599],\n    '增城区': [113.687386,23.40358],\n    \"南沙区\": [113.53845,22.77144]\n\n}\n//  给value一个随机值\nvar mapData = []\nfor (var key in geoCoordMap) {\n    mapData.push({\n        'name': key,\n        'value': parseInt((Math.random() + 1) * 150)\n    })\n}\n\n// 输出json对象数组,value里包含坐标值和随机值\nfunction convertData (data) {\n    var res = []\n    for (var i = 0; i < data.length; i++) {\n        var geoCoord = geoCoordMap[data[i].name]\n        res.push({\n            name: data[i].name,\n            value: geoCoord.concat(data[i].value)\n        })\n    }\n    return res\n}\n\n//  设置目标点, 配置线条指向\nfunction convertToLineData (data) {\n    var res = []\n    for (var i = 0; i < data.length; i++) {\n        // 起点\n        var toCoord = geoCoordMap[data[i].name]\n        //  终点,这里设置的西安\n        var fromCoord = [113.36112,23.12467]\n        res.push([\n            {\n                coord: fromCoord,\n                value: data[i].value\n            },\n            {\n                coord: toCoord\n            }\n        ])\n    }\n    return res\n}\n\n// 解析地图数据包\n$.getJSON(uploadedDataURL, function (geoJson) {\n    // 注册地图,传入数据\n    echarts.registerMap('echarts', geoJson)\n    \n    optionMap = {\n        timeline: {\n            show: false\n        },\n        baseOption: {\n            // 设置地图参数和样式\n            geo: {\n                show: true,\n                map: 'echarts',\n                roam: true,\n                zoom: 1,\n                // 地图中心点, 可调节显示的偏移量\n                center: [113.36112,23.12467],\n                label: {\n                    // 高亮文字隐藏\n                    emphasis: {\n                        show: false\n                    }\n                },\n                itemStyle: {\n                    normal: {\n                        borderColor: 'rgba(147, 235, 248, 1)',\n                        borderWidth: 1,\n                        areaColor: {\n                            type: 'radial',\n                            x: 0.5,\n                            y: 0.5,\n                            r: 0.8,\n                            colorStops: [{\n                                offset: 0,\n                                // 0% 处的颜色\n                               color: 'rgba(147, 235, 248, 0)'\n                            },\n                            {\n                                offset: 1,\n                                // 100% 处的颜色\n                               color: 'rgba(147, 235, 248, .2)' \n                            }]\n                        },\n                        shadowColor: 'rgba(128, 217, 248, 1)',\n                        shadowOffsetX: -2,\n                        shadowOffsetY: 2,\n                        shadowBlur: 10\n                    },\n                    emphasis: {\n                        // 鼠标悬浮高亮\n                        areaColor: 'gray',\n                        borderWidth: 0\n                    }\n                }\n            }\n        },\n        options: [{\n              title : {\n        text: '广州市天河区节假日学生出游流向',\n        // subtext: '数据纯属虚构',\n        left: 'left',\n        textStyle : {\n            color: '#fff'\n        }\n    },\n           backgroundColor: '#404a59', // 背景\n            xAxis: {\n                show: false\n            },\n            yAxis: {\n                show: false\n            },\n            series: [{\n                // 坐标点参数和样式\n                type: 'effectScatter',\n                coordinateSystem: 'geo',\n                data: convertData(mapData),\n                symbolSize: function (val) {\n                    return val[2] / 20\n                },\n                showEffectOn: 'render',\n                rippleEffect: {\n                    brushType: 'stroke'\n                },\n                label: {\n                    normal: {\n                        formatter: '{b}',\n                        position: 'right',\n                        show: true\n                    }\n                },\n                itemStyle: {\n                    normal: {\n                        color: '#a6c84c',\n                        shadowBlur: 10,\n                        shadowColor: '#a6c84c'\n                    }\n                }\n            },\n            {\n                // 线条参数和样式\n                type: 'lines',\n                // 变化频率\n                zlevel: 2,\n                effect: {\n                    show: true,\n                    // 箭头指向速度，值越小速度越快\n                    period: 4,\n                    // 特效尾迹长度,取值0到1,值越大,尾迹越长\n                    trailLength: 0.05,\n                    symbol: 'arrow',\n                    // 图标大小\n                    symbolSize: 5\n                },\n                lineStyle: {\n                    normal: {\n                        color: '#a6c84c',\n                        // 尾迹线条宽度\n                        width: 1,\n                        // 尾迹线条透明度\n                        opacity: 1,\n                        // 尾迹线条曲直度\n                        curveness: 0.3\n                    }\n                },\n                data: convertToLineData(mapData)\n            }]\n        }]\n    }\n    myChart.setOption(optionMap)\n})\n"}