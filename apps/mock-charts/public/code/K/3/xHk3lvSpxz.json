{"code":"var brandData = ['X1 Carbon系列', 'Yoga 系列','','X1系列', 'Yoga Yoga系列'];\nvar storeData = ['KKONE', '高新万达', '世欧广场', '缤纷城'];\nvar salesData = [   \n    [100, 236, 325, 439],\n    [209, 236, 325, 439],\n    [209, 236, 325, 439],\n    [209, 236, 325, 439]\n]; //销量数据\nvar ratioData = [\n    [90, 80, 70, 75],\n    [95, 60, 75, 78],\n    [95, 60, 75, 78],\n    [95, 60, 75, 78]\n]; //达成率数据\n\nvar smin = Number.MAX_VALUE;\nvar smax = 0;\nfor (var i = 0; i < salesData[0].length; i ++) {\n    var sum = 0;\n    var nsum = 0;\n    for (var j = 0; j < salesData.length; j ++) {\n        if (salesData[j][i] >= 0) {\n            sum += salesData[j][i];\n        } else {\n            nsum += salesData[j][i];\n        }\n    }\n    if (sum > smax) {\n        smax = sum;\n    }\n    if (nsum < smin) {\n        smin = nsum;\n    }\n}\n\nvar rmin = Number.MAX_VALUE;\nvar rmax = 0;\nfor (var i = 0; i < ratioData.length; i ++) {\n    for (var j = 0; j < ratioData[i].length; j ++) {\n        if (ratioData[i][j] > rmax) {\n            rmax = ratioData[i][j];\n        }\n        if (ratioData[i][j] < rmin) {\n            rmin = ratioData[i][j];\n        }\n    }\n}\n\nif (smin >= 0) {\n    smin = 0;\n}\n\nvar smax = (smax - smin) / 2 * 3 + smin;\nvar rmin = rmax - (rmax - rmin) * 3;\n\noption = {\n    title: {},\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: {\n            type: 'shadow',\n        },\n        formatter: function (params) {\n            var result = params[0].name + ': <br />';\n            var circle = \"\";\n            for (var i = 0; i < params.length; i ++) {\n                if (i < params.length / 2) {\n                    circle = '<span style=\"display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;border:1px solid' + params[i].color + ';background-color:' + params[i].color + '\"></span>';\n                    result += circle;\n                    result += params[i].seriesName + '销量：' + params[i].data + '<br />';\n                } else {\n                    circle = '<span style=\"display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;border:1px solid' + params[i].color + '\"></span>';\n                    result += circle;\n                    result += params[i].seriesName + '达成率：' + params[i].data + '%<br />';\n                }\n            }\n            return result;\n        }\n    },\n    grid: {\n        containLabel: true\n    },\n    legend: {\n        data: brandData,\n        formatter: function(name) {\n             return '{space|' + name + '}';\n        },\n        textStyle: {\n            rich:{\n                space: {\n                    width: 100\n                }\n            }\n        }\n    },\n    xAxis: [{\n        type: 'category',\n        data: storeData\n    }],\n    yAxis: [{\n        type: 'value',\n        position: 'left',\n        max: smax,\n        min: smin,\n        interval: (smax - smin) / 6\n    }, {\n        type: 'value',\n        position: 'right',\n        max: rmax,\n        min: rmin,\n        interval: (rmax - rmin) / 6\n    }],\n    series: [{\n        name: brandData[0],\n        type: 'bar',\n        stack: 'a',\n        data: salesData[0]\n    }, {\n        name: brandData[1],\n        type: 'bar',\n        stack: 'a',\n        data: salesData[1]\n    }, {\n        name: brandData[3],\n        type: 'bar',\n        stack: 'a',\n        data: salesData[2]\n    }, {\n        name: brandData[4],\n        type: 'bar',\n        stack: 'a',\n        data: salesData[3]\n    }, {\n        name: brandData[0],\n        type: 'line',\n        yAxisIndex: 1,\n        data: ratioData[0]\n    }, {\n        name: brandData[1],\n        type: 'line',\n        yAxisIndex: 1,\n        data: ratioData[1]\n    }]\n};"}