{"code":"var datas = {\n    \t\"video_ac\": {\n\t\t\"name\": \"这是标题\",\n\t\t\"datas\": {\n\t\t\t\"task\": [\n\t\t\t  {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2020-04\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2020-05\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2020-06\"\n\t\t\t}, {\n\t\t\t\t\"data\": 124,\n\t\t\t\t\"time\": \"2020-07\"\n\t\t\t}, {\n\t\t\t\t\"data\": 367,\n\t\t\t\t\"time\": \"2020-08\"\n\t\t\t}, {\n\t\t\t\t\"data\": 265,\n\t\t\t\t\"time\": \"2020-09\"\n\t\t\t}, {\n\t\t\t\t\"data\": 220,\n\t\t\t\t\"time\": \"2020-10\"\n\t\t\t}, {\n\t\t\t\t\"data\": 153,\n\t\t\t\t\"time\": \"2020-11\"\n\t\t\t}, {\n\t\t\t\t\"data\": 19,\n\t\t\t\t\"time\": \"2020-12\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2021-01\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2021-02\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2021-03\"\n\t\t\t}],\n\t\t\t\"power\": [\n\t\t\t  {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2020-04\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2020-05\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2020-06\"\n\t\t\t}, {\n\t\t\t\t\"data\": 7,\n\t\t\t\t\"time\": \"2020-07\"\n\t\t\t}, {\n\t\t\t\t\"data\": 8,\n\t\t\t\t\"time\": \"2020-08\"\n\t\t\t}, {\n\t\t\t\t\"data\": 3,\n\t\t\t\t\"time\": \"2020-09\"\n\t\t\t}, {\n\t\t\t\t\"data\": 4,\n\t\t\t\t\"time\": \"2020-10\"\n\t\t\t}, {\n\t\t\t\t\"data\": 5,\n\t\t\t\t\"time\": \"2020-11\"\n\t\t\t}, {\n\t\t\t\t\"data\": 6,\n\t\t\t\t\"time\": \"2020-12\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2021-01\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2021-02\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2021-03\"\n\t\t\t}],\n\t\t\t\"question\": [\n\t\t\t  {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2020-04\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2020-05\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2020-06\"\n\t\t\t}, {\n\t\t\t\t\"data\": 55885,\n\t\t\t\t\"time\": \"2020-07\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2020-08\"\n\t\t\t}, {\n\t\t\t\t\"data\": 45652,\n\t\t\t\t\"time\": \"2020-09\"\n\t\t\t}, {\n\t\t\t\t\"data\": 19072,\n\t\t\t\t\"time\": \"2020-10\"\n\t\t\t}, {\n\t\t\t\t\"data\": 2055,\n\t\t\t\t\"time\": \"2020-11\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2020-12\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2021-01\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2021-02\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2021-03\"\n\t\t\t}],\n\t\t\t\"history\": [\n\t\t\t  {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2020-04\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2020-05\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2020-06\"\n\t\t\t}, {\n\t\t\t\t\"data\": 34042,\n\t\t\t\t\"time\": \"2020-07\"\n\t\t\t}, {\n\t\t\t\t\"data\": 50502,\n\t\t\t\t\"time\": \"2020-08\"\n\t\t\t}, {\n\t\t\t\t\"data\": 34820,\n\t\t\t\t\"time\": \"2020-09\"\n\t\t\t}, {\n\t\t\t\t\"data\": 35549,\n\t\t\t\t\"time\": \"2020-10\"\n\t\t\t}, {\n\t\t\t\t\"data\": 22608,\n\t\t\t\t\"time\": \"2020-11\"\n\t\t\t}, {\n\t\t\t\t\"data\": 2716,\n\t\t\t\t\"time\": \"2020-12\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2021-01\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2021-02\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2021-03\"\n\t\t\t}],\n\t\t\t\"rate\":[\n\t\t\t  {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2020-04\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2020-05\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2020-06\"\n\t\t\t}, {\n\t\t\t\t\"data\": 69,\n\t\t\t\t\"time\": \"2020-07\"\n\t\t\t}, {\n\t\t\t\t\"data\": 71,\n\t\t\t\t\"time\": \"2020-08\"\n\t\t\t}, {\n\t\t\t\t\"data\": 90,\n\t\t\t\t\"time\": \"2020-09\"\n\t\t\t}, {\n\t\t\t\t\"data\": 57,\n\t\t\t\t\"time\": \"2020-10\"\n\t\t\t}, {\n\t\t\t\t\"data\": 76,\n\t\t\t\t\"time\": \"2020-11\"\n\t\t\t}, {\n\t\t\t\t\"data\": 45,\n\t\t\t\t\"time\": \"2020-12\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2021-01\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2021-02\"\n\t\t\t}, {\n\t\t\t\t\"data\": 0,\n\t\t\t\t\"time\": \"2021-03\"\n\t\t\t}]\n\t\t}\n\t},\n}\nvar key_dict={\n    task:'task',\n    power:'power',\n    question:'question',\n    batch:\"batch\",\n    data:\"data\",\n    history:'history',\n    rate:'rate'\n},month_data = ['2020-04', '2020-05', '2020-06', '2020-07', '2020-08', '2020-09', '2020-10', '2020-11', '2020-12', '2021-01', '2021-02', '2021-03']\n\nfunction getYdata(datas,key){\n    var data = datas[key]\n    var reData = [], yAxisIndex = key == 'rate' ? 1 : 0\n    data.forEach(v=>{\n        reData.push(v.data)\n    })\n    return {\n        label:{\n            normal:{\n                show:true      ,\n                formatter:key=='rate'?'{c}%':'{c}'\n            },\n        },\n            name: key_dict[key],\n            type: 'line',\n             yAxisIndex:yAxisIndex,\n            // stack: '总量',\n            data: reData,\n        }\n}\nvar data = datas['video_ac']\nvar x_datas=[],y_datas = []\nObject.keys(data.datas).forEach(v=>{\n    x_datas.push(v)\n    y_datas.push(getYdata(data.datas,v))\n})\nconsole.log(y_datas)\noption = {\n    title: {\n        text: '年度报表 - '+data.name\n    },\n    tooltip: {\n        trigger: 'axis',\n        formatter:function(params,ticket,callbacl){\n            var html =''\n            params.forEach(v=>{\n                html+= v.marker+v.seriesName+'：<span style=\"float:right\">'+v.value+(v.seriesName=='准确率'?'%':'')+'</span><br/>'\n            })\n            return html\n        }\n    },\n    legend: {\n        top:'20px'\n        // data: \n    },\n    grid: {\n        left: '3%',\n        right: '4%',\n        bottom: '3%',\n        containLabel: true\n    },\n    toolbox: {\n        feature: {\n            saveAsImage: {}\n        }\n    },\n    xAxis: {\n        type: 'category',\n        boundaryGap: false,\n        data: month_data\n    },\n    yAxis:[ {\n        type: 'value'\n    },\n        {\n            \"type\": \"value\",\n            \"name\": \"准确率 (%)\",\n            \"position\": \"right\",\n            axisLabel: {\n                show:true,\n                formatter: \"{value} %\",\n                color: '#27719F'\n            },\n            \"max\": 100,\n            \"splitLine\": {\n                \"show\": false\n            },\n            \"axisTick\": {\n                show: false\n            },\n            axisLine: {\n                show: true,\n                lineStyle: {\n                    color: '#27719F',\n                }\n            },\n        }],\n    series:y_datas\n};"}