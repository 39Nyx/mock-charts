{"code":"//实现二：\nfunction isHasElementTwo(arr,value){\n    var str = arr.toString();\n\tvar index = str.indexOf(value);\n\tif(index >= 0){\n\t   //存在返回索引\n\t   var reg1 = new RegExp(\"((^|,)\"+value+\"(,|$))\",\"gi\");\n\t   return str.replace(reg1,\"$2@$3\").replace(/[^,@]/g,\"\").indexOf(\"@\");\n\t}else{\n\t\treturn -1;//不存在此项\n\t}\n\n}\ncolorsArr =  [\"#0263FF\", \"#765EFF\",  \"#0436E0\", \"#8E30FF\",\"#CB3D21\", \"#F1C551\", \"#00FFFF\",'#E0F228'];\nvar richItem = {};\ncolorsArr.forEach(function(color,index){\n   richItem[\"item\"+index] = {\n        width:20,\n        height:10,\n        backgroundColor:color,\n        borderRadius:5\n   }\n})\nvar richOther = {\n    top1:{\n            fontSize: 18,\n            fontFamily: 'FZLanTingHei-L-GBK',\n            fontWeight: 400,\n            color: '#FFFFFF',\n        },\n         top2:{\n             fontSize: 18,\n            fontFamily: 'FZLanTingHei-L-GBK',\n            fontWeight: 400,\n            color: '#FFFFFF00',\n         },\n        name:{\n            fontSize: 14,\n            fontFamily: 'FZLanTingHei-L-GBK',\n            fontWeight: 400,\n            color: '#FFFFFF',\n            \n        },\n        num:{\n            fontSize: 14,\n            fontFamily: 'FZLanTingHei-L-GBK',\n            fontWeight: 400,\n            color: '#ffffff',\n          \n        },\n        split:{\n            fontSize: 14,\n            fontFamily: 'FZLanTingHei-L-GBK',\n            fontWeight: 400,\n            color:' #ffffff',\n        \n        },\n        per:{\n             fontSize: 12,\n            fontFamily: 'FZLanTingHei-L-GBK',\n            fontWeight: 'bold',\n            color:' #ffffff',\n          \n        },\n        cell:{\n             fontSize: 11,\n            fontFamily: 'FZLanTingHei-L-GBK',\n            fontWeight: 400,\n            color:' #ffffff',\n            \n        }\n}\nvar richAll = Object.assign(richItem, richOther)\ndatas = {\n  name:\"频发案件占比\",\n  dataArr:[\n              {name:\"道路破损1\",value:80,per:10},\n              {name:\"道路破损2\",value:70,per:10},\n              {name:\"道路破损3\",value:60,per:10},\n              {name:\"道路破损4\",value:50,per:10},\n              {name:\"道路破损5\",value:40,per:10},\n              {name:\"道路破损6\",value:30,per:10},\n              {name:\"道路破损7\",value:20,per:10},]\n}\nvar nameArr = datas.dataArr.map(function(data){return data.name})\noption ={\n    backgroundColor:\"#031d33\",\n    legend:{\n      left:\"20%\",\n      top:\"center\",\n      itemGap:30,\n       formatter: function (name) {\n            var index = isHasElementTwo(nameArr,name)\n            if(index < 3){\n              return '{top1|top'+(index+1)+'    }'+\n              \n              '{item'+index+'|}'\n              +'{name|  '+name+'}{num|    '+datas.dataArr[index].value+'}{split|   / }{per|  '+datas.dataArr[index].per+'}{cell| %}'\n       \n            }else{\n              return '{top2|top'+(index+1)+'    }{item'+index+'|}{name|  '+name+'}{num|   '+datas.dataArr[index].value+'}{split|   / }{per|  '+datas.dataArr[index].per+'}{cell| %}'\n       \n            }\n              },\n        orient:\"vertical\",\n        icon:\"none\",\n        textStyle:{\n            rich:richAll\n        }\n    },\n        color:colorsArr,\n        series: [\n          {\n            name:datas.name,\n            type: \"pie\",\n            radius: [\"10%\", \"40%\"],\n            center: [\"60%\", \"50%\"],\n            roseType: \"radius\",\n            label: {\n              show: false\n            },\n            emphasis: {\n              label: {\n                show: false\n              }\n            },\n           \n            data:datas.dataArr\n          }\n        ]\n      };"}