{"code":"function getVirtulData(year) {\n    year = year || '2017';\n    var date = +echarts.number.parseDate(year + '-01-01');\n    var end = +echarts.number.parseDate((+year + 1) + '-01-01');\n    var dayTime = 3600 * 24 * 1000;\n    var data = [];\n    for (var time = date; time < end; time += dayTime) {\n        data.push([\n            echarts.format.formatTime('yyyy-MM-dd', time),\n            Math.floor(Math.random() * 1000)\n        ]);\n    }\n    return data;\n}\n\nvar data = {\n    '2015': getVirtulData(2015),\n    '2016': getVirtulData(2016),\n    '2017': getVirtulData(2017)\n};\n\n\n\noption = {\n    legend: {\n        top: 250,\n        selected: {\n            '2015': true,\n            '2016': false,\n            '2017': false\n        },\n        selectedMode: 'single'\n    },\n    tooltip: {\n        position: 'top'\n    },\n    visualMap: {\n        min: 0,\n        max: 1000,\n        calculable: true,\n        orient: 'horizontal',\n        left: 'center',\n        top: 'top'\n    },\n\n    calendar: {\n        range: '2015',\n        cellSize: ['auto', 20]\n    },\n\n    series: [{\n        type: 'heatmap',\n        coordinateSystem: 'calendar',\n        calendarIndex: 0,\n        data: data[2015],\n        name: '2015'\n    }, {\n        type: 'heatmap',\n        coordinateSystem: 'calendar',\n        calendarIndex: 0,\n        data: data[2016],\n        name: '2016'\n    }, {\n        type: 'heatmap',\n        coordinateSystem: 'calendar',\n        calendarIndex: 0,\n        data: data[2017],\n        name: '2017'\n    }]\n};\n\nmyChart.on('legendselectchanged', function(event) {\n    myChart.setOption({\n        calendar: {\n            range: event.name // '2015' or '2016' or '2017'\n        }\n    });\n})"}