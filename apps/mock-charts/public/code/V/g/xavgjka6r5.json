{"code":"\nvar data = [\n    {\n        value: 3,\n        name: '国铁',\n    },\n    {\n        value: 22,\n        name: '城轨',\n    },\n    {\n        value: 2,\n        name: '检修',\n    },\n    {\n        value: 5,\n        name: '海外',\n    },\n];\n\nvar legendData = ['国铁', '城轨', '检修', '海外'];\nvar colorArr = ['#FF9C98', '#3082FF', '#FEAF1B', '#00C9D9'];\nfunction getRich() {\n    let result = {};\n    colorArr.forEach((v, i) => {\n        (result[`normal${i}`] = {\n            fontSize: 20,\n            align: 'left',\n            padding: [10, 4],\n            color: '#4B525E',\n        }),\n            (result[`value${i}`] = {\n                color: '#4B525E',\n                align: 'left',\n                fontSize: 14,\n                padding: [2, 4],\n            });\n    });\n    return result;\n}\noption = {\n    color: colorArr,\n    legend: {\n        icon: 'circle',\n        itemWidth: 10,\n        itemHeight: 10,\n        padding: [10, 20],\n        backgroundColor: '#F9F9F9',\n        borderRadius: 20,\n        // 大小 和位置 文字样式\n        itemGap: 8,\n        x: 'center',\n        top: 10,\n        textStyle: {\n            fontSize: 12,\n            color: '#4B525E',\n            fontFamily: 'PingFang',\n        },\n        data:legendData,\n    },\n    series: [\n        {\n            name: '访问来源',\n            type: 'pie',\n            radius:'70%',\n            center: ['43%', '50%'],\n            selectedMode: 'single',\n            selectedOffset: 10,\n            clockwise: true,\n            label: {\n                normal: {\n                    formatter: function (params, ticket, callback) {\n                        aa = params.dataIndex;\n                        var percent = 0;\n                        var total = 0;\n                        for (var i = 0; i < data.length; i++) {\n                            total += data[i].value;\n                        }\n                        percent = ((params.value / total) * 100).toFixed(0) + '%';\n                        const index = params.dataIndex;\n                        // return [`{a${index}|${params.name}：${percent}}`].join('\\n')\n                        return [`{normal${index}|${percent}}\\n{value${index}|${params.name}}`].join('\\n');\n                    },\n                    padding: [0, -80],\n                    rich: getRich(),\n                },\n            },\n            labelLine: {\n                length: 40,\n                length2: 80,\n            },\n            itemStyle: {\n                normal: {\n                    shadowColor: 'rgba(0,0,0,0.4)',\n                    shadowBlur: 15,\n                },\n            },\n            data: data,\n        },\n    ],\n};\n"}