{"code":"var uploadedDataURL = \"/asset/get/s/data-1548735204507-0gzSEiKV4.json\";\r\nvar geoJson = {}\r\n$.ajax({\r\n    url : uploadedDataURL,\r\n    async : false,\r\n    dataType : 'json',\r\n    success : function(data){\r\n       echarts.registerMap('ls', data);\r\n       var geoCoordMap = {\r\n           '治金工业区':[120.643338882,31.9787250105],\r\n           '现代农业示范园区':[120.79881073,31.8820563076],\r\n           '经济技术开发区':[120.553760732,31.83],\r\n           '张家港保税区':[120.43,31.970892279],\r\n           '塘桥镇':[120.665220625,31.8253475975],\r\n           '乐余镇':[120.751388101,31.9358733739],\r\n           '凤凰镇':[120.631224777,31.7692103578],\r\n           '南丰镇':[120.762973474,31.8558316614],\r\n           '大新镇':[120.544713024,31.9722253813],\r\n       }\r\n       var data = [\r\n           {name:'治金工业区', value: 29},\r\n           {name:'现代农业示范园区', value: 23},\r\n           {name:'经济技术开发区', value: 137},\r\n           {name:'张家港保税区', value: 165},\r\n           {name:'塘桥镇', value: 70},\r\n           {name:'乐余镇', value: 48},\r\n           {name:'凤凰镇', value: 63},\r\n           {name:'南丰镇', value: 45},\r\n           {name:'大新镇', value: 20},\r\n       \r\n       ];\r\n       var convertData = function (data) {\r\n       var res = [];\r\n       for (var i = 0; i < data.length; i++) {\r\n           var geoCoord = geoCoordMap[data[i].name];\r\n           if (geoCoord) {\r\n               res.push({\r\n                   name: data[i].name,\r\n                   value: geoCoord.concat(data[i].value)\r\n               });\r\n           }\r\n       }\r\n       return res;\r\n    };\r\n       myChart.setOption(option = {\r\n          \r\n           backgroundColor: '#fff',\r\n           tooltip: {\r\n               formatter : function(e){\r\n                   if (typeof(e.value)[2] == \"undefined\") {\r\n                       return e.name;\r\n                   }else{\r\n                       return '企业数<br>'+e.name + ':' + e.value[2] + '家';\r\n                   }\r\n               \r\n               }\r\n           },\r\n           geo: {\r\n               map: 'ls',\r\n               show: true,\r\n               label: {\r\n                   emphasis: {\r\n                       show: false\r\n                   }\r\n               },\r\n               itemStyle: {\r\n                   normal: {\r\n                       areaColor: '#C9E6FF',\r\n                       borderColor: '#fff',\r\n                       borderWidth: 2,\r\n                       shadowColor: '#5AB2FE',\r\n                       shadowBlur: 20\r\n                   }\r\n               },\r\n           zoom:1.2,\r\n           },\r\n           series: [{\r\n               type: 'map',\r\n               map: 'ls',\r\n               geoIndex: 1,\r\n               aspectScale: 0.75, //长宽比\r\n               zoom:1.2,\r\n               label: {\r\n                   emphasis: {\r\n                       show: false,\r\n                       textStyle: {\r\n                           color: '#05C3F9'\r\n                       }\r\n                   }\r\n               },\r\n               roam: false,\r\n               itemStyle: {\r\n                   normal: {\r\n                       areaColor: 'transparent',\r\n                       borderColor: '#fff',\r\n                       borderWidth: 2\r\n                   },\r\n                   emphasis: {\r\n                       areaColor: '#C9E6FF',\r\n                       shadowColor: '#5AB2FE',\r\n                       shadowBlur: 20\r\n                   }\r\n               },\r\n               data: data,\r\n           },\r\n           {\r\n               name: '企业数',\r\n               type: 'scatter',\r\n               coordinateSystem: 'geo',\r\n               symbol: 'circle',\r\n               symbolSize: function (val) {\r\n            \t   var num = val[2] / 2;\r\n                   if(num < 20){\r\n                       return 20\r\n                   }else{\r\n                       return num;\r\n                   }\r\n               },\r\n               label: {\r\n                   normal: {\r\n                       show: true,\r\n                       formatter: function(value){\r\n                           return value.value[2]\r\n                       },\r\n                       textStyle: {\r\n                           color: '#fff',\r\n                           fontSize: 12,\r\n                       }\r\n                   }\r\n               },\r\n               itemStyle: {\r\n                   normal: {\r\n                       color: '#1C3E64', //标志颜色\r\n                   }\r\n               },\r\n               zlevel: 6,\r\n               data: convertData(data),\r\n           }\r\n           ]\r\n       });\r\n    }\r\n})\r\n   // 指定图表的配置项和数据\r\n\r\n"}