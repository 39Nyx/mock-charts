{"code":"// 初始化数据\nlet infoList = [\n    { name: '游泳健身', value: 1024 },\n    { name: '学车考驾照', value: 2048 },\n    { name: '交通违法', value: 560 },\n    { name: '景区', value: 960 },\n];\nlet sum = 0;\nlet legendData = [];\ninfoList.forEach((item) => {\n    sum += item.value * 1; // *1保证sum值为数值\n    legendData.push(item.name);\n});\ninfoList.push({\n    name: '总数',\n    value: sum,\n    tooltip: { formatter: () => '' },\n    itemStyle: { normal: { color: 'rgba(0, 0, 0, 0)' } },\n});\noption = {\n    backgroundColor: '#4BA5AD',\n    tooltip: {\n        trigger: 'item',\n        axisPointer: {\n            type: 'shadow',\n        },\n        formatter: function (param) {\n            let str = '';\n            let c = (param['value'] / sum) * 100; // 算出百分比\n            c = c.toFixed(2);\n            str = str + c + '%';\n            return param.name + str;\n        },\n    },\n    legend: {\n        itemWidth: 10,\n        itemHeight: 10,\n        orient: 'vertical', // vertical 设置图例展示方向\n        icon: 'circle',\n        data: legendData,\n        right: '15%',\n        y: 'center',\n        formatter: function (params) {\n            let v = '';\n            for (let i = 0; i < infoList.length; i++) {\n                if (infoList[i].name == params) {\n                    v = ((infoList[i].value / sum) * 100).toFixed(2) + '%';\n                }\n            }\n            return params + '   ' + v;\n        },\n    },\n    series: [\n        {\n            type: 'pie',\n            startAngle: 100,\n            radius: ['55%', '75%'],\n            center: ['30%', '50%'],\n            data: infoList,\n            labelLine: {\n                show: false,\n            },\n            label: {\n                show: false,\n                position: 'center',\n            },\n            itemStyle: {\n                emphasis: {\n                    shadowBlur: 10,\n                    shadowOffsetX: 10,\n                    shadowColor: 'rgba(0, 0, 0, 0.5)',\n                },\n            },\n        },\n        {\n            type: 'pie',\n            radius: ['0%', '45%'],\n            center: ['30%', '50%'],\n            startAngle: [90],\n            label: {\n                normal: {\n                    position: 'center',\n                    fontSize: 10,\n                    color: '#000',\n                    lineHeight: 20\n                },\n            },\n            hoverAnimation: false, // 取消掉环形图鼠标移上去时自动放大\n            data: [\n                {\n                    value: 0,\n                    name: '企业咨询热点前五',\n                    itemStyle: {\n                        normal: {\n                            color: 'rgba(216, 216, 216, 0.15)',\n                        },\n                    },\n                    tooltip: { formatter: () => '' },\n                },\n            ],\n        },\n    ],\n};\n"}