{"code":"/**\n * @author liang\n * 3D散点图，高度设为0，紧贴球表面，通过大小反映数据量多少\n */\n\n// 使用 echarts 绘制世界地图的实例作为纹理\nlet canvas = document.createElement('canvas');\nlet mapChart = echarts.init(canvas, null, {\n    width: 4096,\n    height: 2048\n});\nlet pOp = {\n    // 两种方法绘制地图都可以\n    geo: {\n        map: 'china',\n        label: {\n            fontSize: 12\n        },\n        itemStyle: {\n            areaColor: 'transparent',\n            borderColor: '#00FDFF'\n        },\n        emphasis: {\n            areaColor: 'transparent'\n        },\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        boundingCoords: [\n            [-180, 90],\n            [180, -90]\n        ]\n    },\n    // series: [\n    //     {\n    //         type: 'map',\n    //         map: 'world',\n    //         top: 0, left: 0,\n    //         right: 0, bottom: 0,\n    //         boundingCoords: [[-180, 90], [180, -90]],\n    //         itemStyle: {\n    //             areaColor: 'transparent',\n    //             borderColor: '#00FDFF'\n    //         },\n    //         label:{\n    //             fontSize: 80\n    //         },\n    //     }    \n    // ]\n}\n// const randomData = () => {\n//     let longitude = (Math.random() * 360 - 180).toFixed(6)\n//     let latitude = (Math.random() * 180 - 90).toFixed(6)\n//     let value = (Math.random() * 3000).toFixed(2)\n//     return [longitude, latitude, -1, value]\n// }\nlet data = [1,2,3,4]\n// for (let i = 0; i < 500; i++) {\n//     data.push(randomData())\n// }\nmapChart.setOption(pOp);\noption = {\n    backgroundColor: '#333',\n    tooltip: {\n        show: true,\n        formatter(d) {\n            return '经度：' + d.data[0] + '</br>纬度：' + d.data[1] + '</br>数据量：' + d.data[3]\n        }\n    },\n    visualMap: [{\n        // show: false,\n        type: 'continuous',\n        seriesIndex: 0,\n        text: ['scatter3D'],\n        textStyle: {\n            color: '#fff'\n        },\n        // dimension: 3,\n        calculable: true,\n        max: 3000,\n        inRange: {\n            color: ['#87aa66', '#eba438', '#d94d4c'],\n            symbolSize: [8, 30]\n        }\n    }],\n    globe: {\n        baseTexture: '/asset/get/s/data-1491837049070-rJZtl7Y6x.jpg',\n        heightTexture: '/asset/get/s/data-1491889019097-rJQYikcpl.jpg',\n        displacementScale: 0.04,\n        shading: 'lambert',\n        environment: '/asset/get/s/data-1491837999815-H1_44Qtal.jpg',\n        realisticMaterial: {\n            roughness: 0.9\n        },\n        \n        light: { // 光照阴影\n            main: {\n                color: '#fff', // 光照颜色\n                intensity: 1.2, // 光照强度\n                // shadowQuality: 'high', //阴影亮度\n                shadow: false, // 是否显示阴影\n                alpha: 40,\n                beta: -30\n            },\n            ambient: {\n                intensity: 0.5\n            }\n        },\n        viewControl: {\n            alpha: 30,\n            beta: 160,\n            // targetCoord: [116.46, 39.92],\n            autoRotate: true,\n            autoRotateAfterStill: 10,\n            distance: 150\n        },\n        layers: [{\n            type: 'blend',\n            texture: mapChart\n        }]\n    },\n    series: [{\n        type: 'scatter3D',\n        coordinateSystem: 'globe',\n        label: {\n            show: false\n        },\n        emphasis: {\n            label: {\n                show: false\n            }\n        },\n        // symbolSize (d) {\n        //     return d[3] * (maxSymbal - minSymbal) / 3000\n        // },\n        // blendMode: 'lighter',\n        data: data\n    },{\n        name: 'lines3D',\n        type: 'lines3D',\n        coordinateSystem: 'globe',\n        effect: {\n            show: true,\n            period: 2,\n            trailWidth: 1,\n            trailLength: 0.5,\n            trailOpacity: 1,\n            trailColor: '#0087f4'\n        },\n        blendMode: 'lighter',\n        lineStyle: {\n            // width: 2\n            width: 1,\n            color: '#0087f4',\n            opacity: 0\n        },\n        data: [],\n        silent: false,\n        \n    }]\n}\n\nfor (let i = 0; i < 50; i++) {\n    option.series[1].data = option.series[1].data.concat(rodamData())\n}\n\nfunction rodamData() {\n    let name = '随机点' + Math.random().toFixed(5) * 10000\n    // let longitude = Math.random() * 62 + 73\n    let longitude = 10.18\n    let longitude2 = Math.random() * 135.20\n    // let latitude = Math.random() * 50 + 3.52\n    let latitude = 20.51\n    let latitude2 = Math.random() * 53.33\n    return {\n        coords: [\n            [longitude2, latitude2],\n            [longitude, latitude]\n        ],\n        value: (Math.random() * 30).toFixed(2)\n    }\n}"}