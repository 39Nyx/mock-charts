{"code":"var colors = ['#FFAE57', '#FF7853', '#EA5151', '#CC3F57', '#9A2555'];\r\n var bgColor = '#2E2733';\r\n\r\n var itemStyle = {\r\n     star5: {\r\n         color: colors[0]\r\n     },\r\n     star4: {\r\n         color: colors[1]\r\n     },\r\n     star3: {\r\n         color: colors[2]\r\n     },\r\n     star2: {\r\n         color: colors[3]\r\n     }\r\n };\r\n\r\n var data = [{\r\n     name: '动物',\r\n     itemStyle: {\r\n         normal: {\r\n             color: colors[1]\r\n         }\r\n     },\r\n     children: [{\r\n         name: '部分入药',\r\n         children: [{\r\n             name: '5☆',\r\n             children: [{\r\n                 name: '鹿角'\r\n             }, {\r\n                 name: '蟾酥'\r\n             }, {\r\n                 name: '麝香'\r\n             }]\r\n         }, {\r\n             name: '4☆',\r\n             children: [{\r\n                 name: '牛黄'\r\n             }, {\r\n                 name: '蚕沙'\r\n             }, {\r\n                 name: '五灵脂'\r\n             }]\r\n         }, {\r\n             name: '3☆',\r\n             children: [{\r\n                 name: '阿胶'\r\n             }]\r\n         }]\r\n     }, {\r\n         name: '全体入药',\r\n         children: [{\r\n             name: '5☆',\r\n             children: [{\r\n                 name: '全蝎'\r\n             }]\r\n         }, {\r\n             name: '4☆',\r\n             children: [{\r\n                 name: '地龙'\r\n             }, {\r\n                 name: '蜈蚣'\r\n             }]\r\n         }, {\r\n             name: '3☆',\r\n             children: [{\r\n                 name: '水蛭'\r\n             }]\r\n         }]\r\n     }]\r\n }, {\r\n     name: '植物',\r\n     itemStyle: {\r\n         color: colors[2]\r\n     },\r\n     children: [{\r\n         name: '清热药',\r\n         children: [{\r\n             name: '5☆',\r\n             children: [{\r\n                 name: '淡竹叶'\r\n             }]\r\n         }, {\r\n             name: '4☆',\r\n             children: [{\r\n                 name: '决明子'\r\n             }, {\r\n                 name: '天花粉'\r\n             }]\r\n         }, {\r\n             name: '3☆',\r\n             children: [{\r\n                 name: '栀子'\r\n             }]\r\n         }]\r\n     }, {\r\n         name: '温里药',\r\n         children: [{\r\n             name: '5☆',\r\n             children: [{\r\n                 name: '干姜'\r\n             }]\r\n         }, {\r\n             name: '4☆',\r\n             children: [{\r\n                 name: '肉桂'\r\n             }, {\r\n                 name: '小茴香'\r\n             }, {\r\n                 name: '丁香',\r\n             }]\r\n         }, {\r\n             name: '3☆',\r\n             children: [{\r\n                 name: '花椒'\r\n             }]\r\n         }]\r\n     }, {\r\n         name: '消食药',\r\n         children: [{\r\n             name: '5☆',\r\n             children: [{\r\n                 name: '山楂'\r\n             }]\r\n         }, {\r\n             name: '4☆',\r\n             children: [{\r\n                 name: '鸡内金'\r\n             }, {\r\n                 name: '麦芽'\r\n             }]\r\n         }, {\r\n             name: '3☆',\r\n         }, {\r\n             name: '2☆',\r\n             children: [{\r\n                 name: '菜藤子'\r\n             }]\r\n         }]\r\n     }, {\r\n         name: '驱虫药',\r\n         children: [{\r\n             name: '4☆',\r\n             children: [{\r\n                 name: '使君子'\r\n             }, {\r\n                 name: '南瓜子'\r\n             }, {\r\n                 name: '苦赖皮'\r\n             }]\r\n         }]\r\n     }, {\r\n         name: '止血药',\r\n         children: [{\r\n             name: '5☆',\r\n             children: [{\r\n                 name: '地榆'\r\n             }]\r\n         }, {\r\n             name: '4☆',\r\n             children: [{\r\n                 name: '侧柏叶'\r\n             }, {\r\n                 name: '槐花'\r\n             }]\r\n         }, {\r\n             name: '3☆',\r\n             children: [{\r\n                 name: '大蓟小蓟'\r\n             }]\r\n         }]\r\n     }, {\r\n         name: '安神药',\r\n         children: [{\r\n             name: '4☆',\r\n             children: [{\r\n                 name: '朱砂'\r\n             }]\r\n         }]\r\n     }, {\r\n         name: '补气药',\r\n         children: [{\r\n             name: '3☆',\r\n             children: [{\r\n                 name: '人参'\r\n             }]\r\n         }, {\r\n             name: '2☆',\r\n             children: [{\r\n                 name: '西洋参'\r\n             }]\r\n         }]\r\n     }]\r\n }];\r\n\r\n for (var j = 0; j < data.length; ++j) {\r\n     var level1 = data[j].children;\r\n     for (var i = 0; i < level1.length; ++i) {\r\n         var block = level1[i].children;\r\n         var bookScore = [];\r\n         var bookScoreId;\r\n         for (var star = 0; star < block.length; ++star) {\r\n             var style = (function(name) {\r\n                 switch (name) {\r\n                     case '5☆':\r\n                         bookScoreId = 0;\r\n                         return itemStyle.star5;\r\n                     case '4☆':\r\n                         bookScoreId = 1;\r\n                         return itemStyle.star4;\r\n                     case '3☆':\r\n                         bookScoreId = 2;\r\n                         return itemStyle.star3;\r\n                     case '2☆':\r\n                         bookScoreId = 3;\r\n                         return itemStyle.star2;\r\n                 }\r\n             })(block[star].name);\r\n\r\n             block[star].label = {\r\n                 color: style.color,\r\n                 downplay: {\r\n                     opacity: 0.5\r\n                 }\r\n             };\r\n\r\n             if (block[star].children) {\r\n                 style = {\r\n                     opacity: 1,\r\n                     color: style.color\r\n                 };\r\n                 block[star].children.forEach(function(book) {\r\n                     book.value = 1;\r\n                     book.itemStyle = style;\r\n\r\n                     book.label = {\r\n                         color: style.color\r\n                     };\r\n\r\n                     var value = 1;\r\n                     if (bookScoreId === 0 || bookScoreId === 3) {\r\n                         value = 5;\r\n                     }\r\n\r\n                     if (bookScore[bookScoreId]) {\r\n                         bookScore[bookScoreId].value += value;\r\n                     } else {\r\n                         bookScore[bookScoreId] = {\r\n                             color: colors[bookScoreId],\r\n                             value: value\r\n                         };\r\n                     }\r\n                 });\r\n             }\r\n         }\r\n\r\n         level1[i].itemStyle = {\r\n             color: data[j].itemStyle.color\r\n         };\r\n     }\r\n }\r\n\r\n option = {\r\n     backgroundColor: bgColor,\r\n     color: colors,\r\n     series: [{\r\n         type: 'sunburst',\r\n         center: ['50%', '48%'],\r\n         data: data,\r\n         sort: function(a, b) {\r\n             if (a.depth === 1) {\r\n                 return b.getValue() - a.getValue();\r\n             } else {\r\n                 return a.dataIndex - b.dataIndex;\r\n             }\r\n         },\r\n         label: {\r\n             rotate: 'radial',\r\n             color: bgColor\r\n         },\r\n         itemStyle: {\r\n             borderColor: bgColor,\r\n             borderWidth: 2\r\n         },\r\n         levels: [{}, {\r\n             r0: 0,\r\n             r: 40,\r\n             label: {\r\n                 rotate: 0\r\n             }\r\n         }, {\r\n             r0: 40,\r\n             r: 105\r\n         }, {\r\n             r0: 115,\r\n             r: 140,\r\n             itemStyle: {\r\n                 shadowBlur: 2,\r\n                 shadowColor: colors[2],\r\n                 color: 'transparent'\r\n             },\r\n             label: {\r\n                 rotate: 'tangential',\r\n                 fontSize: 10,\r\n                 color: colors[0]\r\n             }\r\n         }, {\r\n             r0: 140,\r\n             r: 145,\r\n             itemStyle: {\r\n                 shadowBlur: 80,\r\n                 shadowColor: colors[0]\r\n             },\r\n             label: {\r\n                 position: 'outside',\r\n                 textShadowBlur: 5,\r\n                 textShadowColor: '#333',\r\n             },\r\n             downplay: {\r\n                 label: {\r\n                     opacity: 0.5\r\n                 }\r\n             }\r\n         }]\r\n     }]\r\n };"}