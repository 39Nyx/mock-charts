{"code":"let url = 'www.baidu.com'\r\nlet attackNode = {\r\n    name: '杭州',\r\n    value: [120.165024, 30.252501],\r\n    ip: '121.40.198.98'\r\n}\r\nvar allCity = [{\r\n  \"id\": 1,\r\n  \"name\": \"南京\",\r\n  \"value\": [118.796877, 32.060255],\r\n  \"color\": \"#00BCD4\",\r\n  \"attack_times\": 6925,\r\n  \"ip\": '117.88.5.20',\r\n  \"type\": 'cc',\r\n  \"attackName\": 'CC攻击'\r\n}]\r\n\r\n var series = [{\r\n     type: 'effectScatter',\r\n     coordinateSystem: 'geo',\r\n     zlevel: 4,\r\n     symbolSize: 20,\r\n     itemStyle: {\r\n         normal: {\r\n             color: '#FAF83899'\r\n         }\r\n     },\r\n     tooltip: {\r\n        formatter: function (params) {\r\n            let data = params.data\r\n            let str = ` \r\n            ${url} （${data.name}）<br>\r\n            节点已成功防御\r\n            `\r\n            return str\r\n        }\r\n     },\r\n     rippleEffect: {\r\n         scale: 2,\r\n         brushType: 'stroke'\r\n     },\r\n     data: [attackNode],\r\n }\r\n ];\r\n\r\n //绘制所有城市 显示特效\r\n allCity.forEach(function(item) {\r\n     series.push({\r\n         name: item.name,\r\n         type: 'lines',\r\n         zlevel: 2,\r\n        \"polyline\": true,\r\n        \"lineStyle\": {\r\n            \"normal\": {\r\n                \"width\": 0\r\n            }\r\n        },\r\n        \"effect\": {\r\n            \"constantSpeed\": 70,\r\n            \"show\": true,\r\n            \"trailLength\": 0.6,\r\n            \"symbolSize\": 2,\r\n            color: item.color,\r\n            loop: true\r\n        },\r\n         data: [{\r\n            fromName: item.fromName,\r\n             toName: item.toName,\r\n             coords: [item.value, attackNode.value]\r\n         }]\r\n     })\r\n     series.push({\r\n         type: 'effectScatter',\r\n         coordinateSystem: 'geo',\r\n         zlevel: 4,\r\n         symbolSize: item.attack_times > 5000 ? item.attack_times / 1000 : 5,\r\n         rippleEffect: {\r\n             scale: 6,\r\n             brushType: 'stroke'\r\n         },\r\n         tooltip: {\r\n            formatter: function (params) {\r\n                let str = ` \r\n                ${item.ip} （${item.name}）<br>\r\n                正在发起 ${item.attackName} (${item.attack_times})\r\n                `\r\n                return str\r\n            }\r\n        },\r\n         itemStyle: {\r\n             normal: {\r\n                color: item.color\r\n             }\r\n         },\r\n         data: [{\r\n             name: item.name,\r\n             value: item.value,\r\n             visualMap: false\r\n         }],\r\n     })\r\n });\r\n\r\n\r\n\r\n option = {\r\n     backgroundColor: '#051b4a',\r\n     tooltip: {\r\n         trigger: 'item'\r\n     },\r\n     geo: {\r\n         map: 'china',\r\n         zoom: 1,\r\n         scaleLimit: {\r\n             min: 0.5,\r\n             max: 3\r\n         },\r\n         label: {\r\n             emphasis: {\r\n                 show: true,\r\n                 color: '#fff'\r\n             }\r\n         },\r\n         roam: true,\r\n         itemStyle: {\r\n             normal: {\r\n                 borderColor: 'rgba(147, 235, 248, 1)',\r\n                 borderWidth: 1,\r\n                 areaColor: {\r\n                     type: 'radial',\r\n                     x: 0.5,\r\n                     y: 0.5,\r\n                     r: 0.8,\r\n                     colorStops: [{\r\n                         offset: 0,\r\n                         color: 'rgba(147, 235, 248, 0)' // 0% 处的颜色\r\n                     }, {\r\n                         offset: 1,\r\n                         color: 'rgba(147, 235, 248, .2)' // 100% 处的颜色\r\n                     }],\r\n                     globalCoord: false // 缺省为 false\r\n                 },\r\n             },\r\n             emphasis: {\r\n                 areaColor: '#389BB7',\r\n                 borderWidth: 0\r\n             }\r\n         }\r\n     },\r\n     series: series\r\n };"}