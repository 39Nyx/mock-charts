{"code":"app.title = '环形图';\n\noption = {\n    tooltip: {\n        trigger: 'item',\n        formatter: \"{a} <br/>{b}: {c} ({d}%)\"\n    },\n    legend: {\n        orient: 'vertical',\n        x: 'left',\n        data:['直接访问','邮件营销','联盟广告','视频广告','搜索引擎'],\n    },\n    series: [\n        {\n            name:'访问来源',\n            type:'pie',\n            radius: ['50%', '70%'],\n            avoidLabelOverlap: false,\n            label: {\n                normal: {\n                    show: false,\n                    position: 'center'\n                },\n                emphasis: {\n                    show: true,\n                    textStyle: {\n                        fontSize: '30',\n                        fontWeight: 'bold'\n                    }\n                }\n            },\n            labelLine: {\n                normal: {\n                    show: false\n                }\n            },\n            data:[]\n        }\n    ]\n};\n\n\nsetTimeout(function() {\n     myChart.setOption({\n        legend:{\n            formatter:function(name){\n                 var data = myChart.getOption().series[0].data;\n                 var total = 0;\n                 var tarValue;\n                 for (var i = 0, l = data.length; i < l; i++) {\n                      total += data[i].value;\n                      if (data[i].name == name) {\n                          tarValue = data[i].value;\n                      }\n                 }\n                 var p = (tarValue / total * 100).toFixed(2);\n                 return name + ' ' + ' ' + '(' + p + '%)';\n            }  \n        },\n        series: [{\n            data: [\n                {value:335, name:'直接访问'},\n                {value:310, name:'邮件营销'},\n                {value:234, name:'联盟广告'},\n                {value:135, name:'视频广告'},\n                {value:1548, name:'搜索引擎'}\n            ]\n        }]\n    });\n}, 5000);"}