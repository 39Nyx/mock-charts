{"code":"option = {\n    series: [\n        {\n            type: 'pie',\n            data: [\n                { value: 1048, name: '搜索引擎' },\n                { value: 735, name: '直接访问' },\n                { value: 580, name: '邮件营销' },\n                { value: 484, name: '联盟广告' },\n                { value: 300, name: '视频广告' }\n            ]\n        }\n    ]\n};\n\nlet statu = false\nlet last = []\nlet shape = {}\nlet waits = true\n\nfunction mousedown(value) {\n    // 获取饼图属性 圆心位置\n    shape = value.event.target.shape\n    statu = true\n}\n\nfunction mouseup(value) {\n    statu = false\n    last = []\n}\nfunction getDirection(xy0, xy1) {\n    // 通过叉乘计算旋转方向\n    let xy = xy0[0] * xy1[1] - xy1[0] * xy0[1]\n    if (xy > 0) {\n        return -1\n    }\n    if (xy < 0) {\n        return 1\n    }\n    return 0\n}\n\nfunction mousemove(value) {\n    if (statu && waits) {\n        waits = false\n        let event = value.event\n        if (last.length === 0) {\n            // 以圆心作为新建坐标系的原点\n            last = [event.offsetX - shape.cx, event.offsetY - shape.cy]\n        } else {\n            let xy0 = last\n            let xy1 = [event.offsetX - shape.cx, event.offsetY - shape.cy]\n            // 通过向量 计算出前后两点移动相对于圆心转动的夹角度数\n            let angle =\n                getDirection(xy0, xy1) *\n                    (180 / Math.PI) *\n                    Math.acos(\n                        Math.min(1.0, (xy1[1] * xy0[1] + xy1[0] * xy0[0]) /\n                            (Math.sqrt(xy1[0] * xy1[0] + xy1[1] * xy1[1]) *\n                                Math.sqrt(xy0[0] * xy0[0] + xy0[1] * xy0[1])))\n                    ) +\n                myChart.getOption().series[0].startAngle\n            console.log(\"mousemove -> angle\", angle)\n            myChart.setOption({\n                series: {\n                    startAngle: angle\n                }\n            })\n            last = xy1\n        }\n        waits = true\n    }\n}\n\nmyChart.on('mouseup', mouseup)\nmyChart.on('mouseout', mouseup)\nmyChart.on('mousedown', mousedown)\nmyChart.on('mousemove', mousemove)"}