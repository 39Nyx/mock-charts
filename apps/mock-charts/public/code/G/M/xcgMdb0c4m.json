{"code":"var oldData = [{\n        \"CURRENCY_TYPE\": \"100元原封新券\",\n        \"AMOUNT\": 23.35\n    },{\n        \"CURRENCY_TYPE\": \"100元回笼券\",\n        \"AMOUNT\": 53.35\n    },{\n        \"CURRENCY_TYPE\": \"100元专用钞\",\n        \"AMOUNT\": 163.35\n    },{\n        \"CURRENCY_TYPE\": \"其他券别\",\n        \"AMOUNT\": 143.35\n    }\n];\n\n\nlet typeArr = [],\n    dataset = [];\noldData.forEach((item) => {\n    if (typeArr.indexOf(item.CURRENCY_TYPE) < 0) {\n        typeArr.push(item.CURRENCY_TYPE);\n    }\n});\n\ndataset = typeArr.map((CURRENCY_TYPE) => {\n    return {\n        name: CURRENCY_TYPE,\n        value: ''\n    };\n});\n\nfor (var i = 0; i < dataset.length; i++) {\n    for (var j = 0; j < oldData.length; j++) {\n        // console.log(typeArr[i] +'---'+ oldData[j]);\n        if(dataset[i].name == oldData[j].CURRENCY_TYPE){\n            dataset[i].value = oldData[j].AMOUNT;\n        }\n\n    }\n}\n/*\nvar typeArr = ['西凉', '益州', '兖州', '荆州', '幽州'];\nvar dataset = [\n                {value: 535, name: '荆州'},\n                {value: 510, name: '兖州'},\n                {value: 634, name: '益州'},\n                {value: 735, name: '西凉'},\n                {value: 735, name: '幽州'}\n            ];\n*/\noption = {\n    title: {\n        text: '代理库今日期初余额券别统计',\n        subtext: '单位：万元',\n        left: 'center'\n    },\n    tooltip: {\n        trigger: 'item',\n        formatter: '{b} : {c} ({d}%)'\n    },\n    legend: {\n        orient: 'vertical',\n        top: 'middle',\n        left: 'right',\n        data: typeArr,\n        textStyle: { \n            color: '#000',\n            fontSize: 20\n        },\n    },\n    series: [\n        {\n            type: 'pie',\n            radius: '45%',\n            center: ['50%', '50%'],\n            selectedMode: 'single',\n            data: dataset,\n            label: {\n                position: 'inside',\n                formatter: function(data){\n                    return data.value;\n                }\n            },\n            emphasis: {\n                itemStyle: {\n                    shadowBlur: 10,\n                    shadowOffsetX: 0,\n                    shadowColor: 'rgba(0, 0, 0, 0.5)'\n                }\n            }\n        }\n    ]\n};\n"}