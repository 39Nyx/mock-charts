{"code":"var uploadedDataURL = \"/asset/get/s/data-1477626617822-SJMboHgel.txt\";\n\nfunction convertData(sourceData) {\n    return [].concat.apply([], $.map(sourceData, function(busLine, index) {\n        var prevPoint = null;\n        var points = [];\n        var value = busLine.shift();\n        for (var i = 0; i < busLine.length; i += 2) {\n            var point = [busLine[i], busLine[i + 1]];\n            if (i > 0) {\n                point = [\n                    prevPoint[0] + point[0],\n                    prevPoint[1] + point[1]\n                ];\n            }\n            prevPoint = point;\n\n            points.push([point[0] / 1e5, point[1] / 1e5]);\n        }\n        return {\n            value: value,\n            coords: points\n        };\n    }));\n}\n\nvar option = {\n    bmap: {\n        roam: true\n    },\n    visualMap: {\n        type: \"piecewise\",\n        left: 'right',\n        /*            pieces: [\n                {min: 15}, // 不指定 max，表示 max 为无限大（Infinity）。\n                {min: 12, max: 15},\n                {min: 9, max: 12},\n                {min: 6, max: 9},\n                {min: 3, max: 6},\n                {max: 3}     // 不指定 min，表示 min 为无限大（-Infinity）。\n            ],*/\n        min: 0,\n        max: 15,\n        splitNumber: 5,\n        maxOpen: true,\n        color: ['red', 'yellow', 'green']\n    },\n    tooltip: {\n        formatter: function(params, ticket, callback) {\n            return \"拥堵指数:\" + params.value;\n        },\n        trigger: 'item'\n    },\n    series: [{\n        type: 'lines',\n        coordinateSystem: 'bmap',\n        polyline: true,\n        lineStyle: {\n            normal: {\n                opacity: 1,\n                width: 4\n            },\n            emphasis: {\n                width: 6\n            }\n        },\n        effect: {\n            show: true,\n            symbolSize: 2,\n            color: \"white\"\n        }\n    }]\n};\n\n$.getJSON(uploadedDataURL, function(rawData) {\n    option.series[0].data = convertData(rawData);\n    myChart.setOption(option);\n    // console.log(option);\n    //获取echart中使用的bmap实例\n    var map = myChart.getModel().getComponent('bmap').getBMap();\n    map.disableDoubleClickZoom();\n    map.centerAndZoom(\"嘉兴\", 13);\n\n});"}