{"code":"var data = [];\r\nvar innerList = [];\r\nvar carTotal = 0;\r\nvar faceTotal = 0;\r\nvar macTotal = 0;\r\nvar modelData = {\r\n    \"code\": \"200\",\r\n    \"data\": [{\r\n        \"type\": 1,\r\n        \"name\": \"苹果\",\r\n        \"count\": 2000\r\n    }, {\r\n        \"type\": 1,\r\n        \"name\": \"樱桃\",\r\n        \"count\": 2000\r\n    }, {\r\n        \"type\": 1,\r\n        \"name\": \"西瓜\",\r\n        \"count\": 2000\r\n    }, {\r\n        \"type\": 1,\r\n        \"name\": \"梨子\",\r\n        \"count\": 2000\r\n    }, {\r\n        \"type\": 2,\r\n        \"name\": \"大米\",\r\n        \"count\": 2000\r\n    }, {\r\n        \"type\": 2,\r\n        \"name\": \"小麦\",\r\n        \"count\": 2000\r\n    }, {\r\n        \"type\": 2,\r\n        \"name\": \"面粉\",\r\n        \"count\": 2000\r\n    }, {\r\n        \"type\": 2,\r\n        \"name\": \"葱\",\r\n        \"count\": 2000\r\n    }, {\r\n        \"type\": 2,\r\n        \"name\": \"大蒜\",\r\n        \"count\": 2000\r\n    }, {\r\n        \"type\": 2,\r\n        \"name\": \"可乐\",\r\n        \"count\": 2000\r\n    }, {\r\n        \"type\": 2,\r\n        \"name\": \"啤酒\",\r\n        \"count\": 2000\r\n    }, {\r\n        \"type\": 3,\r\n        \"name\": \"雪碧\",\r\n        \"count\": 2000\r\n    }, {\r\n        \"type\": 3,\r\n        \"name\": \"橙汁\",\r\n        \"count\": 2000\r\n    }],\r\n    \"message\": \"Successful\"\r\n};\r\nvar lineIconName=[];\r\nvar dataLength = modelData.data.length;\r\nvar temp = modelData.data;\r\nfor (var i = 0; i < temp.length; i++) {\r\n    if (temp[i].type === 1) {\r\n        carTotal = carTotal + temp[i].count;\r\n    }\r\n    if (temp[i].type === 2) {\r\n        faceTotal = faceTotal + temp[i].count;\r\n    }\r\n    if (temp[i].type === 3) {\r\n        macTotal = macTotal + temp[i].count;\r\n    }\r\n    data.push({\r\n        value: temp[i].count,\r\n        name: temp[i].name,\r\n        type: temp[i].type\r\n    });\r\n}\r\nif (carTotal > 0) {\r\n    innerList.push({\r\n        value: carTotal,\r\n        name: '水果统计',\r\n    });\r\n    lineIconName.push({\r\n        name: '水果统计',\r\n        icon: 'rect'\r\n    });\r\n}\r\nif (faceTotal > 0) {\r\n    innerList.push({\r\n        value: faceTotal,\r\n        name: '粮食统计',\r\n    });\r\n    lineIconName.push({\r\n        name: '粮食统计',\r\n        icon: 'rect'\r\n    });\r\n}\r\nif (macTotal > 0) {\r\n    innerList.push({\r\n        value: macTotal,\r\n        name: '饮料统计',\r\n    });\r\n    lineIconName.push({\r\n        name: '饮料统计',\r\n        icon: 'rect'\r\n    });\r\n}\r\noption = {\r\n    tooltip: {\r\n        trigger: 'item',\r\n        formatter: \"{a}<br>{b}: {c} ({d}%)\",\r\n    },\r\n    grid: {\r\n        show: false,\r\n        zlevel: 0,\r\n        z: 2,\r\n        left: '0%',\r\n        top: '20%',\r\n        right: '0%',\r\n        bottom: '0%'\r\n    },\r\n    series: [{\r\n        name: '模型分析',\r\n        type: 'pie',\r\n        selectedMode: 'single',\r\n        radius: [0, '50%'],\r\n        label: {\r\n            normal: {\r\n                position: 'outside',\r\n                show: true,\r\n            }\r\n        },\r\n        labelLine: {\r\n            normal: {\r\n                show: true,\r\n                length: 20,\r\n                length2: 25,\r\n            }\r\n        },\r\n        center: ['50%', '50%'],\r\n        data: innerList,\r\n        // color: ['#61a0a8', '#2f4554', '#c23521']\r\n    }, {\r\n        name: \"模型分析\",\r\n        type: 'pie',\r\n        center: ['50%', '50%'],\r\n        radius: ['70%', '90%'],\r\n        label: {\r\n            normal: {\r\n                show: false,\r\n            }\r\n        },\r\n        itemStyle: {\r\n            normal: {\r\n                color: function(prams) {\r\n                    if (prams.data.type === 1) {\r\n                        return '#C1232B';\r\n                    }\r\n                    if (prams.data.type === 2) {\r\n                        return '#27727B';\r\n                    }\r\n                    if (prams.data.type === 3) {\r\n                        return '#FCCE10';\r\n                    }\r\n                },\r\n                borderColor: '#ddd',\r\n                borderWidth: 1,\r\n            }\r\n        },\r\n        data: data\r\n    }]\r\n};\r\nvar timeTicket = null;\r\nvar count = 0;\r\ntimeTicket && clearInterval(timeTicket);\r\ntimeTicket = setInterval(function() {\r\n    myChart.dispatchAction({\r\n        type: 'downplay',\r\n        seriesIndex: 1\r\n    });\r\n    myChart.dispatchAction({\r\n        type: 'highlight',\r\n        seriesIndex: 1,\r\n        dataIndex: count % dataLength\r\n    });\r\n    myChart.dispatchAction({\r\n        type: 'showTip',\r\n        seriesIndex: 1,\r\n        dataIndex: count % dataLength,\r\n    });\r\n    count++;\r\n}, 1500);\r\nmyChart.on('mouseover', function(params) {\r\n    clearInterval(timeTicket);\r\n});\r\nmyChart.on('mouseout', function(params) {\r\n    timeTicket && clearInterval(timeTicket);\r\n    timeTicket = setInterval(function() {\r\n        myChart.dispatchAction({\r\n            type: 'downplay',\r\n            seriesIndex: 1\r\n        });\r\n        myChart.dispatchAction({\r\n            type: 'highlight',\r\n            seriesIndex: 1,\r\n            dataIndex: count % dataLength\r\n        });\r\n        myChart.dispatchAction({\r\n            type: 'showTip',\r\n            seriesIndex: 1,\r\n            dataIndex: count % dataLength,\r\n        });\r\n        count++;\r\n    }, 1500);\r\n});"}