{"code":"app.title = '堆叠条形图';\nvar _actual = [50, 100, 150];\nvar _should = [150, 150, 150];\nvar _college = ['学院1', '学院2', '学院3'];\noption = {\n    tooltip: {\n        trigger: 'axis',\n        axisPointer: { // 坐标轴指示器，坐标轴触发有效\n            type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'\n        },\n        formatter: function(data) {\n            console.log(data[0].dataIndex);\n            var _str = _college[data[0].dataIndex] + \"<br>\";\n            _str += \"男应报道： \" + _should[data[0].dataIndex] + \" 人<br>\";\n            _str += \"男实报道： \" + _actual[data[0].dataIndex] + \" 人<br>\";\n            _str += \"男报到率： \" + (_actual[data[0].dataIndex] * 100 / _should[data[0].dataIndex]).toFixed(2) + \" %<br>\";\n            _str += \"女应报道： \" + _should[data[0].dataIndex] + \" 人<br>\";\n            _str += \"女实报道： \" + _actual[data[0].dataIndex] + \" 人<br>\";\n            _str += \"女报到率： \" + (_actual[data[0].dataIndex] * 100 / _should[data[0].dataIndex]).toFixed(2) + \" %\";\n            return _str;\n        }\n    },\n    legend: {\n        show: true,\n        top: 10,\n        data: ['男', '女']\n    },\n    grid: {\n        left: '3%',\n        right: '6%',\n        bottom: '3%',\n        top: 40,\n        containLabel: true\n    },\n    xAxis: {\n        type: 'value',\n        show: true,\n        max: 130\n    },\n    yAxis: {\n        type: 'category',\n        axisLine: {\n            show: false\n        },\n        axisTick: {\n            show: false\n        },\n        data: _college\n    },\n    series: [{\n        name: '男应报道人数',\n        type: 'bar',\n        stack: '人数',\n        label: {\n            normal: {\n                show: true,\n                formatter: function(data) {\n                    return _should[data.dataIndex] + \" 人\";\n                },\n                position: 'inside'\n            }\n        },\n        itemStyle: {\n            normal: {\n                color: '#aaa'\n            }\n        },\n        data: _should.map(function(item, index) {\n            return parseInt(item / (item + _actual[index]) * 100)\n        })\n    }, {\n        name: '男',\n        type: 'bar',\n        stack: '人数',\n        label: {\n            normal: {\n                show: true,\n                formatter: function(data) {\n                    return _actual[data.dataIndex] + \" 人\";\n                },\n                position: 'inside'\n            }\n        },\n        itemStyle: {\n            normal: {\n                color: '#188333'\n            }\n        },\n        data: _actual.map(function(item, index) {\n            return parseInt(item / (item + _should[index]) * 100)\n        })\n    }, {\n        name: '男报到率',\n        type: 'bar',\n        stack: '人数',\n        label: {\n            normal: {\n                formatter: function(data) {\n                    return (_actual[data.dataIndex] * 100 / _should[data.dataIndex]).toFixed(2) + \" %\";\n                },\n                show: true,\n                position: 'insideLeft',\n                textStyle: {\n                    color: '#000'\n                }\n            }\n        },\n        itemStyle: {\n            normal: {\n                color: 'transparent'\n            }\n        },\n        data: [30, 30, 30]\n    },{\n        name: '女应报道人数',\n        type: 'bar',\n        stack: '人数1',\n        label: {\n            normal: {\n                show: true,\n                formatter: function(data) {\n                    return _should[data.dataIndex] + \" 人\";\n                },\n                position: 'inside'\n            }\n        },\n        itemStyle: {\n            normal: {\n                color: '#aaa'\n            }\n        },\n        data: _should.map(function(item, index) {\n            return parseInt(item / (item + _actual[index]) * 100)\n        })\n    }, {\n        name: '女',\n        type: 'bar',\n        stack: '人数1',\n        label: {\n            normal: {\n                show: true,\n                formatter: function(data) {\n                    return _actual[data.dataIndex] + \" 人\";\n                },\n                position: 'inside'\n            }\n        },\n        itemStyle: {\n            normal: {\n                color: '#c54040'\n            }\n        },\n        data: _actual.map(function(item, index) {\n            return parseInt(item / (item + _should[index]) * 100)\n        })\n    }, {\n        name: '女报到率',\n        type: 'bar',\n        stack: '人数1',\n        label: {\n            normal: {\n                formatter: function(data) {\n                    return (_actual[data.dataIndex] * 100 / _should[data.dataIndex]).toFixed(2) + \" %\";\n                },\n                show: true,\n                position: 'insideLeft',\n                textStyle: {\n                    color: '#000'\n                }\n            }\n        },\n        itemStyle: {\n            normal: {\n                color: 'transparent'\n            }\n        },\n        data: [30, 30, 30]\n    }]\n};"}