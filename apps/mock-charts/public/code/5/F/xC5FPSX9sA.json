{"code":"backgroundColor = 'rgba(0,0,0,1)';\nchartdata = [\n    {\n        label: '竞争性谈判',\n        value: '200',\n    },\n    {\n        label: '公开招标',\n        value: '300',\n    },\n    {\n        label: '询价',\n        value: '200',\n    },\n    {\n        label: '单一来源',\n        value: '600',\n    },\n    {\n        label: '邀请招标',\n        value: '500',\n    },\n];\nitemGap = 28.4;\nitemHeight = 32.5;\npadding = [5, 5];\ncolor = ['#37FFC9', '#FFE777', '#19D6FF', '#32A1FF', '#FFFFFF'];\n\nlet data1 = chartdata;\nlet sum = 0;\ndata1.forEach((item) => {\n    item.name = item.label || item.name;\n    sum += Number(item.value);\n});\n\nlet arrName = getArrayValue(data1, 'name');\nlet arrValue = getArrayValue(data1, 'value');\nlet sumValue = eval(arrValue.join('+'));\nlet objData = array2obj(data1, 'name');\nlet optionData = getData(data1);\n\nfunction getArrayValue(array, key) {\n    var key = key || 'value';\n    var res = [];\n    if (array) {\n        array.forEach((t) => {\n            res.push(t[key]);\n        });\n    }\n    return res;\n}\n\nfunction array2obj(array, key) {\n    var resObj = {};\n    for (var i = 0; i < array.length; i++) {\n        resObj[array[i][key]] = array[i];\n    }\n    return resObj;\n}\n\nfunction getData(data1) {\n    var res = {\n        series: [],\n        yAxis: [],\n    };\n    for (let i = 0; i < data1.length; i++) {\n        res.series.push({\n            name: '',\n            type: 'pie',\n            clockWise: false, //顺时加载\n            hoverAnimation: false, //鼠标移入变大\n            legendHoverLink: true,\n            radius: [92 - i * 15 + '%', 84 - i * 15 + '%'],\n            center: ['40%', '50%'],\n            label: {\n                show: false,\n            },\n            itemStyle: {\n                label: {\n                    show: false,\n                },\n                labelLine: {\n                    show: false,\n                },\n                borderWidth: 5,\n                // opacity:'0.95'\n            },\n            data: [\n                {\n                    value: data1[i].value * 0.75,\n                    name: data1[i].name,\n                },\n                {\n                    value: sumValue - data1[i].value * 0.75,\n                    name: '',\n                    itemStyle: {\n                        color: 'rgba(0,0,0,0)',\n                        borderWidth: 0,\n                    },\n                    hoverAnimation: false,\n                },\n            ],\n        });\n        res.series.push({\n            name: '',\n            type: 'pie',\n            silent: true,\n            z: 1,\n            clockWise: false, //顺时加载\n            hoverAnimation: false, //鼠标移入变大\n            radius: [92 - i * 15 + '%', 84 - i * 15 + '%'],\n            center: ['40%', '50%'],\n            label: {\n                show: false,\n            },\n            itemStyle: {\n                label: {\n                    show: false,\n                },\n                labelLine: {\n                    show: false,\n                },\n                borderWidth: 5,\n            },\n            data: [\n                {\n                    value: 7.5,\n                    itemStyle: {\n                        color: '#203643',\n                        borderWidth: 0,\n                    },\n                    tooltip: {\n                        show: false,\n                    },\n                    hoverAnimation: false,\n                },\n                {\n                    value: 2.5,\n                    name: '',\n                    itemStyle: {\n                        color: 'rgba(0,0,0,0)',\n                        borderWidth: 0,\n                    },\n                    tooltip: {\n                        show: false,\n                    },\n                    hoverAnimation: false,\n                },\n            ],\n        });\n        res.yAxis.push(((data1[i].value / sumValue) * 100).toFixed(2) + '%');\n    }\n    return res;\n}\n\noption = {\n    backgroundColor: backgroundColor,\n    tooltip: {\n        formatter: (params) => {\n            if (params.name != '') {\n                return (\n                    params.name + ' : ' + params.value / 0.75 + '\\n' + '(' + (params.percent / 0.75).toFixed(2) + '%)'\n                );\n            }\n        },\n    },\n    legend: {\n        show: true,\n        icon: 'rect',\n        // top: \"center\",\n        top: '3.38%',\n        bottom: '0',\n        left: '39.5%',\n        data: arrName,\n        selected: true,\n        width: 496,\n        itemWidth: 496,\n        // height:90,\n        itemHeight: itemHeight,\n        padding: padding,\n        itemGap: itemGap,\n        tooltip: {\n            show: true,\n            formatter: (name) => {\n                return (\n                    name.name +\n                    ' : ' +\n                    objData[name.name].value +\n                    ' (' +\n                    ((Number(objData[name.name].value) * 100) / sum).toFixed(2) +\n                    '%)'\n                );\n            },\n        },\n        formatter: (name) => {\n            return '{line|}{circle|●}{value|' + objData[name].value + '}';\n        },\n        textStyle: {\n            rich: {\n                value: {\n                    fontSize: 12,\n                    lineHeight: 20,\n                    color: '#fff',\n                },\n                line: {\n                    width: 98,\n                    height: 1,\n                    backgroundColor: '#fff',\n                },\n                circle: {\n                    color: '#fff',\n                    padding: [0, 6, 0, 0],\n                },\n            },\n        },\n    },\n    color: this.color,\n    xAxis: [\n        {\n            show: false,\n        },\n    ],\n    series: optionData.series,\n};\n"}