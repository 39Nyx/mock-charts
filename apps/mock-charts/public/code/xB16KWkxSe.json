{"code":"var rightBook = \"/asset/get/s/data-1483080241722-ry5VfFmrx.png\";\r\nvar leftBook = \"/asset/get/s/data-1483080235153-ByX4GFQrx.png\";\r\n\r\nvar bookBg = \"/asset/get/s/data-1483079771848-B1VDlK7Bx.png\";\r\n\r\nvar tagsAll = \"/asset/get/s/data-1482907856060-SJ_0x1brx.json\";\r\nvar tagsRead = \"/asset/get/s/data-1482907801586-BJzsgkbrl.json\";\r\n\r\n\r\n\r\nvar colors = ['#555', '#fff'];\r\n\r\noption = {\r\n    title: {\r\n        text: '羡辙豆瓣读书 tag',\r\n        bottom: 0,\r\n        left: 'center'\r\n    },\r\n    series: [{\r\n        type: 'wordCloud',\r\n        gridSize: 20,\r\n        sizeRange: [12, 45],\r\n        rotationRange: [0, 0],\r\n        shape: 'circle',\r\n        data: [],\r\n        left: 50,\r\n        width: '45%',\r\n        top: 60,\r\n        height: '72%',\r\n        textStyle: {\r\n            normal: {\r\n                color: '#555'\r\n            },\r\n            emphasis: {\r\n                color: '#109b85'\r\n            }\r\n        }\r\n    }, {\r\n        type: 'wordCloud',\r\n        gridSize: 20,\r\n        sizeRange: [12, 45],\r\n        rotationRange: [0, 0],\r\n        shape: 'circle',\r\n        data: [],\r\n        left: '52%',\r\n        width: '45%',\r\n        top: 60,\r\n        height: '72%',\r\n        textStyle: {\r\n            normal: {\r\n                color: colors[1]\r\n            },\r\n            emphasis: {\r\n                color: '#109b85'\r\n            }\r\n        }\r\n    }, {\r\n        type: 'scatter',\r\n        data: [],\r\n        color: [colors[0]],\r\n        name: '所有读过想读的书'\r\n    }, {\r\n        type: 'scatter',\r\n        data: [],\r\n        color: [colors[1]],\r\n        name: '2016读过的书'\r\n    }],\r\n    legend: {\r\n        data: ['所有读过想读的书', '2016读过的书'],\r\n        show: true\r\n    },\r\n    xAxis: {\r\n        type: 'value',\r\n        show: false\r\n    },\r\n    yAxis: {\r\n        type: 'value',\r\n        show: false\r\n    },\r\n    graphic: {\r\n        elements: [{\r\n            type: 'image',\r\n            style: {\r\n                image: bookBg,\r\n                width: window.innerWidth - 60,\r\n                x: 30,\r\n                y: 40,\r\n                height: window.innerHeight - 100\r\n            }\r\n        }]\r\n    }\r\n};\r\n\r\n\r\n// load tag data\r\nvar tagsAllData = [];\r\nvar tagsReadData = [];\r\n$.getJSON(tagsAll, function (data) {\r\n    for (var name in data) {\r\n        tagsAllData.push({\r\n            name: name,\r\n            value: data[name]\r\n        });\r\n    }\r\n\r\n    $.getJSON(tagsRead, function (data) {\r\n        for (var name in data) {\r\n            tagsReadData.push({\r\n                name: name,\r\n                value: data[name]\r\n            });\r\n        }\r\n    \r\n        loadImage();\r\n    });\r\n});\r\n\r\n\r\n// load mask image\r\nfunction loadImage() {\r\n    var leftImage = new Image();\r\n    leftImage.onload = imageLoaded;\r\n    leftImage.src = leftBook;\r\n    \r\n    var rightImage = new Image();\r\n    rightImage.onload = imageLoaded;\r\n    rightImage.src = rightBook;\r\n    \r\n    var loadedCnt = 0;\r\n    function imageLoaded() {\r\n        ++loadedCnt;\r\n        if (loadedCnt === 2) {\r\n            console.log(myChart);\r\n            myChart.setOption({\r\n                series: [{\r\n                    maskImage: leftImage,\r\n                    data: tagsAllData\r\n                }, {\r\n                    maskImage: rightImage,\r\n                    data: tagsReadData\r\n                }]\r\n            });\r\n        }\r\n    }\r\n}\r\n"}